"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5194],{96817:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));n(87617);const l={},o="Polarization split rotator",i={unversionedId:"examples/PIC/PolarizationSplitRotator/PolarizationSplitRotator",id:"examples/PIC/PolarizationSplitRotator/PolarizationSplitRotator",title:"Polarization split rotator",description:"Introduction",source:"@site/docs/examples/PIC/PolarizationSplitRotator/PolarizationSplitRotator.md",sourceDirName:"examples/PIC/PolarizationSplitRotator",slug:"/examples/PIC/PolarizationSplitRotator/",permalink:"/my-website/docs/examples/PIC/PolarizationSplitRotator/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/PIC/PolarizationSplitRotator/PolarizationSplitRotator.md",tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"Microring Resonator",permalink:"/my-website/docs/examples/PIC/MicroringResonator/"},next:{title:"Spot size converter",permalink:"/my-website/docs/examples/PIC/ssc/"}},p={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Simulation",id:"simulation",level:2},{value:"1. Code Description",id:"1-code-description",level:3},{value:"1.1 Import Toolkit",id:"11-import-toolkit",level:4},{value:"1.2 Define Simulation Function",id:"12-define-simulation-function",level:4},{value:"1.3 Define Parameters",id:"13-define-parameters",level:4},{value:"1.4 Create project",id:"14-create-project",level:4},{value:"1.5 Add Material",id:"15-add-material",level:4},{value:"1.6 Add Structure",id:"16-add-structure",level:4},{value:"1.7 Set Boundary",id:"17-set-boundary",level:4},{value:"1.8 Add Sub Mesh",id:"18-add-sub-mesh",level:4},{value:"1.9 Add EME port",id:"19-add-eme-port",level:4},{value:"1.10 Add Monitor",id:"110-add-monitor",level:4},{value:"1.11 Add EME solver",id:"111-add-eme-solver",level:4},{value:"1.12 View Structure",id:"112-view-structure",level:4},{value:"1.13 Calculate Mode",id:"113-calculate-mode",level:4},{value:"1.14 Run",id:"114-run",level:4},{value:"1.15 Run and Extract Results",id:"115-run-and-extract-results",level:4},{value:"1.16 Control Switch",id:"116-control-switch",level:4},{value:"2 Output Results",id:"2-output-results",level:3},{value:"2.1 ModeProfile",id:"21-modeprofile",level:4},{value:"2.2 EME Propagation",id:"22-eme-propagation",level:4},{value:"Analysis and Discuss",id:"analysis-and-discuss",level:2},{value:"References",id:"references",level:2}],m={toc:d},s="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(s,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"polarization-split-rotator"},"Polarization split rotator"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("div",{class:"text-justify"},"\u7edd\u7f18\u4f53\u4e0a\u7684\u7845\u6ce2\u5bfc\u5177\u6709\u5f3a\u7684\u53cc\u6298\u5c04\u6548\u5e94\uff0c\u4f46\u662f\u5f88\u591a\u5149\u5b66\u5668\u4ef6\u5bf9\u5149\u7684\u504f\u632f\u5341\u5206\u654f\u611f\uff0c\u56e0\u6b64\u5728\u5149\u5b50\u96c6\u6210\u56de\u8def\u5e38\u9700\u8981\u589e\u52a0\u504f\u632f\u5206\u675f\u4e0e\u65cb\u8f6c\u7684\u8bbe\u8ba1\u6765\u83b7\u5f97\u9ad8\u6027\u80fd\u7684\u5668\u4ef6\u3002",(0,r.kt)("p",null,"\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u6f14\u793a\u4e86\u4f7f\u7528EME\u6c42\u89e3\u5668\u8ba1\u7b97\u6a21\u5f0f\u8026\u5408\u4e0e\u8f6c\u6362\u5668\u4ef6\u7684\u4eff\u771f\u6d41\u7a0b\u3002\u5229\u7528\u975e\u5bf9\u79f0\u7684\u5b9a\u5411\u8026\u5408\u5668\u7ed3\u6784\u5c06\u6b63\u4ea4\u504f\u632f\u7684\u5149\u8026\u5408\u5206\u5f00\uff0c\u7136\u540e\u5c06\u65cb\u8f6c\u5230\u6211\u4eec\u9700\u8981\u7684\u7ed3\u6784\u3002\nSilicon waveguides on insulators have strong birefringence effects, but many optical devices are very sensitive to the polarization of light. Therefore, in photonic integrated circuits, it is often necessary to increase the design of polarization splitting and rotation to obtain high-performance devices.\nIn this example, we demonstrated the simulation process of using an EME solver to calculate mode coupling and conversion devices. Using an asymmetric directional coupler structure to separate the orthogonal polarized light coupling, and then rotate it to the desired structure.")),(0,r.kt)("h2",{id:"simulation"},"Simulation"),(0,r.kt)("h3",{id:"1-code-description"},"1. Code Description"),(0,r.kt)("h4",{id:"11-import-toolkit"},"1.1 Import Toolkit"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"First, we need to import ",(0,r.kt)("inlineCode",{parentName:"p"},"maxoptics_sdk")," and Python's third-party package. The import module for EME simulation is shown below.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import maxoptics_sdk.all as mo\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nfrom typing import NamedTuple\n\n")),(0,r.kt)("h4",{id:"12-define-simulation-function"},"1.2 Define Simulation Function"),(0,r.kt)("div",{class:"text-justify"},"To facilitate parameter changes, we can define function to encapsulate the entire simulation project."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'def simulation(*, run_mode, wavelength=1.54, global_mesh_grid=0.02, local_mesh_grid=0.01, number_of_modes=10, run_options: "RunOptions", **kwargs):\n')),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"run_mode")," variable parameter is used to define the location of the simulation run.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"wavelength")," variable is defined as wavelength of the optical source.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"grid")," variable is defined as grid size.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"number_of_modes")," variable is used to define the number of modes of calculation.")),(0,r.kt)("h4",{id:"13-define-parameters"},"1.3 Define Parameters"),(0,r.kt)("p",null,"Before starting the simulation, we can define parameters to facilitate modeling and parameterization sweep. The defined parameters are as follows."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 0. General Parameters ---\ncell_number = 72\nwavelength_start = 1.50\nwavelength_stop = 1.58\nwavelength_points = 3\n\npath = kwargs["path"]\nsimu_name = "EME_PSR"\ntime_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\nproject_name = f\'{simu_name}_{run_mode}_{time_str}\'\nplot_path = f\'{path}/plots/{project_name}/\'\ngds_file_root_path = os.path.abspath(os.path.join(path, \'..\'))\ngds_file = gds_file_root_path + "/examples_gds/PSR.gds"\n# endregion\n')),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"path")," variable is used to store the path of this Python file.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"simu_name")," variable is used to store simulation names.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"time_str")," variable is used to store the timestamp.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"project_name")," variable is used to store the project name.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"plot_path")," variable is used to store the result path.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"gds_file")," variable is used to store the file path of GDS.")),(0,r.kt)("h4",{id:"14-create-project"},"1.4 Create project"),(0,r.kt)("p",null,"You can create a new project using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Project")," function of Max's software development toolkit."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 1. Project ---\npj = mo.Project(name=project_name, location=run_mode,)\n# endregion\n")),(0,r.kt)("h4",{id:"15-add-material"},"1.5 Add Material"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null," Here we demonstrate using the ",(0,r.kt)("inlineCode",{parentName:"p"},"Material")," function to create material and using the ",(0,r.kt)("inlineCode",{parentName:"p"},"add_nondispersion")," function to add non dispersive materials, as well as using the ",(0,r.kt)("inlineCode",{parentName:"p"},"add_lib")," function to add materials from the material library. You can refer to the following script to set material.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 2. Material ---\nmt = pj.Material()\nmt.add_nondispersion(name="Si", data=[(3.454996, 0)], order=2)\nmt.add_nondispersion(name="SiO2", data=[(1.444991, 0)], order=2)\nmt.add_lib(name="Air", data=mo.Material.Air, order=2)\n# endregion\n')),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," is used to define the name of the added material.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"data")," is used to input the real and imaginary parts of the refractive index of the material.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"order")," is used to set the grid order of the material.")),(0,r.kt)("h4",{id:"16-add-structure"},"1.6 Add Structure"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"The structure is composed of silicon dioxide substrate, tapered silicon waveguide and polymer covered waveguide. We use ",(0,r.kt)("inlineCode",{parentName:"p"},"Structure")," to create structure , where ",(0,r.kt)("inlineCode",{parentName:"p"},"mesh_type")," is the type of mesh, ",(0,r.kt)("inlineCode",{parentName:"p"},"mesh_factor")," is the growth factor of the mesh, and ",(0,r.kt)("inlineCode",{parentName:"p"},"background_material")," is the background material of the structure. Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"add_geometry"),' function to add geometric structures and select "gds_file" in ',(0,r.kt)("inlineCode",{parentName:"p"},"type")," to establish the model by importing the GDS file. The properties of GDS modeling are shown in the table below.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 3. Structure ---\nst = pj.Structure(mesh_type="curve_mesh", mesh_factor=1.2, background_material=mt["Air"])\n\nst.add_geometry(name="box", type="gds_file",\n                property={"general": {"path": gds_file, "cell_name": "PSR", "layer_name": (1, 0)},\n                            "geometry": {"x": 0, "y": 0, "z": -2, "z_span": 4},\n                            "material": {"material": mt["SiO2"], "mesh_order": 2}})\nst.add_geometry(name="psr", type="gds_file",\n                property={"general": {"path": gds_file, "cell_name": "PSR", "layer_name": (2, 0)},\n                            "geometry": {"x": 0, "y": 0, "z": 0.11, "z_span": 0.22},\n                            "material": {"material": mt["Si"], "mesh_order": 2}})\n# endregion\n\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Key"),(0,r.kt)("th",{parentName:"tr",align:null},"Value"),(0,r.kt)("th",{parentName:"tr",align:null},"type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"sub"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"name the added geometry")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"gds_file"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"select the type of structure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"path"),(0,r.kt)("td",{parentName:"tr",align:null},"gds_file"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"file path of GDS file")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cell_name"),(0,r.kt)("td",{parentName:"tr",align:null},"SSC"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"name of the GDS cell")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"layer_name"),(0,r.kt)("td",{parentName:"tr",align:null},"(1,0)"),(0,r.kt)("td",{parentName:"tr",align:null},"list"),(0,r.kt)("td",{parentName:"tr",align:null},"name of the GDS layer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"x","\u2003","\u2003","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"0","\u2003","\u2003","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"float","\u2003","\u2003","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"center position in the x-direction of the geometric structure ","\xa0","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"y"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"center position in the y-direction of the geometric structure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"z"),(0,r.kt)("td",{parentName:"tr",align:null},"-1.5"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"center position in the z-direction of the geometric structure")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"z_span"),(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"length of the geometric structure in the z-direction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"material"),(0,r.kt)("td",{parentName:"tr",align:null},"mt",'["Si"]'),(0,r.kt)("td",{parentName:"tr",align:null},"material"),(0,r.kt)("td",{parentName:"tr",align:null},"select the material in Material")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mesh_order"),(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"set the priority of the mesh")))),(0,r.kt)("p",null,"Select simulation material by using ",(0,r.kt)("inlineCode",{parentName:"p"},"mesh_order")," in areas where geometry overlaps, the higher the number of ",(0,r.kt)("inlineCode",{parentName:"p"},"mesh_order"),", the higher the priority of the material."),(0,r.kt)("h4",{id:"17-set-boundary"},"1.7 Set Boundary"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"Set the boundary size of the simulation structure using optical boundary condition ",(0,r.kt)("inlineCode",{parentName:"p"},"OBoundary"),". The properties are shown below.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 4. Boundary ---\nst.OBoundary(property={"geometry": {"x": 6.05, "x_span": 73.1, "y": 1.256, "y_span": 8, "z": 0, "z_span": 6},\n                        "boundary": {"y_min": "PEC", "y_max": "PEC", "z_min": "PEC", "z_max": "PEC"},\n                        "general_pml": {"pml_same_settings":True,"pml_kappa": 1, "pml_sigma": 5, "pml_layer": 10, "pml_polynomial": 3}})\n# endregion\n')),(0,r.kt)("h4",{id:"18-add-sub-mesh"},"1.8 Add Sub Mesh"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"After light passes through tapered silicon waveguide gradually becoming smaller, the mode field is strongly limited to a very small range. Therefore, it is necessary to use ",(0,r.kt)("inlineCode",{parentName:"p"},"add_mesh")," to add a transverse grid to accurately calculate the limited light field. Add local mesh as shown below.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 5. Sub Mesh ---\nst.add_mesh(\n    name="sub_mesh",\n    property={"general": {"dy": local_mesh_grid, "dz": local_mesh_grid},\n                "geometry": {"x": 6.05, "x_span": 73.1, "y": 1.256, "y_span": 5, "z": 0.11, "z_span": 0.4}})\n# endregion\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"dx"),",",(0,r.kt)("inlineCode",{parentName:"p"},"dy"),",",(0,r.kt)("inlineCode",{parentName:"p"},"dz")," are the mesh sizes in the x, y, and z directions, respectively."),(0,r.kt)("h4",{id:"19-add-eme-port"},"1.9 Add EME port"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"port"),' function to create a port and use the "source_port" property to set the location of the source port. You can use the ',(0,r.kt)("inlineCode",{parentName:"p"},"add")," function to add ports and the properties of port are shown in the table below.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},' # region --- 6. Port ---\npjp = pj.Port(property={"source_port": "input_te_tm"})\n\n# region --- input_te_tm ---\npjp.add(name="input_te_tm", type="eme_port",\n        property={"geometry": {"port_location": "left", "use_full_simulation_span": True, "y": 1.256, "y_span": 8, "z": 0, "z_span": 6},\n                    "eme_port": {"general": {"mode_selection": "fundamental_TE_and_TM", "mode_index": 1},\n                                "advanced": {"offset": 0.1, "number_of_trial_modes": number_of_modes}}})\n# endregion\n\n# region --- output_up_te_tm ---\npjp.add(name="output_up_te_tm", type="eme_port",\n        property={\n            "geometry": {"port_location": "right", "use_full_simulation_span": False, "y": 2.6785, "y_span": 2, "z": 0.11, "z_span": 2},\n            "eme_port": {"general": {"mode_selection": "fundamental_TE_and_TM", "mode_index": 1},\n                            "advanced": {"offset": 0, "number_of_trial_modes": number_of_modes}}})\n# endregion\n\n# region --- output_down_te_tm ---\npjp.add(name="output_down_te_tm", type="eme_port",\n        property={"geometry": {"port_location": "right", "use_full_simulation_span": False, "y": 0, "y_span": 2, "z": 0.11, "z_span": 2},\n                    "eme_port": {"general": {"mode_selection": "fundamental_TE_and_TM", "mode_index": 1, "search": "max_index"},\n                                "advanced": {"offset": 0, "number_of_trial_modes": number_of_modes}}})\n# endregion\n# endregion\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"key"),(0,r.kt)("th",{parentName:"tr",align:null},"value"),(0,r.kt)("th",{parentName:"tr",align:null},"type"),(0,r.kt)("th",{parentName:"tr",align:null},"description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"left_port"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"the name of port")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"eme_port"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"select type of port")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"port_location"),(0,r.kt)("td",{parentName:"tr",align:null},"left"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"select the location of the port")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"y"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"center position of port width")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"y_span"),(0,r.kt)("td",{parentName:"tr",align:null},"5.5"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"port width")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"y"),(0,r.kt)("td",{parentName:"tr",align:null},"0.5"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"center position of port height")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"z_span"),(0,r.kt)("td",{parentName:"tr",align:null},"7"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"port height")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mode_selection"),(0,r.kt)("td",{parentName:"tr",align:null},"fundamental_TE"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"select the mode of port")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"number_of_trial_modes","\u2003","\u2003","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"15","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"string","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"set the mode of port ","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003")))),(0,r.kt)("h4",{id:"110-add-monitor"},"1.10 Add Monitor"),(0,r.kt)("p",null,"In the simulation, ",(0,r.kt)("inlineCode",{parentName:"p"},"Monitor"),"function is used to create monitor and ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," function is used to add a monitor. Select profile_monitor ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," monitor from the added monitors to view the mode field distribution."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 7. Monitor ---\nmn = pj.Monitor()\nmn.add(name="z_normal", type="profile_monitor",\n        property={"geometry": {"monitor_type": "2d_z_normal", "x_resolution": 100,\n                                "x": 6.05, "x_span": 73.1, "y": 1.256, "y_span": 8, "z": 0.11, "z_span": 0}})\nfor i, pos in enumerate([-29.5, 17.5, 23.5, 34.5, 39.5]):\n    mn.add(name="section"+str(i+1), type="profile_monitor",\n            property={"geometry": {"monitor_type": "2d_x_normal", "x_resolution": 100,\n                                    "x": pos, "x_span": 0, "y": 1.256, "y_span": 8, "z": 0, "z_span": 6}})\n# endregion\n')),(0,r.kt)("h4",{id:"111-add-eme-solver"},"1.11 Add EME solver"),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"We use the ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulation")," function to create a simulation and the ",(0,r.kt)("inlineCode",{parentName:"p"},"add")," function to add a solver. Select the EME solver in the type, and the properties of the solver are shown in the table below.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 8. Simulation ---\nsimu = pj.Simulation()\nsimu.add(name=simu_name, type="EME",\n            property={"general": {"wavelength": wavelength, "use_wavelength_sweep": True},\n                    "eme_setup": {\n                        "cell_geometry": {\n                            "energy_conservation": "make_passive",  # ["none","make_passive"]\n                            "cell_group_definition": [\n                                {"span": 1, "cell_number": 1, "number_of_modes": number_of_modes, "sc": "none"},\n                                {"span": 6, "cell_number": 6, "number_of_modes": number_of_modes, "sc": "sub_cell"},\n                                {"span": 30, "cell_number": 6, "number_of_modes": number_of_modes, "sc": "sub_cell"},\n                                {"span": 12, "cell_number": 6, "number_of_modes": number_of_modes, "sc": "sub_cell"},\n                                {"span": 8.9, "cell_number": 1, "number_of_modes": number_of_modes, "sc": "none"},\n                                {"span": 5, "cell_number": 10, "number_of_modes": number_of_modes, "sc": "sub_cell"},\n                                {"span": 5.2, "cell_number": 1, "number_of_modes": number_of_modes, "sc": "none"},\n                                {"span": 5, "cell_number": 1, "number_of_modes": number_of_modes, "sc": "none"}]}},\n                    "transverse_mesh_setting": {"global_mesh_uniform_grid": {"dy": global_mesh_grid, "dz": global_mesh_grid}},\n                    "eme_analysis": {\n                        "eme_propagate": run_options.run,\n                        "wavelength_sweep": {\n                            "wavelength_sweep": run_options.run_wavelength_sweep,\n                            "start": wavelength_start, "stop": wavelength_stop, "number_of_wavelength_points": wavelength_points},\n                        "select_source": {"phase": 0, "select_mode": "TE"}}})\n# endregion\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"key"),(0,r.kt)("th",{parentName:"tr",align:null},"value"),(0,r.kt)("th",{parentName:"tr",align:null},"type"),(0,r.kt)("th",{parentName:"tr",align:null},"description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"simu_name","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"string","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"name of simulation","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"EME"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"select the type of solver")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"wavelength"),(0,r.kt)("td",{parentName:"tr",align:null},"1.5"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"wavelength of mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"use_wavelength_sweep"),(0,r.kt)("td",{parentName:"tr",align:null},"True"),(0,r.kt)("td",{parentName:"tr",align:null},"bool"),(0,r.kt)("td",{parentName:"tr",align:null},"select to enable wavelength sweep")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"span"),(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"the span of cell group")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cell_number"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"number of cell in the cell group")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"number_of_modes"),(0,r.kt)("td",{parentName:"tr",align:null},"15"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"Calculate the number of modes per cell")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sc"),(0,r.kt)("td",{parentName:"tr",align:null},"none"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"select to enable subcell method")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dy"),(0,r.kt)("td",{parentName:"tr",align:null},"0.05"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"horizontal mesh of cross-section")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dz"),(0,r.kt)("td",{parentName:"tr",align:null},"0.05"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"Longitudinal mesh of cross-section")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eme _propagate"),(0,r.kt)("td",{parentName:"tr",align:null},"True"),(0,r.kt)("td",{parentName:"tr",align:null},"bool"),(0,r.kt)("td",{parentName:"tr",align:null},"select to enable EME propagation")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"propagation_sweep ","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"True"),(0,r.kt)("td",{parentName:"tr",align:null},"bool"),(0,r.kt)("td",{parentName:"tr",align:null},"select to enable length sweep")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"parameter"),(0,r.kt)("td",{parentName:"tr",align:null},"grop_span_3"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"the area of length sweep")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"start"),(0,r.kt)("td",{parentName:"tr",align:null},"50"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"starting length of sweep")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"stop"),(0,r.kt)("td",{parentName:"tr",align:null},"250"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"stoping length of sweep")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"number_of_points"),(0,r.kt)("td",{parentName:"tr",align:null},"50"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"number of sweep lengths")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"phase"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"the initial phase of optical source")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"select_mode"),(0,r.kt)("td",{parentName:"tr",align:null},"TE"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"mode of optical source")))),(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"According to different structures and materials, the SSC is divided into four cell groups using ",(0,r.kt)("inlineCode",{parentName:"p"},"cell_group_definition"),". Set the length of the cell group in ",(0,r.kt)("inlineCode",{parentName:"p"},"span"),", use ",(0,r.kt)("inlineCode",{parentName:"p"},"cell_number")," to set the number of cell. The divided cell structure is shown in the following figure. Use ",(0,r.kt)("inlineCode",{parentName:"p"},"number_of_modes")," to set the number of modes calculated at the interface of adjacent units, and it is necessary to set a sufficient number of modes to obtain the correct results."),(0,r.kt)("p",null,"The area where the structure has not changed, the number of ",(0,r.kt)("inlineCode",{parentName:"p"},"cell_number")," is set to 1, and ",(0,r.kt)("inlineCode",{parentName:"p"},"sc"),' is set to "none". In the area of structural changes, multiple cell number need to be used to characterize the structure and the "sub_cell" method is used to reduce the staircase effect caused by discrete changes in the cross-section.')),(0,r.kt)("h4",{id:"112-view-structure"},"1.12 View Structure"),(0,r.kt)("p",null,"You can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"structure_show")," function to view the top view of the structure, or use the ",(0,r.kt)("inlineCode",{parentName:"p"},"simu[simu_name].show3d()")," call gui to view the structure."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 9. Structure Show ---\nst.structure_show(fig_type="png", savepath=plot_path + simu_name, simulation_name=simu_name, celldisplay=True, xyratio=(1, 5), disabled_components=("box.coordinate",), show=False)\n#simu[simu_name].show3d()\n# endregion\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"celldisplay")," control whether to display the boundaries of the divided cells.",(0,r.kt)("br",null),"The ",(0,r.kt)("inlineCode",{parentName:"p"},"xyration")," controls the aspect ratio of the image."),(0,r.kt)("h4",{id:"113-calculate-mode"},"1.13 Calculate Mode"),(0,r.kt)("p",null,"You can create a new simulation using ",(0,r.kt)("inlineCode",{parentName:"p"},"simu.add")," function and run the simulation using ",(0,r.kt)("inlineCode",{parentName:"p"},"simu.add")," function. The ",(0,r.kt)("inlineCode",{parentName:"p"},"type"),' of simulation needs to be selected as "mode_selection:user_select", and its properties are shown in the table below. Before running EME simulation calculations, we can calculate the mode field distribution of the port by setting the type of mode selection to True and other simulations to False.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 10. Calculate Mode ---\nif run_options.calculate_modes:\n    for port in ["input_te_tm", "output_up_te_tm", "output_down_te_tm"]:\n        simu.add(name=simu_name+"_"+port+"_cal_mode", simulation_name=simu_name, source_name=port, type="mode_selection:user_select",\n                    property={"modal_analysis": {"calculate_modes": True, "mesh_structure": True,\n                                                "wavelength": wavelength, "number_of_trial_modes": number_of_modes, "calculate_group_index": True}})\n        port_res = simu[simu_name+"_"+port+"_cal_mode"].run()\n        for m in range(number_of_modes):\n            port_res.extract(data="calculate_modes", savepath=plot_path + "00_modeprofile_fdeonly_" + port + "_mode#" + str(m),\n                                mode=m, attribute="E", export_csv=False)\n# endregion\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"key"),(0,r.kt)("th",{parentName:"tr",align:null},"Value"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mesh_structure"),(0,r.kt)("td",{parentName:"tr",align:null},"True"),(0,r.kt)("td",{parentName:"tr",align:null},"bool"),(0,r.kt)("td",{parentName:"tr",align:null},"select to view the refractive index distribution of the port")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"calculate_modes ","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"True ","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"bool ","\u2003","\u2003"),(0,r.kt)("td",{parentName:"tr",align:null},"select to calculate the mode of cross-section","\xa0","\u2003","\u2003","\u2003","\u2003","\u2003","\u2003")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Wavelength"),(0,r.kt)("td",{parentName:"tr",align:null},"wavelength"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"calculate the wavelength of the mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"number_of_trial_modes"),(0,r.kt)("td",{parentName:"tr",align:null},"number_of_modes"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"number of calculation modes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"search"),(0,r.kt)("td",{parentName:"tr",align:null},'"max_index"'),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"method of calculating mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"calculate_group_index"),(0,r.kt)("td",{parentName:"tr",align:null},"True"),(0,r.kt)("td",{parentName:"tr",align:null},"bool"),(0,r.kt)("td",{parentName:"tr",align:null},"select to calculate group refractive index")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bent_waveguide"),(0,r.kt)("td",{parentName:"tr",align:null},"False"),(0,r.kt)("td",{parentName:"tr",align:null},"bool"),(0,r.kt)("td",{parentName:"tr",align:null},"select to enable bent waveguide in calculation mode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"radius"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"set the radius of the bent waveguide")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"orientation"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"float"),(0,r.kt)("td",{parentName:"tr",align:null},"set the bending direction of the waveguide")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"location"),(0,r.kt)("td",{parentName:"tr",align:null},'"simulation_center"'),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"set the position of the bent waveguide")))),(0,r.kt)("h4",{id:"114-run"},"1.14 Run"),(0,r.kt)("p",null,"Pass in the name of the simulation and use ",(0,r.kt)("inlineCode",{parentName:"p"},"simu[simu_name].run")," function to run the simulation."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 11. Run ---\neme_res = simu[simu_name].run()\n# endregion\n")),(0,r.kt)("h4",{id:"115-run-and-extract-results"},"1.15 Run and Extract Results"),(0,r.kt)("div",{class:"text-justify"}),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 12. See Results --\nif run_options.extract:\n    # region --- 12.1 EME Results --\n    if run_options.run:\n        # region --- facet data ---\n        eme_res.extract(data=\'eme_propagate:facet_data\', savepath=plot_path, real=True, imag=True, export_csv=True)\n        # endregion\n\n        # region --- smatrix_intensity ---\n        eme_res.extract(data="eme_propagate:smatrix", savepath=plot_path + "011_eme_smatrix_intensity",\n                        target="intensity", export_csv=True)\n        # endregion\n\n        # region --- monitor ---\n        eme_res.extract(data="eme_propagate:monitor", savepath=plot_path + "013_eme_z_normal",\n                        monitor_name="z_normal", attribute="E", export_csv=True)\n\n        for i in range(5):\n            eme_res.extract(data="eme_propagate:monitor", savepath=plot_path + "013_eme_section"+str(i+1),\n                            monitor_name="section"+str(i+1), attribute="E", export_csv=True)\n        # endregion\n    # endregion\n\n    # region --- 12.2 EME Wavelength Sweep Results ---\n    if run_options.run_wavelength_sweep:\n        """ 20_wavelength_sweep """\n        eme_res.extract(data="wavelength_sweep:sweep", savepath=plot_path + "20_wavelength_sweep",\n                        plot_x="wavelength", export_csv=True)\n    # endregion\n    # endregion\n')),(0,r.kt)("h4",{id:"116-control-switch"},"1.16 Control Switch"),(0,r.kt)("p",null,"We can control the operation of the simulation by passing in bool values through tuple, as shown in the following code."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'class RunOptions(NamedTuple):\n    calculate_modes: bool\n    run: bool\n    run_wavelength_sweep: bool\n    extract: bool\n\nif __name__ == "__main__":\n    simulation(run_mode="local", wavelength=1.50, global_mesh_grid=0.05, local_mesh_grid=0.03, number_of_modes=15,\n               run_options=RunOptions(calculate_modes=True, run=True, run_wavelength_sweep=True, extract=True))\n')),(0,r.kt)("h3",{id:"2-output-results"},"2 Output Results"),(0,r.kt)("h4",{id:"21-modeprofile"},"2.1 ModeProfile"),(0,r.kt)("h4",{id:"22-eme-propagation"},"2.2 EME Propagation"),(0,r.kt)("div",{class:"text-justify"}),(0,r.kt)("h2",{id:"analysis-and-discuss"},"Analysis and Discuss"),(0,r.kt)("p",null,"\u5176\u4e2d\u4e00\u4e2a\u6a21\u5f0f\u5728\u7279\u5b9a\u6ce2\u5bfc\u622a\u9762\u7684\u5bbd\u5ea6\u65f6\uff0c\u6ee1\u8db3\u6a21\u5f0f\u5339\u914d\u6761\u4ef6\u7684\u504f\u632f\u5149\u8026\u5408\u8fdb\u5165\u9644\u8fd1\u7684\u6ce2\u5bfc\u4e2d\uff0c\u53e6\u4e00\u4e2a\u504f\u632f\u6a21\u5f0f\u7684\u5149\u5219\u4e0d\u6ee1\u8db3\u6a21\u5f0f\u5339\u914d\u6761\u4ef6\u7ee7\u7eed\u6cbf\u7740\u6ce2\u5bfc\u4f20\u8f93\u3002"),(0,r.kt)("h2",{id:"references"},"References"))}u.isMDXComponent=!0}}]);