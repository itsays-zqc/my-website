"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6051],{84981:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));n(87617);const r={},o="Y branch",s={unversionedId:"examples/PIC/ybranch/ybranch",id:"examples/PIC/ybranch/ybranch",title:"Y branch",description:"Introduction",source:"@site/docs/examples/PIC/ybranch/ybranch.md",sourceDirName:"examples/PIC/ybranch",slug:"/examples/PIC/ybranch/",permalink:"/my-website/docs/examples/PIC/ybranch/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/PIC/ybranch/ybranch.md",tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"Spot size converter",permalink:"/my-website/docs/examples/PIC/ssc/"},next:{title:"Grating",permalink:"/my-website/docs/category/grating"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Simulation Methods",id:"simulation-methods",level:2},{value:"Y branch(FDTD module)",id:"y-branchfdtd-module",level:2},{value:"1.Basic Options",id:"1basic-options",level:3},{value:"1.1 Import File",id:"11-import-file",level:4},{value:"1.2 SDK Initialization",id:"12-sdk-initialization",level:4},{value:"2.Code Description",id:"2code-description",level:3},{value:"2.1 import Modules",id:"21-import-modules",level:4},{value:"2.2 Define Simulation",id:"22-define-simulation",level:4},{value:"2.3 Define Parameters",id:"23-define-parameters",level:4},{value:"2.4 Creat Project",id:"24-creat-project",level:4},{value:"2.5 Define Materials",id:"25-define-materials",level:4},{value:"2.6 Waveform",id:"26-waveform",level:4},{value:"2.7 Create Model",id:"27-create-model",level:4},{value:"2.8 Boundary",id:"28-boundary",level:4},{value:"2.9 Add Sub-mesh",id:"29-add-sub-mesh",level:4},{value:"2.10 Source",id:"210-source",level:4},{value:"2.11 Monitor",id:"211-monitor",level:4},{value:"2.12 FDTD Simulation",id:"212-fdtd-simulation",level:4},{value:"2.13 Schematic of Structure",id:"213-schematic-of-structure",level:4},{value:"2.14 Run",id:"214-run",level:4},{value:"2.15 Run Simulation",id:"215-run-simulation",level:4},{value:"2.16 Switches",id:"216-switches",level:4},{value:"3.Output Results",id:"3output-results",level:3}],m={toc:p},d="wrapper";function u(e){let{components:t,...r}=e;return(0,i.kt)(d,(0,a.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"y-branch"},"Y branch"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The Y branch is a fundamental component of integrated optics. Its primary function is to split the incoming light from a single input waveguide into two separate waveguides (splitter). Likewise, it can also combine light from two waveguides into a single waveguide (combiner). "),(0,i.kt)("p",null,"The main performance parameters of the Y branch include ",(0,i.kt)("strong",{parentName:"p"},"insertion loss"),", ",(0,i.kt)("strong",{parentName:"p"},"device dimensions"),", and ",(0,i.kt)("strong",{parentName:"p"},"operating bandwidth"),"."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},(0,i.kt)("img",{src:n(82460).Z,width:"713",height:"580"})),(0,i.kt)("th",{parentName:"tr",align:"center"},(0,i.kt)("img",{src:n(67369).Z,width:"729",height:"537"}))))),(0,i.kt)("h2",{id:"simulation-methods"},"Simulation Methods"),(0,i.kt)("p",null,"Through the FDTD module or EME module, the Y branch's structure can be optimized to obtain the transmittance of fundamental mode or S-parameters of each output port. This allows the verification of the optimized results for the multi-mode interferometer.This optimization process aims to improve the Y branch's insertion loss and bandwidth performance. "),(0,i.kt)("h2",{id:"y-branchfdtd-module"},"Y branch(FDTD module)"),(0,i.kt)("h3",{id:"1basic-options"},"1.Basic Options"),(0,i.kt)("h4",{id:"11-import-file"},"1.1 Import File"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Once you have installed and configured the environment, import the python code and the GDS layout.",(0,i.kt)("br",null),"The example library and related model code are usually located in the directory : ",(0,i.kt)("inlineCode",{parentName:"p"},".venv_maxoptics/site-packages/maxoptics_sdk/examples"),".",(0,i.kt)("br",null),"The GDS file is generally imported into the path : ",(0,i.kt)("inlineCode",{parentName:"p"},".venv_maxoptics/site-packages/maxoptics_sdk/examples/examples_gds"))),(0,i.kt)("h4",{id:"12-sdk-initialization"},"1.2 SDK Initialization"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Create a new terminal and run the code after you import the python script and GDS file. Max-Optics SDK may take some time to initialize on the first simulation.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"Version of Max-Optics sdk is 2.3.0.4.630.2000\nMax-Optics SDK is initializing...\n")),(0,i.kt)("h3",{id:"2code-description"},"2.Code Description"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Now let's learn the meaning of functions and parameters that correspond to the code.")),(0,i.kt)("h4",{id:"21-import-modules"},"2.1 import Modules"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"To begin, we need to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"import")," command to call the relevant functional modules. For instance, we import the  ",(0,i.kt)("inlineCode",{parentName:"p"},"typing")," ,  ",(0,i.kt)("inlineCode",{parentName:"p"},"os")," and  ",(0,i.kt)("inlineCode",{parentName:"p"},"time")," module in python. At the same time ,we import the customized module ",(0,i.kt)("inlineCode",{parentName:"p"},"maxoptics_sdk.all "),"and ",(0,i.kt)("inlineCode",{parentName:"p"},"maxoptics_sdk.helper"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"import maxoptics_sdk.all as mo\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nfrom typing import NamedTuple\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"maxoptics_sdk")," package provides all in one optical simulation with Python.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"os")," module provides a way to use operating system-dependent functionality such as reading or writing to the file system, working with environment variables, and executing system commands.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"time")," module provides various functions to work with time-related operations and to measure time intervals.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"typing")," module provides support for type hints and annotations, which are used to indicate the expected types of variables, function arguments, and return values in your code.")),(0,i.kt)("h4",{id:"22-define-simulation"},"2.2 Define Simulation"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Firstly, We define parameters and give them a default value, such as the simulation wavelength and number of modes. Note that we can override this value in the following code. ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"def simulation(*, run_mode='local', wavelength=1.575, grids_per_lambda=25, run_options: 'RunOptions', **kwargs):\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The provided code contains comments that define the simulation parameters. Let's explain each of these parameters. ",(0,i.kt)("br",null),"The function ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation")," is used to define the simulation parameters for the program. ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"run_mode")," parameter determines the type of calculation resources to be used. ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"wavelength")," parameter specifies the wavelength of the input light in micrometers. ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"grids_per_lambda")," parameter sets the simulation mesh grid.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"**kwargs")," is a special syntax used in function definitions to accept an arbitrary number of keyword arguments as a dictionary. ")),(0,i.kt)("h4",{id:"23-define-parameters"},"2.3 Define Parameters"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Define commonly used parameters in region 0, such as the mesh grid of the simulation boundary, the start time of the simulation, the path and name for the simulation output, the path to the imported GDS layout, and other parameters required for structural parameterized modeling."),(0,i.kt)("p",null,"If you need to calculate the bandwith of the device in the EME simulation, you can also decide the wavelength for sweeping in this section.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 0. General Parameters ---\n\nwaveform_name = f'wv{wavelength * 1e3}'\npath = kwargs['path']\nsimu_name = 'FDTD_y_branch'\ntime_str = time.strftime('%Y%m%d_%H%M%S', time.localtime())\nproject_name = f'{simu_name}_{run_mode}_{time_str}'\nplot_path = f'{path}/plots/{project_name}/'\ngds_file_root_path = os.path.abspath(os.path.join(path, '..'))\ngds_file = gds_file_root_path + '/examples_gds/splitter1.gds'\n\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The code defines several parameters and variables necessary for the simulation process. The ",(0,i.kt)("inlineCode",{parentName:"p"},"waveform_name")," parameter is the name of waveform. ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"path")," variable defines the file path for the simulation, while ",(0,i.kt)("inlineCode",{parentName:"p"},"simu_name")," specifies the name of the simulation file.",(0,i.kt)("br",null)," The ",(0,i.kt)("inlineCode",{parentName:"p"},"time_str")," variable is used to obtain the current time as a timestamp for the simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"project_name")," variable assigns a name to the project for the simulation output. ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"plot_path")," variable determines the directory where the simulation result plots will be saved.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"gds_file_root_path")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"gds_file")," variable defines the path for importing the GDS layout.")),(0,i.kt)("h4",{id:"24-creat-project"},"2.4 Creat Project"),(0,i.kt)("p",null,"You can create a new project using the Project function of Max's software development toolkit in region 1."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 1. Project ---\npj = mo.Project(name=project_name, location=run_mode)\n# endregion\n")),(0,i.kt)("h4",{id:"25-define-materials"},"2.5 Define Materials"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Let's proceed to the next step, where we set up the materials required for the simulation in region 2. In this case, we will directly use relevant materials from the MO  material library.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 2. Material ---\nmt = pj.Material()\nmt.add_lib(name='Si', data=mo.Material.Si_Palik, order=2)\nmt.add_lib(name='SiO2', data=mo.Material.SiO2_Palik, order=2)\nmt.add_lib(name='Air', data=mo.Material.Air, order=2)\n# endregion\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"add_lib")," contains three parameters ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),",",(0,i.kt)("inlineCode",{parentName:"p"},"data")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"order"),". ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," calls up the property of simulation materials in the MO material library. ",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Order")," parameter determines the mesh order for the material during the simulation. ",(0,i.kt)("br",null),"As the same, we also support users to customize the material with ",(0,i.kt)("inlineCode",{parentName:"p"},"add_nondispersion"),"function. "),(0,i.kt)("p",null,"Detailed explaination about material : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/1Material"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/1Material")),(0,i.kt)("h4",{id:"26-waveform"},"2.6 Waveform"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"In this section, we will define the property of wave.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 3. Waveform ---\nwv = pj.Waveform()\nwv.add(name=waveform_name, wavelength_center=wavelength, wavelength_span=0.15)\nwv_struct = wv[waveform_name]\n# endregion\n")),(0,i.kt)("p",null,"Detailed explaination about waveform: ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/4Source#41-waveform"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/4Source#41-waveform")),(0,i.kt)("h4",{id:"27-create-model"},"2.7 Create Model"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Next, we will create the structure of Y branch.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 4. Structure ---\nst = pj.Structure(mesh_type='curve_mesh', mesh_factor=1.2, background_material=mt['SiO2'])\n\nst.add_geometry(name='in', type='Rectangle',\n                property={'geometry': {'x': -1.5, 'x_span': 1, 'y': 0, 'y_span': 0.5, 'z': 0, 'z_span': 0.22},\n                            'material': {'material': mt['Si'], 'mesh_order': 2}})\nst.add_geometry(name=\"gds_file\", type=\"gds_file\", property={\n    \"material\": {\"material\": mt[\"Si\"], \"mesh_order\": 2},\n    \"geometry\": {\"x\": 1, \"y\": 0, \"z\": 0, \"z_span\": 0.22},\n    \"general\": {\"path\": gds_file, \"cell_name\": \"splitter1\", \"layer_name\": (0, 0)}})\nst.add_geometry(name='out_up', type='Rectangle',\n                property={'geometry': {'x': 3.1, 'x_span': 0.2, 'y': 0.35, 'y_span': 0.5, 'z': 0, 'z_span': 0.22},\n                            'material': {'material': mt['Si'], 'mesh_order': 2}})\nst.add_geometry(name='out_down', type='Rectangle',\n                property={'geometry': {'x': 3.1, 'x_span': 0.2, 'y': -0.35, 'y_span': 0.5, 'z': 0, 'z_span': 0.22},\n                            'material': {'material': mt['Si'], 'mesh_order': 2}})\nst.add_geometry(name=\"waveguide_up\", type=\"BezierCurve\", property={\n\"material\": {\"material\": mt[\"Si\"], \"mesh_order\": 2},\n\"geometry\": {\"x\": 0, \"y\": 0, \"z\": 0, \"z_span\": 0.22, \"width\": 0.5,\n                \"rotate_x\": 0, \"rotate_y\": 0, \"rotate_z\": 0,\n                \"point_1_x\": 3.2, \"point_1_y\": 0.35, \"point_2_x\": 4, \"point_2_y\": 0.35,\n                \"point_3_x\": 4, \"point_3_y\": 0.85, \"point_4_x\": 5.2, \"point_4_y\": 0.85}})\nst.add_geometry(name=\"waveguide_down\", type=\"BezierCurve\", property={\n\"material\": {\"material\": mt[\"Si\"], \"mesh_order\": 2},\n\"geometry\": {\"x\": 0, \"y\": 0, \"z\": 0, \"z_span\": 0.22, \"width\": 0.5,\n                \"rotate_x\": 0, \"rotate_y\": 0, \"rotate_z\": 0,\n                \"point_1_x\": 3.2, \"point_1_y\": -0.35, \"point_2_x\": 4, \"point_2_y\": -0.35,\n                \"point_3_x\": 4, \"point_3_y\": -0.85, \"point_4_x\": 5.2, \"point_4_y\": -0.85}})\nst.add_geometry(name='wg_up', type='Rectangle',\n                property={'geometry': {'x': 5.4, 'x_span': 0.8, 'y': 0.85, 'y_span': 0.5, 'z': 0, 'z_span': 0.22},\n                            'material': {'material': mt['Si'], 'mesh_order': 2}})\nst.add_geometry(name='wg_down', type='Rectangle',\n                property={'geometry': {'x': 5.4, 'x_span': 0.8, 'y': -0.85, 'y_span': 0.5, 'z': 0, 'z_span': 0.22},\n                            'material': {'material': mt['Si'], 'mesh_order': 2}})\n\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"We import the core of Y branch from the GDS file when other part is created by MO ",(0,i.kt)("inlineCode",{parentName:"p"},"add_geometry")," function.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," parameter defines the structure name.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter specifies the structure type.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"path"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"cell_name"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"layer_name")," parameters point to the GDS file and specify the relevant layers and cell names used in the layout.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"geometry"),"\xa0parameter\xa0sets\xa0the\xa0structure's\xa0coordinates. ",(0,i.kt)("br",null),"The\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"material"),"\xa0parameter\xa0specifies\xa0the\xa0material\xa0properties ",(0,i.kt)("br",null),"The\xa0",(0,i.kt)("inlineCode",{parentName:"p"},"mesh_order"),"\xa0parameter\xa0sets\xa0the\xa0mesh\xa0order\xa0for\xa0the\xa0simulation. "),(0,i.kt)("p",null,"Detailed explaination about structure : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/2Structure"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/2Structure"))),(0,i.kt)("h4",{id:"28-boundary"},"2.8 Boundary"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"After establishing the model, we can add the simulation region in region 5 and define the simulation boundary conditions. This involves specifying the geometry of the simulation region, the boundary conditions in the xyz directions, and the other detailed parameters.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 5. Boundary ---\nst.OBoundary(property={'geometry': {'x': 2, 'x_span': 7, 'y': 0, 'y_span': 3, 'z': 0, 'z_span': 3},\n                           'boundary': {'x_min': 'PML', 'x_max': 'PML', 'y_min': 'anti_symmetric', 'y_max': 'PML', 'z_min': 'PML',\n                                        'z_max': 'PML'},\n                           'general_pml': {'pml_same_settings': True, 'pml_layer': 6, 'pml_kappa': 2, 'pml_sigma': 0.8,\n                                           'pml_polynomial': 3, 'pml_alpha': 0, 'pml_alpha_polynomial': 1}})\n\n# endregion\n")),(0,i.kt)("p",null,"Detailed explaination about boundary : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/3Boundary"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/3Boundary")),(0,i.kt)("h4",{id:"29-add-sub-mesh"},"2.9 Add Sub-mesh"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"To achieve more accurate calculations of the model's modal fields, we can add a sub-mesh in region 6.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 6. Sub Mesh ---\nst.add_mesh(\n    name='sub_mesh',\n    property={'general': {'dx': 0.025, 'dy': 0.025, 'dz': 0.1},\n                'geometry': {'x': 2, 'x_span': 4, 'y': 0, 'y_span': 1.6, 'z': 0, 'z_span': 0.22}})\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"In this code segment, we use the ",(0,i.kt)("inlineCode",{parentName:"p"},"add_mesh")," function to add a sub-mesh in region 6.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," parameter defines the name of the mesh.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"general")," parameter specifies the grid accuracy in the xyz directions .",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"geometry")," parameter sets the coordinates of the sub-mesh."),(0,i.kt)("p",null,"Detailed explaination about mesh : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/3Boundary#32-mesh"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/3Boundary#32-mesh"))),(0,i.kt)("h4",{id:"210-source"},"2.10 Source"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Then we need to establish the light source in the input waveguide, as shown in Region 7.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 7. ModeSource ---\nsrc = pj.Source()\nsrc.add(name='source', type='mode_source', axis='x_forward',\n            property={'general': {'mode_selection': 'fundamental', 'waveform': {'waveform_id_select': wv_struct}},\n                      'geometry': {'x': -1.2, 'x_span': 0, 'y': 0, 'y_span': 1, 'z': 0, 'z_span': 1}})\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Source")," function is utilized to retrieve the source manager for the current project.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter specifies the type of the source and is formatted as either ",(0,i.kt)("inlineCode",{parentName:"p"},'["mode_source"] or ["gaussian_source"]'),".",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," parameter represents the name assigned to the source.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"axis")," parameter defines the axis of the source.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"property")," parameter allows for defining specific properties associated with the source."),(0,i.kt)("p",null,"Detailed explaination about mode source : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/4Source#42-mode-source"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/4Source#42-mode-source"))),(0,i.kt)("h4",{id:"211-monitor"},"2.11 Monitor"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"In Region 8, we set up the monitors. ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 8. Monitor ---\nmn = pj.Monitor()\nmn.add(name='Global Option', type='global_option',\n        property={'frequency_power': {  # 'sample_spacing': 'uniform', 'use_wavelength_spacing': True,\n            # ['min_max','center_span']\n            'spacing_type': 'wavelength', 'spacing_limit': 'center_span',\n            'wavelength_center': wavelength, 'wavelength_span': 0.15, 'frequency_points': 100}})\nmn.add(name='monitor_in', type='power_monitor',\n        property={'general': {\n            'frequency_profile': {'wavelength_center': wavelength, 'wavelength_span': 0.15, 'frequency_points': 100},},\n            'geometry': {'monitor_type': '2d_x_normal',\n                        'x': -1.19, 'x_span': 0, 'y': 0, 'y_span': 1.2, 'z': 0, 'z_span': 1.2}})\nmn.add(name='monitor_out', type='power_monitor',\n        property={'general': {\n            'frequency_profile': {'wavelength_center': wavelength, 'wavelength_span': 0.15,'frequency_points': 200},},\n            'geometry': {'monitor_type': '2d_x_normal',\n                        'x': 5.4, 'x_span': 0, 'y': 0.85, 'y_span': 1.2, 'z': 0, 'z_span': 1.2}})     \nmn.add(name='filed_power', type='power_monitor',\n        property={'general': {\n            'frequency_profile': {'wavelength_center': wavelength, 'wavelength_span': 0.15,\n                                    'frequency_points': 100}, },\n            'geometry': {'monitor_type': '2d_z_normal',\n                        'x': 2, 'x_span': 7, 'y': 0, 'y_span': 3, 'z': 0.01, 'z_span': 0}})\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"For the global monitor, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Monitor")," function is utilized to retrieve the monitor manager for the current project, which allows users to access and manage various types of monitors used during simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," parameter represents the name of the Global Option associated with the monitor.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter defines the type of the Global Option and is formatted as a list containing one of several monitor types. The ",(0,i.kt)("inlineCode",{parentName:"p"},"property")," parameter is used to define and set the relevant parameters specific to the chosen monitor type. These parameters control the monitor's behavior and data collection settings during the simulation."),(0,i.kt)("p",null,"The power monitor is a configuration setting that allows users to specify various simulation parameters.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," parameter assigns a name to the power monitor.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter defines the type of power monitor.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"general")," parameter pertains to settings related to the frequency domain and frequency-dependent behaviors of the simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"geometry")," parameter is used to define the geometric characteristics of the simulated structure.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"mode_expansion")," parameter involves relevant settings for mode expansion simulations. Users can customize the simulation settings by utilizing these input parameters to achieve accurate and comprehensive results based on their specific simulation requirements."),(0,i.kt)("p",null,"Detailed explaination about monitors : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/5Mornitor"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/5Mornitor"))),(0,i.kt)("h4",{id:"212-fdtd-simulation"},"2.12 FDTD Simulation"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"In\xa0Region\xa09,\xa0we\xa0add\xa0the\xa0FDTD\xa0simulation. ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 9. Simulation ---\nsimu = pj.Simulation()\nsimu.add(name=simu_name, type='FDTD',\n            property={'general': {'simulation_time': 1000, },\n                    'mesh_settings': {'mesh_type': 'auto_non_uniform',\n                                        'mesh_accuracy': {'cells_per_wavelength': grids_per_lambda},\n                                        'minimum_mesh_step_settings': {'min_mesh_step': 1e-4}},\n                    'advanced_options': {'auto_shutoff': {'auto_shutoff_min': 1.00e-5, 'down_sample_time': 200}},\n                    'thread_setting': {'thread': 8}\n                    })\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Simulation")," manager is critical for setting up and running simulations in the current project.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"name")," parameter allows users to assign a unique name to the simulation for identification purposes.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," parameter defines the type of the simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation_time")," parameter specifies the duration of the simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"mesh_settings")," parameter enables users to configure various settings related to the simulation mesh. The ",(0,i.kt)("inlineCode",{parentName:"p"},"mesh_accuracy")," parameter controls the precision of the mesh used in the simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"cells_per_wavelength")," parameter determines the wavelength precision used in the simulation.",(0,i.kt)("br",null),"The ",(0,i.kt)("inlineCode",{parentName:"p"},"minimum_mesh_step_settings")," parameter sets the minimum mesh step, allowing users to define the smallest allowable size for mesh elements.",(0,i.kt)("br",null),"Users can tailor the simulation setup to meet their requirements by utilizing these input parameters, enabling accurate and efficient electromagnetic simulations of complex optical structures."),(0,i.kt)("p",null,"Detailed explaination about FDTD simulation : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/6Simulation#63-fdtd"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/6Simulation#63-fdtd"))),(0,i.kt)("h4",{id:"213-schematic-of-structure"},"2.13 Schematic of Structure"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"As the same, we generate the device structure of the Directional Coupler in Region 10. ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 10. Structure Show ---\nst.structure_show(fig_type='png', show=False,\n                      savepath=f'{plot_path}00_{simu_name}', simulation_name=simu_name)\n# endregion\n")),(0,i.kt)("p",null,"In this code segment, we use the ",(0,i.kt)("inlineCode",{parentName:"p"},"structure_show")," function to form a picture.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"fig_type")," specifies the type of figure. It supports the following list selection",(0,i.kt)("inlineCode",{parentName:"p"},'["png", "svg"]'),".",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"show")," , which is a switch that controls whether the picture is generated or not. If you have already installed the GUI locally, you can automatically pop up the 3D structural model within the GUI using ",(0,i.kt)("inlineCode",{parentName:"p"},'show_with="local_gui"'),". Additionally, you can also use ",(0,i.kt)("inlineCode",{parentName:"p"},'show_with="matplotlib"')," to  view the structure."),(0,i.kt)("p",null,"Detailed explaination about EME simulation : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/7Preview#72-structure-show-and-show-3d"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/7Preview#72-structure-show-and-show-3d")),(0,i.kt)("h4",{id:"214-run"},"2.14 Run"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"In the region 11 ,we can recall the simulation name to run it.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 11. Run ---\nif run_options.run:\n    fdtd_res = simu[simu_name].run()\n# endregion\n")),(0,i.kt)("h4",{id:"215-run-simulation"},"2.15 Run Simulation"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"Then,\xa0in\xa0Region\xa012,\xa0we\xa0run\xa0the\xa0simulation.\xa0We support users to calculate the simulation with GPU by ",(0,i.kt)("inlineCode",{parentName:"p"},"resources")," to improve the simulation efficiency.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 12. Run ---\n\nif run_options.extract:\n    if run_options.run:\n\n        # region --- mode profile ---\n        fdtd_res.extract(data='fdtd:mode_source_mode_info', savepath=f'{plot_path}_source_modeprofile',\n                            source_name='source', attribute='E', target='intensity', mode=0, export_csv=True)\n        # endregion\n\n        # region --- x_normal ---\n        fdtd_res.extract(data='fdtd:power_monitor', savepath=f'{plot_path}_monitor_in_abs(T)',\n                            monitor_name='monitor_in', attribute='T', target='line', plot_x='wavelength',\n                            export_csv=True)\n        fdtd_res.extract(data='fdtd:power_monitor', savepath=f'{plot_path}_monitor_out_abs(T)',\n                            monitor_name='monitor_out', attribute='T', target='line', plot_x='wavelength',\n                            export_csv=True)\n        fdtd_res.extract(data='fdtd:power_monitor', savepath=f'{plot_path}_filed_power_abs(T)',\n                            monitor_name='filed_power', attribute='E', target='intensity', plot_x='x', plot_y='y',\n                            real=True, imag=True, export_csv=True, show=False)\n        return f'{plot_path}_monitor_out_abs(T).csv'\n\n        # endregion\n\n# endregion\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"extract")," function allows you to extract specific simulation results and store them for further analysis.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"data")," parameter is to decide what type/field data will be extracted.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"savepath")," parameter specifies the save path of picture.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"monitor_name")," parameter specifies the name of monitor which provides the data needed.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"attribute")," parameter specifies which attribute will extracted.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"plot_x")," parameter specifies the data of x axis.",(0,i.kt)("br",null),"\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"export_csv")," parameter is to decide whether to export a csv. Default as False.",(0,i.kt)("br",null)),(0,i.kt)("p",null,"Detailed explaination about data extraction : ",(0,i.kt)("a",{parentName:"p",href:"https://itsays-zqc.github.io/my-website/docs/test/v2_core/8Extract#811-calculate-mode-result"},"https://itsays-zqc.github.io/my-website/docs/test/v2_core/8Extract#811-calculate-mode-result"))),(0,i.kt)("h4",{id:"216-switches"},"2.16 Switches"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"In this section of the code, the ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation")," function is called and executed, which allows you to reset relevant parameters for more convenient parameter scanning and optimization design. We also support control switches for various functionalities at the end of the code, and you can use configuration flags(True or False). These flags can be used to turn specific functionalities on or off, making it easier to check the model and perform efficient calculations.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"lass RunOptions(NamedTuple):\n    run: bool\n    extract: bool\n\nif __name__ == '__main__':\n    out_file_path=simulation(run_mode='local', wavelength=1.575, grids_per_lambda=25,\n               run_options=RunOptions(run=True, extract=True))\n\n    print(out_file_path)\n")),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"By turning on/off the relevant functionalities, you can control the simulation process and obtain the desired results. ")),(0,i.kt)("h3",{id:"3output-results"},"3.Output Results"),(0,i.kt)("div",{class:"text-justify"},(0,i.kt)("p",null,"1.The electric intensity profile of the input fundamental TE mode.")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},(0,i.kt)("img",{src:n(18970).Z,width:"1414",height:"564"}))))),(0,i.kt)("p",null,"2.The z-normal E intensity of Y branch structure."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},(0,i.kt)("img",{src:n(60989).Z,width:"1895",height:"799"}))))),(0,i.kt)("p",null,"3.The transimission at different wavelengths."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},(0,i.kt)("img",{src:n(12747).Z,width:"1495",height:"581"}))))),(0,i.kt)("p",null,"Above all,the insert loss of this Y branch device is about 0.6 dB at 1.55 micrometer wavelength.")))}u.isMDXComponent=!0},12747:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/_monitor_out_abs(T)-32928445d94aceb7cfb88744d408fc5a.png"},18970:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/_source_modeprofile-f2f4a695c613d48a594a147d881a7b35.png"},82460:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/yintro1-ceebaef9b7e838bec6577435b47ffc14.png"},67369:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/yintro2-fa58bf84a0e9cbc1d2873ede00599634.png"},60989:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/zplot-e3d07d63f388bab19251dffea49f628d.png"}}]);