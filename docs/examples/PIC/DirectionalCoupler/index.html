<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-examples/PIC/DirectionalCoupler/DirectionalCoupler">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Directional Coupler | Knowledge Base</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://itsays-zqc.github.io/my-website/img/mo_logo.jpg"><meta data-rh="true" name="twitter:image" content="https://itsays-zqc.github.io/my-website/img/mo_logo.jpg"><meta data-rh="true" property="og:url" content="https://itsays-zqc.github.io/my-website/docs/examples/PIC/DirectionalCoupler/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Directional Coupler | Knowledge Base"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/my-website/img/mo_logo.png"><link data-rh="true" rel="canonical" href="https://itsays-zqc.github.io/my-website/docs/examples/PIC/DirectionalCoupler/"><link data-rh="true" rel="alternate" href="https://itsays-zqc.github.io/my-website/docs/examples/PIC/DirectionalCoupler/" hreflang="en"><link data-rh="true" rel="alternate" href="https://itsays-zqc.github.io/my-website/docs/examples/PIC/DirectionalCoupler/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/my-website/blog/rss.xml" title="Knowledge Base RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/my-website/blog/atom.xml" title="Knowledge Base Atom Feed"><link rel="stylesheet" href="/my-website/assets/css/styles.dee2adb7.css">
<link rel="preload" href="/my-website/assets/js/runtime~main.d91d42fe.js" as="script">
<link rel="preload" href="/my-website/assets/js/main.4810e6c2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/my-website/"><div class="navbar__logo"><img src="/my-website/img/mo_logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/my-website/img/mo_logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Max-Optics</b></a><a class="navbar__item navbar__link" href="/my-website/docs/faq/">FAQ</a><a class="navbar__item navbar__link" href="/my-website/docs/tutorial/material">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/my-website/docs/category/pic">Example Library</a><a class="navbar__item navbar__link" href="/my-website/docs/category/maxoptics_sdkall">Max-Optics SDK</a><a class="navbar__item navbar__link" href="/my-website/blog">Release Log</a></div><div class="navbar__items navbar__items--right"><a href="https://max-optics.com/?lang=zh-cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/my-website/docs/category/pic">PIC</a><button aria-label="Toggle the collapsible sidebar category &#x27;PIC&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/my-website/docs/examples/PIC/DirectionalCoupler/">Directional Coupler</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/docs/examples/PIC/MMI/">1X2 MMI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/docs/examples/PIC/PSR/">PSR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/docs/examples/PIC/ring_resonator/">ring_resonator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/my-website/docs/examples/PIC/ybranch/">Y branch</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/my-website/docs/category/grating">Grating</a><button aria-label="Toggle the collapsible sidebar category &#x27;Grating&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/my-website/docs/category/matameterial">Matameterial</a><button aria-label="Toggle the collapsible sidebar category &#x27;Matameterial&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/my-website/docs/category/pd">PD</a><button aria-label="Toggle the collapsible sidebar category &#x27;PD&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/my-website/docs/category/mod">MOD</a><button aria-label="Toggle the collapsible sidebar category &#x27;MOD&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/my-website/docs/category/lasers">Lasers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lasers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/my-website/docs/category/optical-scattering-and-far-field-radiation">Optical scattering and far-field radiation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Optical scattering and far-field radiation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/my-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/my-website/docs/category/pic"><span itemprop="name">PIC</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Directional Coupler</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Directional Coupler</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><div class="text-justify"><p> <!-- --> <!-- -->Directional couplers (DC) are an important category of optical splitters. They are typically composed of two adjacent single-mode waveguides, and the coupling coefficient is determined by both the length of the coupler and the spacing between them. This feature allows for effective control of the splitting ratio.</p><p> <!-- --> <!-- -->When it comes to directional couplers, we pay close attention to several key parameters, including <strong>insertion loss</strong>, <strong>splitting ratio</strong>, <strong>device dimensions</strong>, and <strong>operating bandwidth</strong>. </p></div><p><img loading="lazy" alt="DC introduction" src="/my-website/assets/images/DC_intro-9a7b08bf1007a1a31765c92a600517ac.png" title="DC introduction" width="1419" height="521" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="simulation-methods">Simulation Methods<a href="#simulation-methods" class="hash-link" aria-label="Direct link to Simulation Methods" title="Direct link to Simulation Methods">​</a></h2><div class="text-justify"><p> <!-- --> <!-- -->The <code>FDE module</code> can be used to calculate the symmetric and anti-symmetric mode field distributions of the directional coupler’s two arms. From these calculations, the effective index can be determined, allowing for the theoretical calculation of the coupling length required to achieve the target splitting ratio. </p><p> <!-- --> <!-- -->And the <code>FDTD module</code> can be used to perform precise calculations of light propagation in the DC. The light field transmission images in the monitor allow for a visual assessment,the related data of which facilitate further optimization and validation of the coupling length and spacing parameters in the DC splitter.</p><p> <!-- --> <!-- -->After data processing, it can be obtained that the splitting ratio, insertion loss, and operating bandwidth of DC. In designing high-performance directional couplers for various optical communication and integrated photonics applications, these calculations and optimization processes are instrumental.</p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="directional-couplerfde-module">Directional Coupler(FDE module)<a href="#directional-couplerfde-module" class="hash-link" aria-label="Direct link to Directional Coupler(FDE module)" title="Direct link to Directional Coupler(FDE module)">​</a></h2><div class="text-justify"><p> <!-- --> <!-- -->Using the <code>FDE module</code>, we will calculate symmetric and antisymmetric modes in a Directional Coupler modeled with the SDK. The input light can be considered a combination of the symmetric mode and the antisymmetric mode so that we can precisely calculate the coupling coefficient by effective index from the FDE module. Referring to the <em>Silicon Photonics Design</em> written by Lukas Chrostowski, we build the structure of the Directional coupler in the simulation.</p></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1basic-operations">1.Basic Operations<a href="#1basic-operations" class="hash-link" aria-label="Direct link to 1.Basic Operations" title="Direct link to 1.Basic Operations">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="11-import-file">1.1 Import File<a href="#11-import-file" class="hash-link" aria-label="Direct link to 1.1 Import File" title="Direct link to 1.1 Import File">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Once you have installed and configured the environment, import the <code>DC_FDE.py</code> SDK code and the <code>DC.gds</code> layout.</p><p> <!-- --> <!-- -->The example library and related model code are usually located in the directory <code>AIO_SDK/.venv_maxoptics/site-packages/maxoptics_sdk/examples</code>, and the GDS file is generally imported into the <code>../examples/examples_gds</code> folder.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="12-sdk-initialization">1.2 SDK Initialization<a href="#12-sdk-initialization" class="hash-link" aria-label="Direct link to 1.2 SDK Initialization" title="Direct link to 1.2 SDK Initialization">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Create a new terminal and run the code after you import the Python and GDS files. Max-Optics SDK may take some time to initialize on the first run.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Version of Max-Optics sdk is 2.3.0.4.630.2000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Max-Optics SDK is initializing...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2code-description">2.Code Description<a href="#2code-description" class="hash-link" aria-label="Direct link to 2.Code Description" title="Direct link to 2.Code Description">​</a></h3><div class="text-justify"><p> <!-- --> <!-- -->Now let&#x27;s learn the meaning of functions and parameters that correspond to the specific code.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="21-import-modules">2.1 import Modules<a href="#21-import-modules" class="hash-link" aria-label="Direct link to 2.1 import Modules" title="Direct link to 2.1 import Modules">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->To begin, we need to use the <code>import</code> command to call the relevant functional modules.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import maxoptics_sdk.all as mo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from maxoptics_sdk.helper import timed, with_path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from typing import List, Literal, NamedTuple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="22--define-simulation">2.2  Define Simulation<a href="#22--define-simulation" class="hash-link" aria-label="Direct link to 2.2  Define Simulation" title="Direct link to 2.2  Define Simulation">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Firstly, We define parameters and give them a default value, such as the simulation wavelength and grid accuracy. Note that we can override this value in the following code. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def simulation(*, run_mode=&#x27;local&#x27;, wavelength=1.55, grid=0.02, number_of_trial_modes=20, run_options: &#x27;RunOptions&#x27;, `kwargs):</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The provided code contains comments that define the simulation parameters. Let&#x27;s explain each of these parameters. <br> <!-- --> <!-- -->The function <code>simulation</code> is used to define the simulation parameters for the program. <br> <!-- --> <!-- -->The <code>run_mode</code> parameter determines the type of calculation resources to be used. <br> <!-- --> <!-- -->The <code>wavelength</code> parameter specifies the wavelength of the input light in micrometers. <br> <!-- --> <!-- -->The <code>grid</code> parameter represents the grid accuracy in micrometers. <br> <!-- --> <!-- -->Lastly, the <code>number_of_trial_modes</code> parameter sets the number of modes to be calculated.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="23-define-parameters">2.3 Define Parameters<a href="#23-define-parameters" class="hash-link" aria-label="Direct link to 2.3 Define Parameters" title="Direct link to 2.3 Define Parameters">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Define commonly used parameters in region 0, such as the width and height of the simulation boundary, the start time of the simulation, the path and name for the simulation output, the path to the imported GDS layout, and other parameters required for structural parameterized modeling.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 0. General Parameters ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  yspan_solver = 5 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  zspan_solver = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  time_str = time.strftime(&#x27;%Y%m%d_%H%M%S&#x27;, time.localtime())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path = kwargs[&#x27;path&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  simu_name = f&#x27;FDE_DC_yspan={yspan_solver}_{time_str}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gds_file_root_path = os.path.abspath(os.path.join(path, &#x27;..&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gds_file = gds_file_root_path + &#x27;/examples_gds/DC.gds&#x27; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  project_name = f&#x27;{simu_name}_{run_mode}_{time_str}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plot_path = kwargs.get(&#x27;plot_dir&#x27;, path) + &#x27;/plots/&#x27; + project_name + &#x27;/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kL = [f&#x27;0{k}&#x27; for k in range(5)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  export_options = {&quot;export_csv&quot;: True, &quot;export_mat&quot;: True, &quot;export_zbf&quot;: True}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  l_bend=5.6 # the length of z bend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  l_beam=15 # the length of 2 beams </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  l_input=2.5 # the length of input wg </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The code defines several parameters and variables necessary for the simulation process. The <code>yspan_solver</code> parameter represents the width of the simulation boundary specified in micrometers. Similarly, the <code>zspan_solver</code> parameter denotes the height of the simulation boundary in micrometers. The <code>time_str</code> variable is used to obtain the current time as a timestamp for the simulation.<br> <!-- --> <!-- -->The <code>path</code> variable defines the file path for the simulation, while <code>simu_name</code> specifies the name of the simulation file.<br> <!-- --> <!-- -->The <code>gds_file_root_path</code> variable defines the path for importing the GDS layout. <br> <!-- --> <!-- -->The <code>project_name</code> variable assigns a name to the project for the simulation output. <br> <!-- --> <!-- -->The <code>plot_path</code> variable determines the directory where the simulation result plots will be saved. <br> <!-- --> <!-- -->The <code>export_options</code> parameter allows for the definition of options for exporting the simulation results.<br> <!-- --> <!-- -->Lastly, the variables <code>l_bend</code> ,<code>l_beam</code>, and <code>l_input</code> represent the lengths of specific components within the simulation, such as the length of the z-bend, the length of the two beams, and the length of the input waveguide, respectively. <br> <!-- --> <!-- -->These parameters and variables together facilitate the successful execution and organization of the simulation process.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-define-materials">2.4 Define Materials<a href="#24-define-materials" class="hash-link" aria-label="Direct link to 2.4 Define Materials" title="Direct link to 2.4 Define Materials">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Indeed, let&#x27;s proceed to the next step, where we set up the materials required for the simulation in region 2. In this case, we will directly use relevant materials from the MO library.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 2. Material ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mt = pj.Material()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mt.add_lib(name=&#x27;Si&#x27;, data=mo.Material.Si_Palik, order=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mt.add_lib(name=&#x27;SiO2&#x27;, data=mo.Material.SiO2_Palik, order=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mt.add_lib(name=&#x27;Air&#x27;, data=mo.Material.Air, order=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="25-create-model">2.5 Create Model<a href="#25-create-model" class="hash-link" aria-label="Direct link to 2.5 Create Model" title="Direct link to 2.5 Create Model">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Next, we will create the Directional Coupler model in region 3. We have two options for modeling the structure:</p><p><img loading="lazy" alt="DC klayout" src="/my-website/assets/images/DC_gds-e90b2f1b03db289dbf023cbc09863ace.png" title="DC klayout" width="1544" height="343" class="img_ev3q"></p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 3. Structure ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st = pj.Structure(mesh_type=&quot;curve_mesh&quot;, mesh_factor=1.2, background_material=mt[&quot;SiO2&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_geometry(name=&quot;box&quot;, type=&quot;gds_file&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    property={&quot;general&quot;: {&quot;path&quot;: gds_file, &quot;cell_name&quot;: &quot;TOP&quot;, &quot;layer_name&quot;: (1, 1)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;geometry&quot;: {&quot;x&quot;: 0, &quot;y&quot;: 0, &quot;z&quot;: 0.11, &quot;z_span&quot;: 6},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;material&quot;: {&quot;material&quot;: mt[&quot;SiO2&quot;], &quot;mesh_order&quot;: 1}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_geometry(name=&quot;dc&quot;, type=&quot;gds_file&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    property={&quot;general&quot;: {&quot;path&quot;: gds_file, &quot;cell_name&quot;: &quot;TOP&quot;, &quot;layer_name&quot;: (0, 0)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;geometry&quot;: {&quot;x&quot;: 0, &quot;y&quot;: 0, &quot;z&quot;: 0.11, &quot;z_span&quot;: 0.22},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;material&quot;: {&quot;material&quot;: mt[&quot;Si&quot;], &quot;mesh_order&quot;: 2}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_geometry(name=&#x27;slab&#x27;, type=&#x27;Rectangle&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    property={&#x27;geometry&#x27;: {&#x27;x_min&#x27;: -l_input-l_bend-l_beam/2-3, &#x27;x_max&#x27;:l_input+l_bend+l_beam/2+3, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: 8, &#x27;z&#x27;: 0.045, &#x27;z_span&#x27;: 0.09},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &#x27;material&#x27;: {&#x27;material&#x27;: mt[&#x27;Si&#x27;], &#x27;mesh_order&#x27;: 2}} )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->Here, we import the DC layout from the GDS file. we can create the DC model directly within the SDK using the <code>Structure</code> function.<br> <!-- --> <!-- -->The <code>name</code> parameter defines the structure name.<br> <!-- --> <!-- -->The <code>type</code> parameter specifies the structure type.<br> <!-- --> <!-- -->The <code>path</code>, <code>cell_name</code>, and <code>layer_name</code> parameters point to the GDS file and specify the relevant layers and cell names used in the layout.<br> <!-- --> <!-- -->The <code>geometry</code> parameter sets the structure&#x27;s coordinates. <br> <!-- --> <!-- -->The <code>material</code> parameter specifies the material properties <br> <!-- --> <!-- -->The <code>mesh_order</code> parameter sets the mesh order for the simulation. </p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="26-boundary">2.6 Boundary<a href="#26-boundary" class="hash-link" aria-label="Direct link to 2.6 Boundary" title="Direct link to 2.6 Boundary">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->After establishing the model, we can add the simulation region in region 4 and define the simulation boundary conditions. This involves specifying the geometry of the simulation region, the boundary conditions in the xyz directions, and detailed parameters.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 4. Boundary ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">st.OBoundary(property={&#x27;geometry&#x27;: {&#x27;x&#x27;: 0, &#x27;x_span&#x27;: 0, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: yspan_solver, &#x27;z&#x27;: 0, &#x27;z_span&#x27;: zspan_solver},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &#x27;boundary&#x27;: {&#x27;y_min&#x27;: &#x27;PML&#x27;, &#x27;y_max&#x27;: &#x27;PML&#x27;, &#x27;z_min&#x27;: &#x27;PML&#x27;, &#x27;z_max&#x27;: &#x27;PML&#x27;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &#x27;general_pml&#x27;: {&#x27;pml_layer&#x27;: 12, &#x27;pml_kappa&#x27;: 1, &#x27;pml_sigma&#x27;: 15, &#x27;pml_polynomial&#x27;: 3}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->In this code segment, we define simulation region using the <code>OBoundary</code> function.<br> <!-- --> <!-- -->First, we define the size of the boundary with the <code>geometry</code> parameter .<br> <!-- --> <!-- -->Next, we define the boundary conditions for the simulation using the <code>boundary</code> dictionary, where the x ,y and the z directions all have PML boundary conditions.<br> <!-- --> <!-- -->Finally, we set detailed parameters for the PML boundary using the <code>general_pml</code> dictionary, specifying the <code>pml_layer</code>,<code>pml_kappa</code>, <code>pml_sigma</code>and <code>pml_polynomial</code>, which  specific the order of the polynomial.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="27--add-sub-mesh">2.7  Add Sub-mesh<a href="#27--add-sub-mesh" class="hash-link" aria-label="Direct link to 2.7  Add Sub-mesh" title="Direct link to 2.7  Add Sub-mesh">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->To achieve more accurate calculations of the model&#x27;s modal fields, we can add a sub-mesh in region 5.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 5. Sub Mesh ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">st.add_mesh(name=&#x27;sub_mesh&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            property={&#x27;general&#x27;: {&#x27;dx&#x27;: 0.002, &#x27;dy&#x27;: 0.002, &#x27;dz&#x27;: 0.002},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;geometry&#x27;: {&#x27;x&#x27;: 0, &#x27;x_span&#x27;: 6, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: 2, &#x27;z&#x27;: 0, &#x27;z_span&#x27;: 0.2}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->In this code segment, we use the <code>add_mesh</code> function to add a sub-mesh in region 5.<br> <!-- --> <!-- -->The <code>name</code> parameter defines the name of the mesh.<br> <!-- --> <!-- -->The <code>general</code> parameter specifies the grid accuracy in the xyz directions (in this case, 0.02 micrometers in each direction).<br> <!-- --> <!-- -->The <code>geometry</code> parameter sets the coordinates of the sub-mesh.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="28--fde-simulation">2.8  FDE Simulation<a href="#28--fde-simulation" class="hash-link" aria-label="Direct link to 2.8  FDE Simulation" title="Direct link to 2.8  FDE Simulation">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In region 6, we add the FDE simulation module to support mode calculations and frequency scans.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 6. Simulation ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">simu = pj.Simulation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">simu.add(name=simu_name, type=&#x27;FDE&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          property={</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              # &#x27;general&#x27;: {&#x27;solver_type&#x27;: &#x27;2d_x_normal&#x27;},  # default is &#x27;2d_x_normal&#x27; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &#x27;mesh_settings&#x27;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &#x27;global_mesh_uniform_grid&#x27;: {&#x27;dy&#x27;: grid, &#x27;dz&#x27;: grid},  # &#x27;minimum_mesh_step_settings&#x27;: {&#x27;min_mesh_step&#x27;: 1.0e-4}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &#x27;fde_analysis&#x27;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &#x27;modal_analysis&#x27;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;calculate_modes&#x27;: run_options.run, &#x27;mesh_structure&#x27;: True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;wavelength&#x27;: wavelength, &#x27;wavelength_offset&#x27;: 0.0001, &#x27;number_of_trial_modes&#x27;: number_of_trial_modes,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;search&#x27;: &#x27;max_index&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      # &#x27;n&#x27;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;calculate_group_index&#x27;: False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;mode_removal&#x27;: {&#x27;threshold&#x27;: 0.02},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      # &#x27;bent_waveguide&#x27;: {&#x27;bent_waveguide&#x27;: False, &#x27;radius&#x27;: 1, &#x27;orientation&#x27;: 0, &#x27;location&#x27;: &#x27;simulation_center&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;frequency_analysis&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &quot;frequency_analysis&quot;: run_options.run_frequency_sweep,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      # &quot;start_wavelength&quot;: 1.50, &quot;stop_wavelength&quot;: 1.60, &quot;number_of_points&quot;: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      # &quot;effective_index&quot;: 1, &quot;detailed_dispersion_calculation&quot;: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->In this code segment, the <code>name</code> parameter defines the name of the simulation module.<br> <!-- --> <!-- -->The <code>general</code> parameter specifies the type of the simulation module within the structure. It supports the following list selection<code>[&#x27;2d_x_normal&#x27;,&#x27;2d_y_normal&#x27;,&#x27;2d_z_normal&#x27;]</code>.<br> <!-- --> <!-- -->The <code>mesh_settings</code> parameter is set to the previously defined sub_mesh.<br> <!-- --> <!-- -->The <code>wavelength</code> parameter sets the wavelength-related parameters for the simulation.<br> <!-- --> <!-- -->The <code>search</code> parameter specifies the mode search type. It supports the following list selection<!-- -->[&#x27;near_n&#x27;,&#x27;max_index&#x27;]<!-- -->.<br> <!-- --> <!-- -->In this case, we use <code>max_index</code> to automatically search for the mode with max index in the structure. To use the ‘near_n’, we need to set the data in ‘n’.<br> <!-- --> <!-- -->The <code>bent_waveguide</code> parameter can be used to set parameters for a bent waveguide.<br> <!-- --> <!-- -->The <code>frequency_analysis</code> parameter allows us to set parameters for frequency scans or mode calculations with varying wavelengths.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="29--structure-image">2.9  Structure Image<a href="#29--structure-image" class="hash-link" aria-label="Direct link to 2.9  Structure Image" title="Direct link to 2.9  Structure Image">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In region 7, you can generate an image of the structure which contains the specific coordinates.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 7. Structure Show ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  st.structure_show(fig_type=&#x27;png&#x27;, show=False, savepath=f&#x27;{plot_path}{kL[0]}_{simu_name}&#x27;, simulation_name=simu_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # simu[simu_name].show3d(show_with=&quot;local_gui&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->In this code segment, we use the <code>structure_show</code> function to form a picture.<br> <!-- --> <!-- -->The <code>fig_type</code> specifies the type of figure. It supports the following list selection<!-- -->[&quot;png&quot;, &quot;svg&quot;]<!-- -->.<br> <!-- --> <!-- -->The <code>show</code> , which is a switch that controls whether the picture is generated or not. If you have already installed the GUI locally, you can automatically pop up the 3D structural model within the GUI using <code>show_with=&quot;local_gui&quot;</code>. Additionally, the parameter dictionary <code>show_with</code> also supports <code>matplotlib</code>, so you can also view the image through python.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="210--index-preview">2.10  Index Preview<a href="#210--index-preview" class="hash-link" aria-label="Direct link to 2.10  Index Preview" title="Direct link to 2.10  Index Preview">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->And in region 8, you can generate a material refractive index plot for the structure in different cross-sectional directions(x,y,z).</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 8. Mesh View ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if run_options.index_preview:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    k = kL[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simu[simu_name].run_index(name=f&#x27;{simu_name}_x_0&#x27;, savepath=f&#x27;{plot_path}{k}IndexPreview_x=0&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              # export_csv=False, show=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              property={&#x27;geometry&#x27;: {&#x27;x&#x27;: 0, &#x27;x_span&#x27;: 0, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: 3, &#x27;z&#x27;: 0, &#x27;z_span&#x27;: 2}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simu[simu_name].run_index(name=f&#x27;{simu_name}_y_0&#x27;, savepath=f&#x27;{plot_path}{k}IndexPreview_y=0&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              # export_csv=False, show=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              property={&#x27;geometry&#x27;: {&#x27;x&#x27;: 0, &#x27;x_span&#x27;: 4, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: 0, &#x27;z&#x27;: 0, &#x27;z_span&#x27;: 2}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simu[simu_name].run_index(name=f&#x27;{simu_name}_z_0&#x27;, savepath=f&#x27;{plot_path}{k}IndexPreview_z=0&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              # export_csv=False, show=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              property={&#x27;geometry&#x27;: {&#x27;x&#x27;: 0, &#x27;x_span&#x27;: 4, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: 3, &#x27;z&#x27;: 0, &#x27;z_span&#x27;: 0}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-run-simulation">2.11 Run Simulation<a href="#211-run-simulation" class="hash-link" aria-label="Direct link to 2.11 Run Simulation" title="Direct link to 2.11 Run Simulation">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In region 9, you can run the simulation. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 9. Run ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result_fde = simu[simu_name].run()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-retrieve-results">2.12 Retrieve Results<a href="#212-retrieve-results" class="hash-link" aria-label="Direct link to 2.12 Retrieve Results" title="Direct link to 2.12 Retrieve Results">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In region 10, you can retrieve and store the simulation results. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 10. See Results ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if run_options.extract:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- 10.1 calculate_modes ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if run_options.run:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        k = kL[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        res = result_fde.extract(data=&#x27;calculate_modes&#x27;, savepath=f&#x27;{plot_path}{k}_neff_table&#x27;, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(res.to_string(index=False))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for m in range(len(res)):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            k = kL[3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            result_fde.extract(data=&#x27;calculate_modes&#x27;, savepath=f&#x27;{plot_path}{k}_mode{m}&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                attribute=&#x27;Ey&#x27;, mode=m, real=True, imag=False, `export_options, show=False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if run_options.run_frequency_sweep:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        attr_selections: List[Literal[&quot;neff&quot;, &quot;loss&quot;, &quot;group_index&quot;, &quot;polarization&quot;]] = [&quot;neff&quot;, &quot;loss&quot;, &quot;group_index&quot;, &quot;polarization&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for i, a in enumerate(attr_selections):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            k = kL[4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            result_fde.extract(data=&quot;frequency_analysis&quot;, savepath=f&#x27;{plot_path}{k}_freq_sweep_{a}&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                attribute=a, real=True, imag=True, export_csv=True, export_mat=True, show=False)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The <code>extract</code> function allows you to extract specific simulation results and store them for further analysis.<br> <!-- --> <!-- -->The <code>attribute</code> parameter specifies the type of simulation results to be extracted.<br> <!-- --> <!-- -->The <code>mode</code> parameter corresponds to the index of the FDE calculation mode.<br> <!-- --> <!-- -->The <code>real</code> and <code>imag</code> parameters are used to extract the real and imaginary parts of the simulation results, respectively.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="213-switches">2.13 Switches<a href="#213-switches" class="hash-link" aria-label="Direct link to 2.13 Switches" title="Direct link to 2.13 Switches">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In this section of the code, the <code>simulation</code> function is called and executed, which allows you to reset relevant parameters for more convenient parameter scanning and optimization design. We also support control switches for various functionalities at the end of the code, and you can use configuration flags(True or False). These flags can be used to turn specific functionalities on or off, making it easier to check the model and perform efficient calculations.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class RunOptions(NamedTuple):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index_preview: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run_frequency_sweep: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extract: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simulation( </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            run_mode=&quot;local&quot;, wavelength=1.55, grid=0.02, number_of_trial_modes=20, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               run_options=RunOptions(index_preview=True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      run=True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      run_frequency_sweep=False,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      extract=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->By turning on/off the relevant functionalities, you can control the simulation process and obtain the desired results. For example, the <code>index_preview</code> is to control whether to output images of the structural refractive index. <code>run</code> determines whether to run the program. <code>run_frequency_sweep</code> is used to enable frequency scanning, and <code>extract</code> is used to control data extraction. Properly utilizing these switches can help you inspect the simulation effectively.</p></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3output-results">3.Output Results<a href="#3output-results" class="hash-link" aria-label="Direct link to 3.Output Results" title="Direct link to 3.Output Results">​</a></h3><div class="text-justify"><p> <!-- --> <!-- -->1. Schematic diagram of the refractive index of the device.</p></div><p><img loading="lazy" alt="DC index preview" src="/my-website/assets/images/DC_index_str-f6db0dc9f9f2ebe2bdf4cf2285302a30.png" title="DC index preview" width="835" height="225" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->2. The results of the calculation mode will be stored in a CSV format file for subsequent data processing in Python and Excel.</p></div><p><img loading="lazy" alt="DC data" src="/my-website/assets/images/DC_dataout-7f2ddd60627ba38b7c7df7cd9c2eefc3.png" title="DC data" width="1309" height="348" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->3. Image of the Ey electric field component intensity in symmetric and antisymmetric mode modes.</p></div><p><img loading="lazy" alt="DC mode" src="/my-website/assets/images/DC_modeEy-f368d3d4c46ed54d43610ef433717898.png" title="DC mode" width="740" height="289" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->4. According to the effective refractive index of the obtained mode field, Python is used for data processing and drawing.</p></div><div class="text-justify"><p> <!-- --> <!-- --> <!-- -->The coupling length under the gap between two waveguides is calculated with the formula:</p></div><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mi>x</mi></msub><mo>=</mo><mfrac><mi>λ</mi><mrow><mn>2</mn><mi mathvariant="normal">∣</mi><mi>n</mi><mi>e</mi><mi>f</mi><msub><mi>f</mi><mn>1</mn></msub><mo>−</mo><mi>n</mi><mi>e</mi><mi>f</mi><msub><mi>f</mi><mn>2</mn></msub><mi mathvariant="normal">∣</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">L_x = \frac{\lambda}{2|neff_1-neff_2|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3074em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2∣</span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">λ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><div class="text-justify"><p> <!-- --> <!-- --> <!-- -->We can also get the coupling coefficient by the formula:</p></div><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>κ</mi><mo>=</mo><mi mathvariant="normal">∣</mi><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>π</mi><mi>δ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mi>L</mi></mrow><mi>λ</mi></mfrac><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">\kappa = |sin(\frac{\pi\delta(n)L}{\lambda})|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">κ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord">∣</span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">λ</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mord">∣</span></span></span></span></span></div><p><img loading="lazy" alt="DC gap,neff,Lx" src="/my-website/assets/images/DC_mode_pic-68ef07e7c17e32034cd99ecabfd05c4b.png" title="DC gap,neff,Lx" width="841" height="210" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->5.  Similarly, we can obtain the relationship between the gap (distance) between two waveguides and the coupling coefficient and the relationship between the wavelength and the coupling length.</p></div><p><img loading="lazy" alt="DC gap,neff,Lx" src="/my-website/assets/images/DC_mode_pic2-c23496bf4944b980b940a006b16418d6.png" title="DC gap,neff,Lx" width="599" height="246" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="directional-couplerfdtd-module">Directional Coupler(FDTD module)<a href="#directional-couplerfdtd-module" class="hash-link" aria-label="Direct link to Directional Coupler(FDTD module)" title="Direct link to Directional Coupler(FDTD module)">​</a></h2><div class="text-justify"><p> <!-- --> <!-- -->Next, we will learn how to model a Directional Coupler using the SDK and calculate the light propagation in the structure using the FDTD module.</p></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1basic-operations-1">1.Basic Operations<a href="#1basic-operations-1" class="hash-link" aria-label="Direct link to 1.Basic Operations" title="Direct link to 1.Basic Operations">​</a></h3><div class="text-justify"><p> <!-- --> <!-- -->Similarly, after installing and configuring the environment, we import the relevant SDK code file <code>DC_FDTD.py</code> and the layout <code>DC.gds</code> for the model. The example library and related model code are typically stored in the directory <code>AIO_SDK/.venv_maxoptics/site-packages/maxoptics_sdk/examples</code>, and the GDS file is imported into the folder <code>../examples/examples_gds</code>.</p></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2code-description-1">2.Code Description<a href="#2code-description-1" class="hash-link" aria-label="Direct link to 2.Code Description" title="Direct link to 2.Code Description">​</a></h3><div class="text-justify"><p> <!-- --> <!-- -->Next, we will continue to learn about the specific functionalities corresponding to the code.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="21-define-parameters">2.1 Define Parameters<a href="#21-define-parameters" class="hash-link" aria-label="Direct link to 2.1 Define Parameters" title="Direct link to 2.1 Define Parameters">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Like the operations with the FDE module, after configuring the simulation wavelength, grid precision, and other parameters, we need to set the relevant parameters for simulation and parameterized modeling in Region 0. This includes defining the paths and names for the simulation files and output results and specifying the path for importing the GDS layout.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 0. General Parameters ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l_bend=5.6 # the length of z bend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l_beam=15 # the length of 2 beams </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l_input=2.5 # the length of input wg </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">monitor_w = 3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">monitor_h = 2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">waveform_name = &quot;wv&quot; + str(round(wavelength * 1000))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time_str = time.strftime(&quot;%Y%m%d_%H%M%S&quot;, time.localtime())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path = kwargs[&quot;path&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">simu_name = &quot;FDTD_DC&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">project_name = f&#x27;{simu_name}_{run_mode}_{time_str}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">plot_path = f&#x27;{path}/plots/{project_name}/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gds_file_root_path = os.path.abspath(os.path.join(path, &#x27;..&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gds_file = gds_file_root_path + &quot;/examples_gds/DC.gds&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-define-materials">2.2 Define Materials<a href="#22-define-materials" class="hash-link" aria-label="Direct link to 2.2 Define Materials" title="Direct link to 2.2 Define Materials">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Subsequently, in Region 2, we define the materials required for the simulation. Here, we specify the refractive indices of Si (Silicon) and SiO2 (Silicon Dioxide) materials.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 2. Material ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mt = pj.Material()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mt.add_nondispersion(name=&quot;Si&quot;, data=[(3.472, 0)], order=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mt.add_nondispersion(name=&quot;SiO2&quot;, data=[(1.444, 0)], order=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mt.add_lib(name=&quot;Air&quot;, data=mo.Material.Air, order=2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The <code>add_nondispersion</code> function adds a non-dispersion material to the project in the simulation. <br> <!-- --> <!-- -->The <code>data</code>, is specified as a list, typically in the format <!-- -->[(index real, index imag)]<!-- -->. This list contains the complex refractive index values for the material, enabling the simulation to model its optical properties accurately.<br> <!-- --> <!-- -->The <code>Order</code> parameter determines the mesh order for the material during the simulation.<br> <!-- --> <!-- -->The function allows users to incorporate non-dispersion materials into the simulation, contributing to a comprehensive and precise optical analysis of the system under investigation.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="23-define-waveform">2.3 Define Waveform<a href="#23-define-waveform" class="hash-link" aria-label="Direct link to 2.3 Define Waveform" title="Direct link to 2.3 Define Waveform">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In Region 3, we define the parameters relevant to the wavelength.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 3. Waveform ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wv = pj.Waveform()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wv.add(name=waveform_name, wavelength_center=wavelength, wavelength_span=wavelength_span)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The <code>Waveform</code> function is used to retrieve the waveform manager for the current project. It allows users to access and manipulate the waveform sources used in the simulation.<br> <!-- --> <!-- -->The <code>name</code> parameter specifies the name of the waveform source.<br> <!-- --> <!-- -->The <code>Wavelength_center</code> parameter defines the center of the wavelength range for the source.<br> <!-- --> <!-- -->The <code>Wavelength_span</code> parameter determines the span of the wavelength range for the source. </p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-create-modelboundarysub-mesh">2.4 Create Model\Boundary\Sub-mesh<a href="#24-create-modelboundarysub-mesh" class="hash-link" aria-label="Direct link to 2.4 Create Model\Boundary\Sub-mesh" title="Direct link to 2.4 Create Model\Boundary\Sub-mesh">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Next, similar to the procedure in the FDE module, in Region 4, we create the model by importing the GDS layout. Subsequently, in Region 5, we establish the boundary conditions. Additionally, in Region 6, we can set the sub-mesh for improved precision.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- 4. Structure ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st = pj.Structure(mesh_type=&quot;curve_mesh&quot;, mesh_factor=1.2, background_material=mt[&quot;SiO2&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_geometry(name=&quot;box&quot;, type=&quot;gds_file&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    property={&quot;general&quot;: {&quot;path&quot;: gds_file, &quot;cell_name&quot;: &quot;TOP&quot;, &quot;layer_name&quot;: (1, 1)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;geometry&quot;: {&quot;x&quot;: 0, &quot;y&quot;: 0, &quot;z&quot;: 0.11, &quot;z_span&quot;: 6},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;material&quot;: {&quot;material&quot;: mt[&quot;SiO2&quot;], &quot;mesh_order&quot;: 1}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_geometry(name=&quot;dc&quot;, type=&quot;gds_file&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    property={&quot;general&quot;: {&quot;path&quot;: gds_file, &quot;cell_name&quot;: &quot;TOP&quot;, &quot;layer_name&quot;: (0, 0)},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;geometry&quot;: {&quot;x&quot;: 0, &quot;y&quot;: 0, &quot;z&quot;: 0.11, &quot;z_span&quot;: 0.22},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &quot;material&quot;: {&quot;material&quot;: mt[&quot;Si&quot;], &quot;mesh_order&quot;: 2}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_geometry(name=&#x27;slab&#x27;, type=&#x27;Rectangle&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    property={&#x27;geometry&#x27;: {&#x27;x_min&#x27;: -l_input-l_bend-l_beam/2-3, &#x27;x_max&#x27;:l_input+l_bend+l_beam/2+3, &#x27;y&#x27;: 0, &#x27;y_span&#x27;: 8, &#x27;z&#x27;: 0.045, &#x27;z_span&#x27;: 0.09},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              &#x27;material&#x27;: {&#x27;material&#x27;: mt[&#x27;Si&#x27;], &#x27;mesh_order&#x27;: 2}} )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- 5. Boundary ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.OBoundary(property={&quot;geometry&quot;: {&quot;x&quot;: 0, &quot;x_span&quot;: 2*(l_input+l_bend+l_beam/2-0.5), &quot;y&quot;: 0, &quot;y_span&quot;: 6, &quot;z&quot;: 0.11, &quot;z_span&quot;: monitor_h},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;boundary&quot;: {&quot;x_min&quot;: &quot;PML&quot;, &quot;x_max&quot;: &quot;PML&quot;, &quot;y_min&quot;: &quot;PML&quot;, &quot;y_max&quot;: &quot;PML&quot;, &quot;z_min&quot;: &quot;PML&quot;, &quot;z_max&quot;: &quot;PML&quot;},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           &quot;general_pml&quot;: {&quot;pml_same_settings&quot;: True, &quot;pml_kappa&quot;: 2, &quot;pml_sigma&quot;: 0.8, &quot;pml_layer&quot;: 8, &quot;pml_polynomial&quot;: 3}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- 6. Sub Mesh ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.add_mesh(name=&quot;sub_mesh&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                property={&quot;general&quot;: {&quot;dx&quot;: 0.05, &quot;dy&quot;: 0.02, &quot;dz&quot;: 0.02},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;geometry&quot;: {&quot;x&quot;: 0, &quot;x_span&quot;: 2*(l_input+l_bend+l_beam/2-0.5), &quot;y&quot;: 0, &quot;y_span&quot;: 6, &quot;z&quot;: 0.11, &quot;z_span&quot;: monitor_h}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="25-source">2.5 Source<a href="#25-source" class="hash-link" aria-label="Direct link to 2.5 Source" title="Direct link to 2.5 Source">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Then we need to establish the light source in the input waveguide, as shown in Region 7.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 7. ModeSource ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">src = pj.Source()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">src.add(name=&quot;source&quot;, type=&quot;mode_source&quot;, axis=&quot;x_forward&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        property={&quot;general&quot;: {&quot;mode_selection&quot;: &quot;user_select&quot;, &quot;waveform&quot;: {&quot;waveform_id_select&quot;: wv[waveform_name]}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;geometry&quot;: {&quot;x&quot;: -l_input-l_beam/2-l_bend+2, &quot;x_span&quot;: 0, &quot;y&quot;: 1.35, &quot;y_span&quot;: monitor_w, &quot;z&quot;: 0.11, &quot;z_span&quot;: monitor_h}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The <code>Source</code> function is utilized to retrieve the source manager for the current project.<br> <!-- --> <!-- -->The <code>type</code> parameter specifies the type of the source and is formatted as either <code>[&quot;mode_source&quot;] or [&quot;gaussian_source&quot;]</code>.<br> <!-- --> <!-- -->The <code>name</code> parameter represents the name assigned to the source.<br> <!-- --> <!-- -->The <code>axis</code> parameter defines the axis of the source.<br> <!-- --> <!-- -->The <code>property</code> parameter allows for defining specific properties associated with the source.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="26-monitor">2.6 Monitor<a href="#26-monitor" class="hash-link" aria-label="Direct link to 2.6 Monitor" title="Direct link to 2.6 Monitor">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In Region 8, we set up the monitors. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 8. Monitor ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # region --- 8.0 GlobalMonitor ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mn = pj.Monitor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mn.add(name=&quot;Global Option&quot;, type=&quot;global_option&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          property={&quot;frequency_power&quot;: {&quot;spacing_type&quot;: &quot;wavelength&quot;, &quot;spacing_limit&quot;: &quot;center_span&quot;,   # [&quot;min_max&quot;,&quot;center_span&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        &quot;wavelength_center&quot;: wavelength, &quot;wavelength_span&quot;: , &quot;frequency_points&quot;: 3}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # region --- 8.2 input ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mn.add(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type=&quot;power_monitor&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name=&quot;input_reflect&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    property={&quot;general&quot;: {&quot;frequency_profile&quot;: {&quot;wavelength_center&quot;: wavelength, &quot;wavelength_span&quot;: 0.1, &quot;frequency_points&quot;: 3}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;geometry&quot;: {&quot;monitor_type&quot;: &quot;2d_x_normal&quot;, &quot;x&quot;: -l_input-l_beam/2-l_bend+1.5, &quot;x_span&quot;: 0, &quot;y&quot;: 1.35, &quot;y_span&quot;: monitor_w, &quot;z&quot;: 0.11, &quot;z_span&quot;: monitor_h},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &#x27;mode_expansion&#x27;: {&quot;enable&quot;: True, &#x27;direction&#x27;: &#x27;positive&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  &#x27;mode_calculation&#x27;: {&#x27;mode_selection&#x27;: &#x27;user_select&#x27;, &#x27;mode_index&#x27;: [0]}}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->For the global monitor, the <code>Monitor</code> function is utilized to retrieve the monitor manager for the current project, which allows users to access and manage various types of monitors used during simulation.<br> <!-- --> <!-- -->The <code>name</code> parameter represents the name of the Global Option associated with the monitor.<br> <!-- --> <!-- -->The <code>type</code> parameter defines the type of the Global Option and is formatted as a list containing one of several monitor types, such as <code>[&quot;electric_monitor&quot;], [&quot;current_monitor&quot;], [&quot;charge_monitor&quot;], [&quot;band_monitor&quot;], [&quot;profile_monitor&quot;], [&quot;global_monitor&quot;, &quot;global_option&quot;], [&quot;time_monitor&quot;], [&quot;power_monitor&quot;], or [&quot;mode_expansion&quot;]</code>. The <code>property</code> parameter is used to define and set the relevant parameters specific to the chosen monitor type. These parameters control the monitor&#x27;s behavior and data collection settings during the simulation.</p><p> <!-- --> <!-- -->The power monitor is a configuration setting that allows users to specify various simulation parameters.<br> <!-- --> <!-- -->The <code>name</code> parameter assigns a name to the power monitor.<br> <!-- --> <!-- -->The <code>type</code> parameter defines the type of power monitor.<br> <!-- --> <!-- -->The <code>general</code> parameter pertains to settings related to the frequency domain and frequency-dependent behaviors of the simulation.<br> <!-- --> <!-- -->The <code>geometry</code> parameter is used to define the geometric characteristics of the simulated structure.<br> <!-- --> <!-- -->The <code>mode_expansion</code> parameter involves relevant settings for mode expansion simulations. Users can customize the simulation settings by utilizing these input parameters to achieve accurate and comprehensive results based on their specific simulation requirements.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="27-fdtd-simulation">2.7 FDTD Simulation<a href="#27-fdtd-simulation" class="hash-link" aria-label="Direct link to 2.7 FDTD Simulation" title="Direct link to 2.7 FDTD Simulation">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In Region 9, we add the FDTD simulation. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- 9. Simulation ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simu = pj.Simulation()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simu.add(name=simu_name, type=&quot;FDTD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             property={&quot;general&quot;: {&quot;simulation_time&quot;: 1000},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       &quot;mesh_settings&quot;: {&quot;mesh_accuracy&quot;: {&quot;cells_per_wavelength&quot;: grids_per_lambda, },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                         &quot;minimum_mesh_step_settings&quot;: {&quot;min_mesh_step&quot;: 0.01}}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="text-justify"><p> <!-- --> <!-- -->The <code>Simulation</code> manager is critical for setting up and running simulations in the current project.<br> <!-- --> <!-- -->The <code>name</code> parameter allows users to assign a unique name to the simulation for identification purposes.<br> <!-- --> <!-- -->The <code>type</code> parameter defines the type of the simulation.<br> <!-- --> <!-- -->The <code>simulation_time</code> parameter specifies the duration of the simulation.<br> <!-- --> <!-- -->The <code>mesh_settings</code> parameter enables users to configure various settings related to the simulation mesh. The <code>mesh_accuracy</code> parameter controls the precision of the mesh used in the simulation.<br> <!-- --> <!-- -->The <code>cells_per_wavelength</code> parameter determines the wavelength precision used in the simulation.<br> <!-- --> <!-- -->The <code>minimum_mesh_step_settings</code> parameter sets the minimum mesh step, allowing users to define the smallest allowable size for mesh elements.<br> <!-- --> <!-- -->Users can tailor the simulation setup to meet their requirements by utilizing these input parameters, enabling accurate and efficient electromagnetic simulations of complex optical structures.</p></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="28--schematic-of-structure">2.8  Schematic of Structure<a href="#28--schematic-of-structure" class="hash-link" aria-label="Direct link to 2.8  Schematic of Structure" title="Direct link to 2.8  Schematic of Structure">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->As the same, we generate the device structure of the Directional Coupler in Region 10. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 10. Structure Show ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  st.structure_show(fig_type=&quot;png&quot;, show=False, savepath=plot_path + simu_name, simulation_name=simu_name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="29--calculate-source">2.9  Calculate Source<a href="#29--calculate-source" class="hash-link" aria-label="Direct link to 2.9  Calculate Source" title="Direct link to 2.9  Calculate Source">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->To calculate the input mode light and save its electric field intensity data in region 11.  </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 11. Calculate Mode ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if run_options.calculate_modes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simu.add(name=simu_name+&quot;_cal_mode&quot;, type=&quot;mode_selection:user_select&quot;, simulation_name=simu_name, source_name=&quot;source&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              property={&quot;modal_analysis&quot;: {&quot;mesh_structure&quot;: True, &quot;calculate_modes&quot;: True,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                          &quot;wavelength&quot;: wavelength, &quot;number_of_trial_modes&quot;: 10, &quot;search&quot;: &quot;max_index&quot;, &quot;calculate_group_index&quot;: True}})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    src_res = simu[simu_name+&quot;_cal_mode&quot;].run()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    src_res.extract(data=&quot;calculate_modes&quot;, savepath=plot_path + &quot;00_source_modeprofile_fdeonly&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    mode=0, attribute=&quot;E&quot;, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="210--run-simulation">2.10  Run Simulation<a href="#210--run-simulation" class="hash-link" aria-label="Direct link to 2.10  Run Simulation" title="Direct link to 2.10  Run Simulation">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->Then, in Region 12, we run the simulation. </p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 12. Run ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class RunOptions(NamedTuple):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index_preview: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate_modes: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extract: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simulation( run_mode=&quot;local&quot;, wavelength=1.55, wavelength_span=0.1 , grids_per_lambda=6, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               run_options=RunOptions(index_preview=True, calculate_modes=True, run=True, extract=True))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="211--results">2.11  Results<a href="#211--results" class="hash-link" aria-label="Direct link to 2.11  Results" title="Direct link to 2.11  Results">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->In Region 13, we define the desired output results. Lastly, we control the switches of various functional modules at the end of the Python file.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># region --- 13. See Results ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if run_options.extract and run_options.run:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- z_normal ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 01_top_profile &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for λ in [1.5, 1.55, 1.6]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fdtd_res.extract(data=&quot;fdtd:power_monitor&quot;, savepath=plot_path + &quot;01_top_profile_&quot; + str(λ) + &quot;um&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          monitor_name=&quot;z_normal&quot;, target=&quot;intensity&quot;, attribute=&quot;E&quot;, wavelength=str(λ), export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- through ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 01_monitorThrough_modeprofile_fdtd &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtd_res.extract(data=&quot;fdtd:power_monitor&quot;, savepath=plot_path + &quot;01_monitorThrough_modeprofile_fdtd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      monitor_name=&quot;output_up&quot;, target=&quot;intensity&quot;, attribute=&quot;E&quot;, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 02_Trans_ThroughVsLambda_power &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtd_res.extract(data=&quot;fdtd:power_monitor&quot;, savepath=plot_path + &quot;02_Trans_ThroughVsLambda_power&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      monitor_name=&quot;output_up&quot;, attribute=&quot;T&quot;, target=&quot;line&quot;, plot_x=&quot;wavelength&quot;, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 021_ME_ThroughVsLambda_mode &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtd_res.extract(data=&quot;fdtd:mode_expansion&quot;, savepath=plot_path + &quot;021_ME_ThroughVsLambda_mode&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      monitor_name=&quot;output_up&quot;, attribute=&quot;t_forward&quot;, target=&quot;line&quot;, plot_x=&quot;wavelength&quot;, mode=0, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # region --- cross ---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 01_monitorThrough_modeprofile_fdtd &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtd_res.extract(data=&quot;fdtd:power_monitor&quot;, savepath=plot_path + &quot;01_monitorCross_modeprofile_fdtd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      monitor_name=&quot;output_down&quot;, target=&quot;intensity&quot;, attribute=&quot;E&quot;, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 02_Trans_ThroughVsLambda_power &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtd_res.extract(data=&quot;fdtd:power_monitor&quot;, savepath=plot_path + &quot;02_Trans_CrossVsLambda_power&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      monitor_name=&quot;output_down&quot;, attribute=&quot;T&quot;, target=&quot;line&quot;, plot_x=&quot;wavelength&quot;, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&quot;&quot; 021_ME_ThroughVsLambda_mode &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fdtd_res.extract(data=&quot;fdtd:mode_expansion&quot;, savepath=plot_path + &quot;021_ME_CrossVsLambda_mode&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      monitor_name=&quot;output_down&quot;, attribute=&quot;t_forward&quot;, target=&quot;line&quot;, plot_x=&quot;wavelength&quot;, mode=0, export_csv=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # endregion</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="211--switches">2.11  Switches<a href="#211--switches" class="hash-link" aria-label="Direct link to 2.11  Switches" title="Direct link to 2.11  Switches">​</a></h4><div class="text-justify"><p> <!-- --> <!-- -->At the end of all codes, We control the switches of various functional modules at the end of the Python file.</p></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class RunOptions(NamedTuple):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index_preview: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculate_modes: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    run: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extract: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    simulation(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               run_options=RunOptions(index_preview=True, calculate_modes=True, run=True, extract=True))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3output-results-1">3.Output Results<a href="#3output-results-1" class="hash-link" aria-label="Direct link to 3.Output Results" title="Direct link to 3.Output Results">​</a></h3><div class="text-justify"><p> <!-- --> <!-- -->After running the program, we can obtain a series of corresponding output results:</p><p> <!-- --> <!-- -->1.Incident light electric field intensity, Cross output port electric field intensity, and TRU output port electric field intensity.</p></div><p><img loading="lazy" alt="FDTD mode" src="/my-website/assets/images/fdtd_mode-db99e30c7581975b97e60682c471e7a1.png" title="FDTD mode" width="1478" height="431" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->2.DC (Directional Coupler)  Z-direction electric field intensity at different wavelengths: 1.50 <em>μ</em>m, 1.55 <em>μ</em>m, and 1.60 <em>μ</em>m.</p></div><p><img loading="lazy" alt="FDTD mode" src="/my-website/assets/images/fdtd_zplot-d847d95acaed7b9337ae191156d64210.png" title="FDTD mode" width="1367" height="390" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->3.Cross output port and TRU output port transmittance at different wavelengths: 1.50 <em>μ</em>m, 1.55 <em>μ</em>m, and 1.60 <em>μ</em>m.</p></div><p><img loading="lazy" alt="FDTD mode" src="/my-website/assets/images/fdtd_wavesweep-8637f780789d04db66cd315ead0b5449.png" title="FDTD mode" width="1180" height="478" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->4.TE0 mode transmittance at Cross output port and TRU output port for different wavelengths: 1.50 <em>μ</em>m, 1.55 <em>μ</em>m, and 1.60 <em>μ</em>m.</p></div><p><img loading="lazy" alt="FDTD mode" src="/my-website/assets/images/fdtd_wavesweep2-d4afe23741c88b6de877c0b7129f4ea0.png" title="FDTD mode" width="1364" height="471" class="img_ev3q"></p><div class="text-justify"><p> <!-- --> <!-- -->Based on the information provided, we can get the following results  when propogating wavelength  is 1.55 <em>μ</em>m and the two beam length of directional couper is equal to 15 <em>μ</em>m:<br> <!-- --> <!-- -->1.Insertion Loss: 0.177 dB;<br> <!-- --> <!-- -->2.Power Split Ratio: 13.2 : 83.8 (or approximately 13.2% to one port and 83.8% to the other port);<br> <!-- --> <!-- -->3.Dimensions: Approximately 5 <em>μ</em>m X 25 <em>μ</em>m. </p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="supplement">Supplement<a href="#supplement" class="hash-link" aria-label="Direct link to Supplement" title="Direct link to Supplement">​</a></h2><div class="text-justify"><p> <!-- --> <!-- -->To view a function&#x27;s definition and supported parameters or a parameter dictionary, you can right-click on its name and select &quot;Go to Definition&quot;  or press &quot;Ctrl&quot; while left-clicking on its name to view its definition, showing the available parameters and their descriptions.  </p></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><p>Chrostowski, L., &amp; Hochberg, M. (2015). Silicon Photonics Design: From Devices to Systems. Cambridge: Cambridge University Press. doi:10.1017/CBO9781316084168</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/PIC/DirectionalCoupler/DirectionalCoupler.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/my-website/docs/category/pic"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">PIC</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/my-website/docs/examples/PIC/MMI/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">1X2 MMI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#simulation-methods" class="table-of-contents__link toc-highlight">Simulation Methods</a></li><li><a href="#directional-couplerfde-module" class="table-of-contents__link toc-highlight">Directional Coupler(FDE module)</a><ul><li><a href="#1basic-operations" class="table-of-contents__link toc-highlight">1.Basic Operations</a></li><li><a href="#2code-description" class="table-of-contents__link toc-highlight">2.Code Description</a></li><li><a href="#3output-results" class="table-of-contents__link toc-highlight">3.Output Results</a></li></ul></li><li><a href="#directional-couplerfdtd-module" class="table-of-contents__link toc-highlight">Directional Coupler(FDTD module)</a><ul><li><a href="#1basic-operations-1" class="table-of-contents__link toc-highlight">1.Basic Operations</a></li><li><a href="#2code-description-1" class="table-of-contents__link toc-highlight">2.Code Description</a></li><li><a href="#3output-results-1" class="table-of-contents__link toc-highlight">3.Output Results</a></li></ul></li><li><a href="#supplement" class="table-of-contents__link toc-highlight">Supplement</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Products</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/my-website/docs/intro">FDTD</a></li><li class="footer__item"><a class="footer__link-item" href="/my-website/docs/intro">MODE</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/my-website/blog">Terms of Service</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/my-website/blog">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="/my-website/blog">Legal Notices</a></li><li class="footer__item"><a class="footer__link-item" href="/my-website/blog">Sitemap</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Shanghai Max-Optics Information Technology Co.,Ltd</div></div></div></footer></div>
<script src="/my-website/assets/js/runtime~main.d91d42fe.js"></script>
<script src="/my-website/assets/js/main.4810e6c2.js"></script>
</body>
</html>