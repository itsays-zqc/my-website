"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5425],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>_});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),m=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=m(e.components);return n.createElement(o.Provider,{value:t},e.children)},s="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),s=m(a),g=r,_=s["".concat(o,".").concat(g)]||s[g]||k[g]||l;return a?n.createElement(_,i(i({ref:t},d),{},{components:a})):n.createElement(_,i({ref:t},d))}));function _(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=g;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[s]="string"==typeof e?e:r,i[1]=p;for(var m=2;m<l;m++)i[m]=a[m];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},14146:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>k,frontMatter:()=>l,metadata:()=>p,toc:()=>m});var n=a(87462),r=(a(67294),a(3905));const l={},i="Photodetector",p={unversionedId:"examples/SDK Examples/Active_Device/Photodetector",id:"examples/SDK Examples/Active_Device/Photodetector",title:"Photodetector",description:"This example introduces the modeling and optoelectronic simulation of a vertical Ge-Si photodetector.",source:"@site/docs/examples/SDK Examples/Active_Device/Photodetector.md",sourceDirName:"examples/SDK Examples/Active_Device",slug:"/examples/SDK Examples/Active_Device/Photodetector",permalink:"/my-website/docs/examples/SDK Examples/Active_Device/Photodetector",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/SDK Examples/Active_Device/Photodetector.md",tags:[],version:"current",frontMatter:{},sidebar:"examplesSidebar",previous:{title:"Modulator",permalink:"/my-website/docs/examples/SDK Examples/Active_Device/MOD/"}},o={},m=[{value:"1. Overview",id:"1-overview",level:2},{value:"2. Modeling",id:"2-modeling",level:2},{value:"2.1 Import simulation toolkit",id:"21-import-simulation-toolkit",level:3},{value:"2.2 Set general parameters",id:"22-set-general-parameters",level:3},{value:"2.3 Define the function for creating a new project",id:"23-define-the-function-for-creating-a-new-project",level:3},{value:"2.3.1 Create a new project",id:"231-create-a-new-project",level:4},{value:"2.3.2 Set materials",id:"232-set-materials",level:4},{value:"2.3.3 Create structures",id:"233-create-structures",level:4},{value:"2.3.4 Add doping",id:"234-add-doping",level:4},{value:"2.3.5 Add surface recombination",id:"235-add-surface-recombination",level:4},{value:"2.3.6 Set local mesh",id:"236-set-local-mesh",level:4},{value:"2.3.7 Set waveform",id:"237-set-waveform",level:4},{value:"2.3.8 Set optical sources",id:"238-set-optical-sources",level:4},{value:"2.3.9 Set monitors",id:"239-set-monitors",level:4},{value:"3. Simulation",id:"3-simulation",level:2},{value:"3.1 Dark current",id:"31-dark-current",level:3},{value:"3.1.1 Import simulation toolkit",id:"311-import-simulation-toolkit",level:4},{value:"3.1.2 Set general parameters",id:"312-set-general-parameters",level:4},{value:"3.1.3 Create a new project",id:"313-create-a-new-project",level:4},{value:"3.1.4 Add the solver",id:"314-add-the-solver",level:4},{value:"3.1.5 Add electrodes",id:"315-add-electrodes",level:4},{value:"3.1.6 Run the solver",id:"316-run-the-solver",level:4},{value:"3.1.7 Extract the result",id:"317-extract-the-result",level:4},{value:"3.1.8 Print the simulation time",id:"318-print-the-simulation-time",level:4},{value:"3.2 Resistance",id:"32-resistance",level:3},{value:"3.2.1 Simulate and extract the I-V curve",id:"321-simulate-and-extract-the-i-v-curve",level:4},{value:"3.2.2 Fit V-I curve to obtain resistance",id:"322-fit-v-i-curve-to-obtain-resistance",level:4},{value:"3.2.2.1 Read the saved I-V data",id:"3221-read-the-saved-i-v-data",level:5},{value:"3.2.2.2 Fit the data to obtain resistance",id:"3222-fit-the-data-to-obtain-resistance",level:5},{value:"3.2.2.3 Save data and plots",id:"3223-save-data-and-plots",level:5},{value:"3.3 Capacitance",id:"33-capacitance",level:3},{value:"3.4 Optical generation rate",id:"34-optical-generation-rate",level:3},{value:"3.4.1 Import simulation toolkit",id:"341-import-simulation-toolkit",level:4},{value:"3.4.2 Set general parameters",id:"342-set-general-parameters",level:4},{value:"3.4.3 Create a new project",id:"343-create-a-new-project",level:4},{value:"3.4.4 Add the solver",id:"344-add-the-solver",level:4},{value:"3.4.5 Run and extract the result",id:"345-run-and-extract-the-result",level:4},{value:"3.5 Photo current",id:"35-photo-current",level:3},{value:"3.5.1 Import simulation toolkit",id:"351-import-simulation-toolkit",level:4},{value:"3.5.2 Set general parameters",id:"352-set-general-parameters",level:4},{value:"3.5.3 Create a new project",id:"353-create-a-new-project",level:4},{value:"3.5.4 Add the solver",id:"354-add-the-solver",level:4},{value:"3.6 Bandwidth",id:"36-bandwidth",level:3},{value:"3.6.1 Import simulation toolkit",id:"361-import-simulation-toolkit",level:4},{value:"3.6.2 Set general parameters",id:"362-set-general-parameters",level:4},{value:"3.6.3 Create a new project",id:"363-create-a-new-project",level:4},{value:"3.6.4 Add the solver",id:"364-add-the-solver",level:4},{value:"3.6.4 Add electrodes",id:"364-add-electrodes",level:4},{value:"3.6.7 Extract the result",id:"367-extract-the-result",level:4},{value:"3.6.8 Postprocess",id:"368-postprocess",level:4},{value:"3.6.8.1 Obtain the impulse response",id:"3681-obtain-the-impulse-response",level:5},{value:"3.6.8.2 Export the impulse response result",id:"3682-export-the-impulse-response-result",level:5},{value:"3.6.8.3 Obtain the frequency response",id:"3683-obtain-the-frequency-response",level:5},{value:"3.6.8.4 Export the frequency response result",id:"3684-export-the-frequency-response-result",level:5},{value:"4. Appendix",id:"4-appendix",level:2},{value:"4.1 Electronic parameters of the materials",id:"41-electronic-parameters-of-the-materials",level:3},{value:"4.2 DDM settings",id:"42-ddm-settings",level:3},{value:"4.3 Electrode settings",id:"43-electrode-settings",level:3},{value:"4.3.1 Steady state boundary condition",id:"431-steady-state-boundary-condition",level:4},{value:"4.3.2 Transient boundary condition",id:"432-transient-boundary-condition",level:4}],d={toc:m},s="wrapper";function k(e){let{components:t,...l}=e;return(0,r.kt)(s,(0,n.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"photodetector"},"Photodetector"),(0,r.kt)("font",{face:"Calibri"},(0,r.kt)("div",{class:"text-justify"},(0,r.kt)("p",null,"This example introduces the modeling and optoelectronic simulation of a vertical Ge-Si photodetector."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"1-overview"},"1. Overview"),(0,r.kt)("p",null,"This example utilizes FDTD simulation to obtain the optical field distribution in the Ge absorption layer. Subsequently, the photo-induced carrier generation rate is calculated based on the optical field, which is then imported into the OEDevice simulation to obtain the photo current. We also provide scripts for dark current, capacitance and resistance, frequency response, and saturation power. These simulations are divided into separate scripts, and they all call a unified script for modeling and material setup, making it convenient for modifications and management."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"2-modeling"},"2. Modeling"),(0,r.kt)("p",null,"The modeling is completed by a callable function in the script file ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD00_structure.py"),"."),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"21-import-simulation-toolkit"},"2.1 Import simulation toolkit"),(0,r.kt)("p",null,"First, import ",(0,r.kt)("inlineCode",{parentName:"p"},"maxoptics_sdk")," and other packages."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[1]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import sys\n\n# encoding: utf-8\n\nfrom moapi.v3.aggregate import AggregatedUIService as Project\nimport maxoptics_sdk.all as mo\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nfrom typing import NamedTuple\nimport sys\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\nfrom VPD_material_Si import elec_Si_properties\nfrom VPD_material_Ge import elec_Ge_properties\n\n")),(0,r.kt)("p",null,"The script file ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD_material.py")," stores some modified electronic parameters of the materials, which are referenced to override default parameters in the modeling script."),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"22-set-general-parameters"},"2.2 Set general parameters"),(0,r.kt)("p",null,"Set some general parameters before modeling. At the beginning are those that need frequent modification during testing and optimization."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[2]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 0. General Parameters ---\nwavelength_center = 1.55    # um\nwavelength_span = 0.1   # um\ntemperature = 298.15    # K\nnormal_length = 20  # um\nGe_SiO2_recombination_velocity = 225000    # cm/s\nrun_mode = "local"\nsimu_name = "VPD02_Id"\n')),(0,r.kt)("p",null,"Wavelength, temperature, the mesh grid size and some other parameters are defined above. They will be detailed in the subsequent settings."),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[3]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# --- structure geometry ---\nSiO2_x_center = 0\nSiO2_x_span = 100\nSiO2_y_center = 0\nSiO2_y_span = 20\nSiO2_z_center = 0\nSiO2_z_span = 10\n\ninput_wg_x_center = -42.5\ninput_wg_length = 5\ninput_wg_width = 0.5\nSi_z_span = 0.22\nSi_y_center = 0\ntaper_x_min = input_wg_x_center+input_wg_length/2\ntaper_length = 40\ntaper_width = 4\n\nSi_slab_length = 22\nSi_slab_x_center = taper_x_min+taper_length+Si_slab_length/2\nSi_slab_width = 20\n\nGe_x_center = 10.75\nGe_x_span_bottom = 20\nGe_x_span_top = 19.5\nGe_y_span_bottom = 4\nGe_y_span_top = 3\nGe_z_span = 0.5\nGe_z_center = Si_z_span+Ge_z_span/2\n\nanode_x_center = 10.75\nanode_x_span = 19\nanode_y_center = 3.7\nanode_y_span_top = 2\nanode_y_span_bottom = 2\nanode_z_span = 1.37\nanode_z_center = Si_z_span+anode_z_span/2\n\ncathode_x_center = 10.75\ncathode_x_span = 19\ncathode_y_center = 0\ncathode_y_span_top = 2.2\ncathode_y_span_bottom = 2.2\ncathode_z_span = 1\ncathode_z_center = Si_z_span+Ge_z_span+cathode_z_span/2\n")),(0,r.kt)("p",null,"These are geometric parameters of the structures."),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[4]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-pyton"},"# --- electrical simulation boundary ---\noe_x_min = 10\noe_x_max = 10\noe_x_mean = 0.5*(oe_x_min+oe_x_max)\noe_x_span = oe_x_max-oe_x_min\n\noe_y_min = 0\noe_y_max = 3.7\noe_y_mean = 0.5*(oe_y_min+oe_y_max)\noe_y_span = oe_y_max-oe_y_min\n\noe_z_min = -0.15\noe_z_max = 1.25\noe_z_mean = 0.5*(oe_z_min+oe_z_max)\noe_z_span = oe_z_max-oe_z_min\n")),(0,r.kt)("p",null,"These are geometric parameters of the electrical simulation region."),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[5]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# --- doping parameters ---\np_uniform_x_center = 10.75\np_uniform_x_span = 22.5\np_uniform_y_center = 0\np_uniform_y_span = 15\np_uniform_z_center = Si_z_span/2\np_uniform_z_span = Si_z_span\np_uniform_con = 1e15\n\np_well_x_center = 10.75\np_well_x_span = 22.5\np_well_y_center = 0\np_well_y_span = 15\np_well_z_center = -0.035\np_well_z_span = 0.53\np_well_junction_width = 0.05\np_well_con = 7e18\n\np_pplus_x_center = 10.75\np_pplus_x_span = 22.5\np_pplus_y_center = 4.75\np_pplus_y_span = 4.5\np_pplus_z_center = 0.1675\np_pplus_z_span = 0.115\np_pplus_junction_width = 0.2\np_pplus_con = 3e19\n\nn_pplus_x_center = 10.75\nn_pplus_x_span = 19.7\nn_pplus_y_center = 0\nn_pplus_y_span = 3\nn_pplus_z_center = 0.72\nn_pplus_z_span = 0.02\nn_pplus_junction_width = 0.02\nn_pplus_con = 1e20\nn_pplus_ref = 1e16\n")),(0,r.kt)("p",null,"These are parameters for doping setup, including doping box, concentration and the diffusion junction width."),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[6]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# --- optical simulation boundary  ---\nx_min = -43  # light direction\nx_max = 21\nx_mean = 0.5*(x_min+x_max)\nx_span = x_max-x_min\n\ny_min = -3.2  # lateral\ny_max = 3.2\ny_mean = 0.5*(y_min+y_max)\ny_span = y_max-y_min\n\nz_min = -0.5  # vertical\nz_max = 1\nz_mean = 0.5*(z_min+z_max)\nz_span = z_max-z_min\n# endregion\n")),(0,r.kt)("p",null,"These are geometry parameters for the optical simulation region."),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"23-define-the-function-for-creating-a-new-project"},"2.3 Define the function for creating a new project"),(0,r.kt)("p",null,"A function is defined for creating a project, setting materials, modeling, doping, setting boundary conditions, etc., which can be called by other simulation script files."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[7]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"class RunOptions(NamedTuple):\n    high_field: bool\n    index_preview: bool\n    run: bool\n    extract: bool\n\ndef create_project(project_name, run_options: RunOptions) -> Project:\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"231-create-a-new-project"},"2.3.1 Create a new project"),(0,r.kt)("p",null,"Create a new simulation project."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[8]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"    # region --- 1. Project ---\n    pj = mo.Project(name=project_name, location=run_mode)\n    # endregion\n    return pj\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"mo.Project()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Project name, which is also the folder name for the project files to be saved."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"location"),"--The location of the computing resources. The active device simulation only support the option of ",(0,r.kt)("inlineCode",{parentName:"li"},'"local"')," currently, which means the simulation uses the local computing resources.")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"232-set-materials"},"2.3.2 Set materials"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[9]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'def create_structures(pj: Project, run_options: RunOptions):\n    # region --- 2. Material ---\n    mt = pj.Material()\n\n    if run_options.high_field:\n        elec_Ge_properties["mobility"]["mun"]["high_field"]["model"]="canali"\n        elec_Ge_properties["mobility"]["mup"]["high_field"]["model"]="canali"\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"pj.Material")," variable imported from ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD_material.py"),", storing the modified electronic parameters for Silicon and Germanium. The ",(0,r.kt)("inlineCode",{parentName:"p"},"material_property")," is used to determine which type of material parameters to choose. For details of the physics model and electronic parameter settings, please refer to the appendix."),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[10]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    mt.add_lib(name="mat_sio2", data=mo.OE_Material.SiO2, order=2)\n    mt.add_lib(name="mat_al", data=mo.OE_Material.Al, order=2, override={"work_function": 4.28})\n    mt.add_lib(name="mat_si", data=mo.OE_Material.Si, order=2, override=elec_Si_properties)\n    mt.add_lib(name="mat_ge", data=mo.OE_Material.Ge, order=2, override=elec_Ge_properties)   \n    mt["mat_al"].set_optical_material(data=mo.Material.PEC)\n    mt["mat_si"].set_optical_material(data=mo.Material.Si_Palik)\n    mt["mat_ge"].set_optical_material(data=mo.Material.Ge_Palik)\n    # endregion\n')),(0,r.kt)("p",null,"When adding materials, start by using the ",(0,r.kt)("inlineCode",{parentName:"p"},"add_lib")," function to add electrical materials from the material library."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"add_lib()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Custom material name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),"--Material data, requiring one of the built-in materials in the electrical material library, namely ",(0,r.kt)("inlineCode",{parentName:"li"},"mo.OE_Material")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"order"),"--",(0,r.kt)("inlineCode",{parentName:"li"},"mesh_order")," of the material, default to be 2"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"override"),"--Override the default electronic parameters by custom values. It's empty by default, which means default models and parameters are applied")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Then, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"set_optical_material")," function to set the optical property for the material."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"set_optical_material()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),"--Optical material property\uff0cwhich can be one of the built-in materials in the optical material library ",(0,r.kt)("inlineCode",{parentName:"li"},"mo.Material"),", or be from the custom optical material.")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Example of using custom optical material properties")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[11]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    mt.add_lib(name="mat_sio2", data=mo.OE_Material.SiO2, order=2)\n    mt["mat_sio2"].set_optical_material(data=mo.Material.SiO2_Palik)\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,"Note:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Although the electrical and optical material properties are bound together through a two-step setting, in reality, there is no inherent connection between them. For instance, it is possible to set both the electrical properties of SiO2 and the optical properties of Si for the same material. The simulation will not generate errors or warnings in such cases, so users need to determine by themselves whether the material settings align with physics.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The FDTD simulation currently doesn't support metal materials. Therefore, the optical property of metal materials should be set to ",(0,r.kt)("inlineCode",{parentName:"p"},"mo.Material.PEC")," and the material name should also be ",(0,r.kt)("inlineCode",{parentName:"p"},'"pec"'),"."))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"233-create-structures"},"2.3.3 Create structures"),(0,r.kt)("p",null,"First, initialize an object of ",(0,r.kt)("inlineCode",{parentName:"p"},"pj.Structure()"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[12]\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pj.Structure()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mesh_type"),"--Type of mesh refinement for optical simulation"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mesh_factor"),"--The grading factor of non-uniform grid"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"background_material"),"--Background material")),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[13]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 3. Structure ---\n    st = pj.Structure()\n\n    st.add_geometry(name="BOX", type="Rectangle", property={\n        "material": {"material": mt["mat_sio2"]},\n        "geometry": {"x": SiO2_x_center, "x_span": SiO2_x_span, "y": SiO2_y_center, "y_span": SiO2_y_span, "z_min": -SiO2_z_span/2, "z_max": SiO2_z_center}})\n\n    st.add_geometry(name="SOX", type="Rectangle", property={\n        "material": {"material": mt["mat_sio2"]},\n        "geometry": {"x": SiO2_x_center, "x_span": SiO2_x_span, "y": SiO2_y_center, "y_span": SiO2_y_span, "z_min": SiO2_z_center, "z_max": SiO2_z_span/2}})\n    \n    st.add_geometry(name="Si_input", type="Rectangle", property={\n        "material": {"material": mt["mat_si"]},\n        "geometry": {"x": input_wg_x_center, "x_span": input_wg_length, "y": Si_y_center, "y_span": input_wg_width, "z": Si_z_span/2, "z_span": Si_z_span}})\n\n    st.add_geometry(name="Si_taper", type="LinearTrapezoid", property={\n        "material": {"material": mt["mat_si"]},\n        "geometry": {"control_points":\n                        [{"x": -40, "y": -0.25},\n                         {"x": -40, "y": 0.25}, \n                         {"x": 0, "y": 2}, \n                         {"x": 0, "y": -2}],\n                    "z_min": 0, "z_max": 0.22, "x": 0, "y": 0}})\n\n    st.add_geometry(name="Si_base", type="Rectangle", property={\n        "material": {"material": mt["mat_si"]},\n        "geometry": {"x": Si_slab_x_center, "x_span": Si_slab_length, "y": Si_y_center, "y_span": Si_slab_width, "z": Si_z_span/2, "z_span": Si_z_span}})\n\n    st.add_geometry(name="Ge", type="Pyramid", property={\n        "material": {"material": mt["mat_ge"]},\n        "geometry": {"x": Ge_x_center, "x_span_bottom": Ge_x_span_bottom, "x_span_top": Ge_x_span_top,\n                     "y": 0, "y_span_bottom": Ge_y_span_bottom, "y_span_top": Ge_y_span_top, "z": Ge_z_center, "z_span": Ge_z_span}})\n\n    st.add_geometry(name="Cathode", type="Pyramid", property={\n        "material": {"material": mt["mat_al"]},\n        "geometry": {"x": cathode_x_center, "x_span_bottom": cathode_x_span, "x_span_top": cathode_x_span,\n                     "y": cathode_y_center, "y_span_bottom": cathode_y_span_bottom, "y_span_top": cathode_y_span_top,\n                     "z": cathode_z_center, "z_span": cathode_z_span}})\n\n    st.add_geometry(name="Anode", type="Pyramid", property={\n        "material": {"material": mt["mat_al"]},\n        "geometry": {"x": anode_x_center, "x_span_bottom": anode_x_span, "x_span_top": anode_x_span,\n                     "y": anode_y_center, "y_span_bottom": anode_y_span_bottom, "y_span_top": anode_y_span_top,\n                     "z": anode_z_center, "z_span": anode_z_span}})\n    # endregion\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"add_geometry()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Structure name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),"--Structure type"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties, listed below")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Rectangle")," property list\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_x"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_z"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material.material"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"material"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material.mesh_order"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"LinearTrapezoid")," property list\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_1_x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_1_y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_2_x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_2_y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_3_x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_3_y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_4_x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.point_4_y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_x"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_z"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material.material"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"material"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material.mesh_order"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Pyramid")," property list\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span_bottom"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span_bottom"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span_top"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span_top"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.theta_x"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.theta_y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_x"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_y"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_z"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material.material"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"material"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material.mesh_order"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")))),(0,r.kt)("br",null),(0,r.kt)("p",null,"Note:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"mesh_order")," of a structure is default to be the mesh order of its material. And the default value will be overridden when the structure's ",(0,r.kt)("inlineCode",{parentName:"li"},"mesh_order")," is set explicitly."),(0,r.kt)("li",{parentName:"ol"},"The larger of the ",(0,r.kt)("inlineCode",{parentName:"li"},"mesh_order")," of a structure, the higher of its priority. With ",(0,r.kt)("inlineCode",{parentName:"li"},"mesh_order")," of two structures being the same, the structure created later has a higher priority than the one created earlier. When structures overlap, the one with higher priority overrides the one with lower priority.")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"234-add-doping"},"2.3.4 Add doping"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[14]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'def add_ddm_settings(pj: Project, run_options: RunOptions):\n    mt = pj.Material()\n    st = pj.Structure()\n    # region --- 4. DDM:Doping ---\n    dp = pj.Doping()\n    dp.add(name="p_uniform", type="constant_doping", property={\n        "dopant": {"dopant_type": "p", "concentration": p_uniform_con},\n        "geometry": {"x": p_uniform_x_center, "x_span": p_uniform_x_span,\n                     "y": p_uniform_y_center, "y_span": p_uniform_y_span,\n                     "z": p_uniform_z_center, "z_span": p_uniform_z_span,\n                     "applicable_regions": "all_regions",\n                     },})\n    \n    dp.add(name="p_well", type="diffusion_doping", property={\n        "dopant": {"dopant_type": "p", "concentration": p_well_con, "ref_concentration": 1e6,\n                   "source_face": "upper_z", "diffusion_function":"gaussian","junction_width": p_well_junction_width,},\n        "geometry": {"x": p_well_x_center, "x_span": p_well_x_span, \n                     "y": p_well_y_center, "y_span": p_well_y_span,\n                     "z": p_well_z_center, "z_span": p_well_z_span,\n                     "applicable_regions": "all_regions",\n                     },})\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"add_doping()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Doping name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),"--Doping type. Options are ",(0,r.kt)("inlineCode",{parentName:"li"},'"n"')," or ",(0,r.kt)("inlineCode",{parentName:"li"},'"p"')," for n-type, p-type doping respectively"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("p",null,"According to the selection of ",(0,r.kt)("inlineCode",{parentName:"p"},"general.type"),", doping is divided into constant doping and gaussian doping. Detailed properties are listed below."),(0,r.kt)("br",null),(0,r.kt)("p",null,"Doping property list:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.rotate_z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.type"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"str"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['constant', 'gaussian']")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.concentration"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.source_face"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"str"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when type is 'gaussian'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.junction_width"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when type is 'gaussian'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.ref_concentration"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when type is 'gaussian'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.applicable_regions"),(0,r.kt)("td",{parentName:"tr",align:"left"},"'all_regions'"),(0,r.kt)("td",{parentName:"tr",align:"left"},"str"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['all_regions', 'material', 'region']")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.material_list"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"list"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when geometry.applicable_regions is 'material'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.solid_list"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"list"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when geometry.applicable_regions is 'region'")))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometry"),"--Set the geometry parameters of doping box")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),"--Set the distribution function, concentration and so on"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"constant"'),", only ",(0,r.kt)("inlineCode",{parentName:"li"},"concentration")," is required"),(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"gaussian"'),": ",(0,r.kt)("inlineCode",{parentName:"li"},"concentration"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"ref_concentration"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"junction_width"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"source_face")," are required"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"concentration"),"--Concentration in the non-diffusion area"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ref_concentration"),"--Concentration on the edge of diffusion area (edge of doping box)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"junction_width"),"--Diffusion junction width"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"source_face"),"--The doping source face. Options are ",(0,r.kt)("inlineCode",{parentName:"li"},'"lower_x"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"lower_y"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"lower_z"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"upper_x"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"upper_y"')," or ",(0,r.kt)("inlineCode",{parentName:"li"},'"upper_z"'),". ",(0,r.kt)("inlineCode",{parentName:"li"},'"lower_x"')," means the source face is ",(0,r.kt)("inlineCode",{parentName:"li"},"x=x_min"),". Similarly for the rest. There is no diffusion area on the edge of source face. As for the other edges, there is a diffusion area within the doping box."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"applicable_regions"),"--Set a list of regions or materials to be doped"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometry.applicable_regions"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"all_regions"'),"(by default)\uff0cthe doping is applied to all the (semiconductor) structures, restricted by the doping box")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"material"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},"material_list")," is required, which means the doping is applied to the structures with one of the specified materials and restricted by the doping box")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"solid"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},"solid_list")," is required, which means the doping is applied to the specified structures and restricted by the doping box"))))))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Examples for complete doping setting syntax")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[15]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    dp.add(name="p_pplus", type="diffusion_doping", property={\n        "dopant": {"dopant_type": "p", "concentration": p_pplus_con, "ref_concentration": 1e6,\n                   "source_face": "upper_z", "diffusion_function":"gaussian","junction_width": p_pplus_junction_width},\n        "geometry": {"x": p_pplus_x_center, "x_span": p_pplus_x_span, \n                     "y": p_pplus_y_center, "y_span": p_pplus_y_span,\n                     "z": p_pplus_z_center, "z_span": p_pplus_z_span,\n                     "applicable_regions": "all_regions",\n                     },})\n    dp.add(name="n_pplus", type="diffusion_doping", property={\n        "dopant": {"dopant_type": "n", "concentration": n_pplus_con, "ref_concentration": n_pplus_ref,\n                   "source_face": "upper_z", "diffusion_function":"gaussian","junction_width": n_pplus_junction_width},\n        "geometry": {"x": n_pplus_x_center, "x_span": n_pplus_x_span, \n                     "y": n_pplus_y_center, "y_span": n_pplus_y_span,\n                     "z": n_pplus_z_center, "z_span": n_pplus_z_span,\n                     "applicable_regions": "all_regions",\n                     },})\n    # endregion\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"235-add-surface-recombination"},"2.3.5 Add surface recombination"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[16]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 5. DDM:Surface Recombination ---\n    bd = pj.BoundaryCondition()\n    bd.add(name="Cathode_Ge", type="surface_recombination", property={\n        "general": {"electron": {"s0": 1e7},\n                    "hole": {"s0": 1e7}},\n        "geometry": {"surface_type": "solid_solid",  \n                     "solid_1": st["Cathode"],\n                     "solid_2": st["Ge"],\n                     }\n    })\n    bd.add(name="Anode_Si", type="surface_recombination", property={\n        "general": {"electron": {"s0": 1e7},\n                    "hole": {"s0": 1e7}},\n        "geometry": {"surface_type": "solid_solid",  \n                     "solid_1": st["Anode"],\n                     "solid_2": st["Si_base"],\n                     }\n    })\n    bd.add(name="Ge_SiO2", type="surface_recombination", property={\n        "general": {"electron": {"s0": Ge_SiO2_recombination_velocity},\n                    "hole": {"s0": Ge_SiO2_recombination_velocity}},\n        "geometry": {"surface_type": "solid_solid",  \n                     "solid_1": st["SOX"],\n                     "solid_2": st["Ge"],\n                     }\n    })\n    # endregion\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"add_surface_recombination()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Custom name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Surface recombination property list:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"surface_type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"solid_solid"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['solid_solid', 'material_material']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.hole.s0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Surface recombination velocity of holes.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.electron.s0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"-Surface recombination velocity of electrons.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"solid_1"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when surface_type is 'solid_solid'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"solid_2"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when surface_type is 'solid_solid'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material_1"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"material"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when surface_type is 'material_material'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"material_2"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"material"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when surface_type is 'material_material'")))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"surface_type"),"--Type of selection for the surface"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When ",(0,r.kt)("inlineCode",{parentName:"li"},"surface_type")," is ",(0,r.kt)("inlineCode",{parentName:"li"},'"solid_solid"'),", the surface is the interface between two structures "),(0,r.kt)("li",{parentName:"ul"},"When ",(0,r.kt)("inlineCode",{parentName:"li"},"surface_type"),' is "material_material"`, the surface is the interface between two materials'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"hole.s0"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"electron.s0"),"--Surface recombination velocity of holes and electrons. ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"solid_1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"solid_2"),"--Names of the two structures at the interface. They must be set explicitly when ",(0,r.kt)("inlineCode",{parentName:"p"},"surface_type")," is ",(0,r.kt)("inlineCode",{parentName:"p"},'"solid_solid"'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"material_1"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"material_2"),"--The two materials at the interface. They must be set explicitly when ",(0,r.kt)("inlineCode",{parentName:"p"},"surface_type")," is ",(0,r.kt)("inlineCode",{parentName:"p"},'"material_material"')))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"236-set-local-mesh"},"2.3.6 Set local mesh"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[19]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- 6. DDM:Mesh ---\n    lm = pj.LocalMesh()\n    \n    lm.add(name="EMesh_Ge", type="EMesh", property={\n        "general": {"mesh_size": 0.01},\n        "geometry": {"geometry_type": "solid", "solid": st["Ge"]}\n    })\n    lm.add(name="EMesh_Si", type="EMesh", property={\n        "general": {"mesh_size": 0.02},\n        "geometry": {"geometry_type": "solid", "solid": st["Si_base"]}\n    })\n    lm.add(name="Ge_Boundary", type="EMesh", property={\n        "general": {"mesh_size": 0.002},\n        "geometry": {"geometry_type": "solid_solid", \n                     "solid_1": st["Ge"],\n                     "solid_2": st["Ge"],\n                     "growth_ratio": 2}\n    })\n\n    lm.add(name="Si_Boundary", type="EMesh", property={\n        "general": {"mesh_size": 0.002},\n        "geometry": {"geometry_type": "solid_solid", \n                     "solid_1": st["Si_base"],\n                     "solid_2": st["Si_base"],\n                     "growth_ratio": 2}\n    })\n    # endregion\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emesh")," set a rectangle region for local mesh of electrical simulation. Parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Custom name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("br",null),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"}),(0,r.kt)("th",{parentName:"tr",align:"center"},"default"),(0,r.kt)("th",{parentName:"tr",align:"center"},"type"),(0,r.kt)("th",{parentName:"tr",align:"center"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"general.mesh_size"),(0,r.kt)("td",{parentName:"tr",align:"center"},"0.01"),(0,r.kt)("td",{parentName:"tr",align:"center"},"float"),(0,r.kt)("td",{parentName:"tr",align:"center"},"The minimum value of the local mesh region.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"general.geometry_type"),(0,r.kt)("td",{parentName:"tr",align:"center"},"directly defined"),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:"center"},"Selections are ","['directly defined', 'solid','solid_solid']")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"solid_solid"),(0,r.kt)("td",{parentName:"tr",align:"center"}),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:"center"},"Names of the two structures at the interface.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"solid_1"),(0,r.kt)("td",{parentName:"tr",align:"center"}),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:"center"},"Available when geometry_type is 'solid_solid'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"solid_2"),(0,r.kt)("td",{parentName:"tr",align:"center"}),(0,r.kt)("td",{parentName:"tr",align:"center"},"string"),(0,r.kt)("td",{parentName:"tr",align:"center"},"Available when geometry_type is 'solid_solid'")))),(0,r.kt)("p",null,"Local mesh of electrical simulation in rectangle region property list, when ",(0,r.kt)("inlineCode",{parentName:"p"},"geometry_type")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"directly defined"),":"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"mesh_size"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"max size of electrical simulation mesh")))),(0,r.kt)("p",null,"Note:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"When the simulation region is in the xy plane, only the parameters in the x, y direction are effective, and parameters in the z direction will be ignored. Similarly for the rest.")),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    # region --- 10. FDTD:Mesh ---\n    lm = pj.LocalMesh()\n    lm.add(name="Mesh_Ge", type="Mesh", property={\n        "general": {"dz": 0.02},\n        "geometry": {"x": -42, "x_span": 0, "y": 0, "y_span": 0, "z": 0.47, "z_span": 0.5}\n    })\n    lm.add(name="Mesh_Si", type="Mesh", property={\n        "general": {"dz": 0.025},\n        "geometry": {"x": -42, "x_span": 0, "y": 0, "y_span": 0, "z": 0.11, "z_span": 0.22}\n    })\n    # endregion\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Mesh")," set the local mesh for optical simulation, parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Custom name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Optical local mesh property list:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.dx"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.dy"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.dz"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometry"),"--Set the region of local mesh. When ",(0,r.kt)("inlineCode",{parentName:"p"},"x_span")," doesn't vanish, the mesh setting will be applied to the range along the x axis. Similarly for the rest")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),"--Set the mesh size in the corresponding direction"))),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"237-set-waveform"},"2.3.7 Set waveform"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[17]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def add_fdtd_settings(pj: Project, run_options: RunOptions):\n    waveform_name = f\"wv{wavelength_center*1e3}\"\n\n    # region --- 7. FDTD:Waveform ---\n    wv = pj.Waveform()\n    wv.add(name=waveform_name, type='gaussian_waveform',\n           property={'set': 'frequency_wavelength',  \n                     'set_frequency_wavelength': {\n                            'range_type': 'wavelength',  \n                            'range_limit': 'center_span', \n                            'wavelength_center': wavelength_center,\n                            'wavelength_span': wavelength_span,\n                     },\n                     }\n           )\n    # endregion\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pj.Waveform()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Name of the waveform"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"range_type"),"-- Selections are ",(0,r.kt)("inlineCode",{parentName:"li"},"frequency")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"wavelength")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"wavelength_center"),"--Center of wavelength"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"wavelength_span"),"--Span of wavelength")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"238-set-optical-sources"},"2.3.8 Set optical sources"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[20]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    # region --- 8. FDTD:ModeSource ---\n    src = pj.Source()\n    if run_options.run:\n        src.add(name="source", type="mode_source",\n                property={"general": {"inject_axis": "x_axis", "direction": "forward",\'amplitude\': 1, \'phase\': 0,\n                    "waveform": {"waveform_id": wv[waveform_name]},   \n                    "mode_selection": "user_select",\'mode_index\': 0,\'rotations\': {\'theta\': 0, \'phi\': 0, \'rotation_offset\': 0}},\n                    "geometry": {"x": x_min + 1, "x_span": 0, "y": y_mean, "y_span": y_span, "z": z_mean, "z_span": z_span},\n                    "modal_analysis": {"mode_removal": {"threshold": 0.01}}})\n    # endregion\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pj.Source()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Name of the source"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),"--Type of the source. It is mode source in this example"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"inject_axis"),"--Direction of the source. ",(0,r.kt)("inlineCode",{parentName:"li"},'"x_axis"')," means light propagating along x axis and in the direction of increasing x coordinate. ",(0,r.kt)("inlineCode",{parentName:"li"},'"x_axis"')," means the opposite direction. Similarly for the rest")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Mode source property list:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.amplitude"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.phase"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0.0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.mode_selection"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['fundamental', 'fundamental_TE', 'fundamental_TM', 'fundamental_TE_and_TM', 'user_select', 'user_import']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.mode_index"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.search"),(0,r.kt)("td",{parentName:"tr",align:"left"},"max_index"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['near_n', 'max_index']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.n"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.number_of_trial_modes"),(0,r.kt)("td",{parentName:"tr",align:"left"},"20"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.waveform.waveform_id_select"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"any"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.rotations.theta"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.rotations.phi"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.rotations.rotation_offset"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"bent_waveguide.bent_waveguide"),(0,r.kt)("td",{parentName:"tr",align:"left"},"false"),(0,r.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"bent_waveguide.radius"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"bent_waveguide.orientation"),(0,r.kt)("td",{parentName:"tr",align:"left"},"20"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"bent_waveguide.location"),(0,r.kt)("td",{parentName:"tr",align:"left"},"simulation_center"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['simulation_center']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometray"),"--Set geometric parameters of optical source")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"bent_waveguide"),"--Set parameters related to bent waveguide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),"\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mode_selection"),"--Set the type of selection for the eigen mode. When it is ",(0,r.kt)("inlineCode",{parentName:"li"},'"user_select"'),", the mode of index in ",(0,r.kt)("inlineCode",{parentName:"li"},"mode_index")," is selected"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"waveform"),"--Set the waveform of the source",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"waveform_id_select"),"--Set to be a specified waveform")))))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"239-set-monitors"},"2.3.9 Set monitors"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[21]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    # region --- 9. FDTD:Monitor ---\n\n    mn = pj.Monitor()\n    mn.add(name="power_monitor", type="power_monitor",\n           property={"general": {"frequency_profile": {"wavelength_center": wavelength_center, "wavelength_span": 0.1, "frequency_points": 5, }, },\n                     "geometry": {"monitor_type": "3d", "x": 10.75, "x_span": 20, "y": 0, "y_span": 4, "z": 0.47, "z_span": 0.5}})\n    mn.add(name="y=0", type="power_monitor",\n           property={"general": {"frequency_profile": {"wavelength_center": wavelength_center, "wavelength_span": 0.1, "frequency_points": 5, }, },\n                     "geometry": {"monitor_type": "2d_y_normal", "x": 10.75, "x_span": 20, "y": 0, "y_span": 0, "z": 0.47, "z_span": 0.5}})\n    mn.add(name="z=0.47", type="power_monitor",\n           property={"general": {"frequency_profile": {"wavelength_center": wavelength_center, "wavelength_span": 0.1, "frequency_points": 5, }, },\n                     "geometry": {"monitor_type": "2d_z_normal", "x": 10.75, "x_span": 20, "y": 0, "y_span": 4, "z": 0.47, "z_span": 0}})\n\n    # endregion\n')),(0,r.kt)("p",null,"The monitor ",(0,r.kt)("inlineCode",{parentName:"p"},'"Power Monitor"')," is of the 3D type, set to record the optical field profile in the ",(0,r.kt)("inlineCode",{parentName:"p"},'"Ge"')," structure, which will be used to calculate the optical generation rate. The monitors ",(0,r.kt)("inlineCode",{parentName:"p"},'"y=0"')," and ",(0,r.kt)("inlineCode",{parentName:"p"},'"z=0.47"')," are both of the 2D type, set to visualize the optical field profile at the specified cross-sections."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"mn.add()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Name of the monitor"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"type"),"--Type of the monitor"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Power monitor property list:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.sample_spacing"),(0,r.kt)("td",{parentName:"tr",align:"left"},"uniform"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['uniform']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.use_wavelength_spacing"),(0,r.kt)("td",{parentName:"tr",align:"left"},"true"),(0,r.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.spacing_type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"wavelength"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['wavelength', 'frequency']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.wavelength_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.wavelength_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.wavelength_center"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.wavelength_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.frequency_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.frequency_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.frequency_center"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.frequency_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.frequency_profile.frequency_points"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.monitor_type"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['point', 'linear_x', 'linear_y', 'linear_z', '2d_x_normal', '2d_y_normal', '2d_z_normal', '3d']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Restrained by condition: >=0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.sampling_frequency.min_sampling_per_cycle"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometry"),"--Set the geometric parameters of the monitor, including the dimension and the size")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),"--Set the frequency points of the monitor"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency_profile"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"use_wavelength_spacing"),"--Default to be ",(0,r.kt)("inlineCode",{parentName:"p"},"True"),". When it' ",(0,r.kt)("inlineCode",{parentName:"p"},"True"),", the frequency points in sampled in wavelength, otherwise, in frequency.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"spacing_type"),"--Default to be ",(0,r.kt)("inlineCode",{parentName:"p"},'"wavelength"'),". When it's ",(0,r.kt)("inlineCode",{parentName:"p"},'"wavelength"'),", the frequency range is set in wavelength; When it's ",(0,r.kt)("inlineCode",{parentName:"p"},'"frequency"'),", the frequency range is set in frequency")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency_points"),"--Number of frequency points"))))))),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"3-simulation"},"3. Simulation"),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"31-dark-current"},"3.1 Dark current"),(0,r.kt)("p",null,"This section performs the simulation of dark current in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD0A_Id.py")," script by invoking the ",(0,r.kt)("inlineCode",{parentName:"p"},"pd_project")," function."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"311-import-simulation-toolkit"},"3.1.1 Import simulation toolkit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[26]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import sys\n\n# encoding: utf-8\n\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nfrom typing import NamedTuple\nimport sys\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\nfrom VPD00_structure import *\n")),(0,r.kt)("p",null,"All the variables and functions from ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD00_structure.py")," are imported."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"312-set-general-parameters"},"3.1.2 Set general parameters"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[27]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'@timed\n@with_path\ndef simulation(*, run_options: "RunOptions", **kwargs, ):\n    # region --- 0. General Parameter ---\n\n    vsource = "Cathode"\n    gnd = "Anode"\n\n    sweep_vstart = 0\n    sweep_vstop = 4\n    sweep_vstep = 0.5\n\n    path = kwargs["path"]\n    simu_name = "VPD0A_Id"\n    time_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\n    project_name = f"{simu_name}_local_{time_str}"\n    plot_path = f"{path}/plots/{project_name}/"\n    current_file_path = os.path.abspath(__file__)\n\n    # endregion\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"313-create-a-new-project"},"3.1.3 Create a new project"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[28]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 1. Project ---\n    pj: Project = create_project(project_name, run_options)\n    # endregion\n     create_structures(pj, run_options)\n\n    mt = pj.Material()\n    st = pj.Structure()\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"314-add-the-solver"},"3.1.4 Add the solver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[30]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},' # region --- 2. Simulation ---\n    simu = pj.Simulation()\n    simu.add(name=simu_name, type="DDM", property={\n        "background_material": mt["mat_sio2"], \n        "general": {"solver_mode": "steady_state", \n                    "norm_length": 20,\n                    "temperature_dependence": "isothermal",\n                    "temperature": 298.15,\n                    },\n        "geometry": {"dimension": "2d_x_normal", "x": 10, "x_span": 0, "y_min": 0, "y_max": 3.7, "z_min": -0.15, "z_max": 1.25},\n        "mesh_settings": {"mesh_size": 0.06},\n        "advanced": {"non_linear_solver": "newton",\n                     "linear_solver": "mumps",\n                     "fermi_statistics": "disabled", # or "enabled"\n                     "damping": "potential", # or "none"\n                     "potential_update": 1.0,\n                     "max_iterations": 15,\n                     "relative_tolerance": 1e-5,\n                     "tolerance_relax": 1e5,\n                     "divergence_factor": 1e25\n                     }\n    })\n\n    # endregion\n')),(0,r.kt)("p",null,"Description:"),(0,r.kt)("p",null,"The detailed property list of ",(0,r.kt)("inlineCode",{parentName:"p"},"DDM")," solver can be found in the appendix. "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometry"),"--Set the geometric parameters for the simulation region"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dimension"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"li"},"2d_x_normal"),", which means the simulation is in the yz plane"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"norm_length"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"li"},"normal_length"),", which is ",(0,r.kt)("inlineCode",{parentName:"li"},"20"),", meaning that the size of the device in the third dimension is 20\u03bcm. That is to say its length in the x-direction is 20\u03bcm"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"solver_mode"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"steady_state"'),", which means a steady state simulation")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"315-add-electrodes"},"3.1.5 Add electrodes"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[29]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'\n\n    # region --- 3. Simulation Settings ---\n    add_ddm_settings(pj, run_options)\n\n    bd = pj.BoundaryCondition()\n\n    bd.add(name=vsource,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[vsource]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": sweep_vstart, "range_stop": sweep_vstop, "range_step": sweep_vstep,\n                    "apply_ac_small_signal": "none", \n                    "envelop": "uniform",\n                    }\n    })\n    bd.add(name=gnd,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[gnd]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "single", "voltage": 0,\n                    "apply_ac_small_signal": "none",\n                    "envelop": "uniform",\n                    }\n    })\n\n    # endregion\n\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pj.BoundaryCondition()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Name of the electrode"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("p",null,"The detailed property list of electrode can be found in the appendix. Here a range of voltage from 0V to 4V is applied to the electrode ",(0,r.kt)("inlineCode",{parentName:"p"},'"cathode"'),", and the step of the voltage is 0.5V."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"316-run-the-solver"},"3.1.6 Run the solver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[31]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    # region --- 4. Run ---\n    if run_options.run:\n        result_ddm = simu[simu_name].run(\n            # resources={"compute_resources": "gpu", "gpu_devices": [{"id": 0}]}\n        )\n    # endregion\n\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"result_device")," stores the information of the simulation result, which can be used to perform result extraction."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"317-extract-the-result"},"3.1.7 Extract the result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[32]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# --- Extract ---\n# region --- 5. Extract ---\n    if run_options.extract:\n        export_options = {"export_csv": True,\n                          "export_mat": True, "export_zbf": True}\n        slice_options = {f"v_{gnd.lower()}": 0.0}\n\n        result_ddm.extract(data="ddm:electrode", electrode_name=vsource, savepath=f"{plot_path}I_{vsource}",\n                           target="line", attribute="I", plot_x=f"v_{vsource.lower()}", real=True, imag=False, log=False, show=False, **slice_options, export_csv=True\n                           )  # attribute = "I", "In", "Ip", "Id", "Vs"\n    # endregion\n\n\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"run_options.extract()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),"--Type of the result. Here it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"I"')," to extract the I-V curve from the simulation result"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"electrode_name"),"--Name of an electrode, which means the current data is from the electrode"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"export_csv"),"--Whether to export the csv result"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"show"),"--Whether to show the plot in a popup window"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"savepath"),"--The save path for the result extraction")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the dark current extraction")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Dark Current",src:a(87836).Z,width:"640",height:"480"})),(0,r.kt)("center",null,"Fig 3. Dark Current"),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"318-print-the-simulation-time"},"3.1.8 Print the simulation time"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[33]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    return project_name\nif __name__ == "__main__":\n    simulation(run_options=RunOptions(high_field=False, index_preview=False, run=True, extract=True))\n')),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"32-resistance"},"3.2 Resistance"),(0,r.kt)("p",null,"This simulation applies a forward bias to the electrode ",(0,r.kt)("inlineCode",{parentName:"p"},'"anode"'),". And then the I-V curve is extracted and fitted to obtain the resistance. The script is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD0C_Rs.py")," file."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"321-simulate-and-extract-the-i-v-curve"},"3.2.1 Simulate and extract the I-V curve"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[34]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'import sys\n\n# encoding: utf-8\n\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nimport sys\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\nfrom VPD00_structure import *\n\n\n@timed\n@with_path\ndef simulation(*, run_options: "RunOptions", **kwargs, ):\n    # region --- 0. General Parameter ---\n\n    vsource = "Anode"\n    gnd = "Cathode"\n\n    sweep_vstart = 0\n    sweep_vstop = 1.5\n    sweep_vstep = 0.25\n\n    path = kwargs["path"]\n    simu_name = "VPD0C_Rs"\n    time_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\n    project_name = f"{simu_name}_local_{time_str}"\n    plot_path = f"{path}/plots/{project_name}/"\n    current_file_path = os.path.abspath(__file__)\n\n    # endregion\n    # region --- 1. Project ---\n    pj: Project = create_project(project_name, run_options)\n    # endregion\n    create_structures(pj, run_options)\n\n    mt = pj.Material()\n    st = pj.Structure()\n\n\n    # region --- 2. Simulation ---\n    simu = pj.Simulation()\n    simu.add(name=simu_name, type="DDM", property={\n        "background_material": mt["mat_sio2"], \n        "general": {"solver_mode": "steady_state", \n                    "norm_length": 20,\n                    "temperature_dependence": "isothermal",\n                    "temperature": 298.15,\n                    },\n        "geometry": {"dimension": "2d_x_normal", "x": 10, "x_span": 0, "y_min": 0, "y_max": 3.7, "z_min": -0.15, "z_max": 1.25},\n        "mesh_settings": {"mesh_size": 0.06},\n        "advanced": {"non_linear_solver": "newton",\n                     "linear_solver": "mumps",\n                     "fermi_statistics": "disabled", # or "enabled"\n                     "damping": "potential", # or "none"\n                     "potential_update": 1.0,\n                     "max_iterations": 15,\n                     "relative_tolerance": 1e-5,\n                     "tolerance_relax": 1e5,\n                     "divergence_factor": 1e25\n                     }\n    })\n\n    # endregion\n\n    # region --- 3. Electrode ---\n\n    add_ddm_settings(pj, run_options)\n\n    bd = pj.BoundaryCondition()\n\n    bd.add(name=vsource,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[vsource]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": sweep_vstart, "range_stop": sweep_vstop, "range_step": sweep_vstep,\n                    "apply_ac_small_signal": "none", \n                    "envelop": "uniform",\n                    }\n    })\n    bd.add(name=gnd,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[gnd]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "single", "voltage": 0,\n                    "apply_ac_small_signal": "none",\n                    "envelop": "uniform",\n                    }\n    })\n\n    # endregion\n\n\n\n    # region --- 4. Run ---\n    if run_options.run:\n        result_ddm = simu[simu_name].run(\n            # resources={"compute_resources": "gpu", "gpu_devices": [{"id": 0}]}\n        )\n    # endregion\n\n\n    # region --- 5. Extract ---\n    if run_options.extract:\n        export_options = {"export_csv": True,\n                          "export_mat": True, "export_zbf": True}\n        slice_options = {f"v_{gnd.lower()}": 0.0}\n\n        result_ddm.extract(data="ddm:electrode", electrode_name=vsource, savepath=f"{plot_path}I_{vsource}",\n                           target="line", attribute="I", plot_x=f"v_{vsource.lower()}", real=True, imag=False, log=False, show=False, **slice_options, export_csv=True\n                           )  # attribute = "I", "In", "Ip", "Id", "Vs"\n    # endregion\n')),(0,r.kt)("p",null,"A range of voltage from 0V to 1.5V is applied to the electrode ",(0,r.kt)("inlineCode",{parentName:"p"},'"anode"'),", with a step of 0.25V. No optical generation rate is applied. And a steady state simulation is performed to extract the I-V curve, which is saved to the folder ",(0,r.kt)("inlineCode",{parentName:"p"},"IV_file_folder"),"."),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the I-V curve"),"\n",(0,r.kt)("img",{alt:"I-V curve",src:a(18194).Z,width:"640",height:"480"})),(0,r.kt)("center",null,"Fig 4. I-V curve"),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"322-fit-v-i-curve-to-obtain-resistance"},"3.2.2 Fit V-I curve to obtain resistance"),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3221-read-the-saved-i-v-data"},"3.2.2.1 Read the saved I-V data"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[35]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# region --- calculate R ---\n        Vdc = np.genfromtxt(f"{plot_path}I_Anode.csv",skip_header=1,delimiter=",")[:,0]\n        Idc = np.genfromtxt(f"{plot_path}I_Anode.csv",skip_header=1,delimiter=",")[:,1]\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},'"0_I_Real.csv"')," is filename generated automatically of the I-V result. The ",(0,r.kt)("inlineCode",{parentName:"p"},'"0"')," in the beginning indicates the index of the electrode. When the I-V curve is from a different electrode, the index will change. Therefore, a iteration from 0 to 9 is applied to find the saved I-V data file."),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3222-fit-the-data-to-obtain-resistance"},"3.2.2.2 Fit the data to obtain resistance"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[36]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"        start_idx = len(Vdc)//2\n        coeffs = np.polyfit(Idc[start_idx:], Vdc[start_idx:], 1)\n        V_fit = coeffs[0]*Idc + coeffs[1]\n        R = abs(coeffs[0])\n")),(0,r.kt)("p",null,"Fit the data after the index ",(0,r.kt)("inlineCode",{parentName:"p"},"start_idx"),", which is the start index of the approximately linear portion of the curve. A first-order polynomial fitting is performed on the V-I data. Then the coefficient of the first-order term is the device resistance."),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3223-save-data-and-plots"},"3.2.2.3 Save data and plots"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[37]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},' r_path = f"{plot_path}resistance"\n        if not os.path.exists(r_path):\n            os.makedirs(r_path)\n        \n        with open(f"{r_path}/Rdata.txt", "w") as fp:\n            fp.write("Resistance: " + f"{R} Ohm\\n")\n        fontsize = 20\n        linewidth = 1\n        plt.rcParams.update({"font.size": fontsize})\n        fig, ax = plt.subplots()\n        fig.set_size_inches(12, 8)\n        ax.plot(Idc, Vdc, c="b", linewidth=linewidth, label="V-I")\n        ax.plot(Idc, V_fit, c="g", linewidth=linewidth, label="V_fit-I")\n        ax.set_xlabel("I[A]")\n        ax.set_ylabel("V[V]")\n        plt.legend()\n        plt.ticklabel_format(style="sci", scilimits=(-1, 2))\n        ax.grid()\n        plt.savefig(f"{plot_path}resistance/Rs.jpg")\n        plt.close()\n# endregion\n\nprint("\\x1b[6;30;42m" + "[Finished in %(t)s mins]" % {"t": round((time.time() - start)/60, 2)} + "\\x1b[0m")\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the V-I fitting"),"\n",(0,r.kt)("img",{alt:"resistance",src:a(71955).Z,width:"1200",height:"800"})),(0,r.kt)("center",null,"Fig 5. V-I fitting"),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"33-capacitance"},"3.3 Capacitance"),(0,r.kt)("p",null,"This section performs a SSAC simulation, and extracts the capacitance. The script is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD0A_C.py")," file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[38]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'import sys\n\n# encoding: utf-8\n\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nimport sys\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\nfrom VPD00_structure import *\n\n\n@timed\n@with_path\ndef simulation(*, run_options: "RunOptions", **kwargs, ):\n    # region --- 0. General Parameter ---\n\n    vsource = "Cathode"\n    gnd = "Anode"\n\n    sweep_vstart = 0\n    sweep_vstop = 3\n    sweep_vstep = 0.5\n\n    path = kwargs["path"]\n    simu_name = "VPD0B_C"\n    time_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\n    project_name = f"{simu_name}_local_{time_str}"\n    plot_path = f"{path}/plots/{project_name}/"\n    current_file_path = os.path.abspath(__file__)\n\n    # endregion\n    # region --- 1. Project ---\n    pj: Project = create_project(project_name, run_options)\n    # endregion\n    create_structures(pj, run_options)\n\n    mt = pj.Material()\n    st = pj.Structure()\n\n\n    # region --- 2. Simulation ---\n    simu = pj.Simulation()\n    simu.add(name=simu_name, type="DDM", property={\n        "background_material": mt["mat_sio2"], \n        "general": {"solver_mode": "ssac",\n                    "norm_length": 20,\n                    "temperature_dependence": "isothermal",\n                    "temperature": 298.15,\n                    "perturbation_amplitude": 0.001, "frequency_spacing": "single", "frequency": 1e8\n                    },\n        "geometry": {"dimension": "2d_x_normal", "x": 10, "x_span": 0, "y_min": 0, "y_max": 3.7, "z_min": -0.15, "z_max": 1.25},\n        "mesh_settings": {"mesh_size": 0.06},\n        "advanced": {"non_linear_solver": "newton",\n                     "linear_solver": "mumps",\n                     "fermi_statistics": "disabled", # or "enabled"\n                     "damping": "potential", # or "none"\n                     "potential_update": 1.0,\n                     "max_iterations": 15,\n                     "relative_tolerance": 1e-5,\n                     "tolerance_relax": 1e5,\n                     "divergence_factor": 1e25\n                     }\n    })\n\n    # endregion\n\n    # region --- 3. Simulation Settings ---\n\n    add_ddm_settings(pj, run_options)\n\n    bd = pj.BoundaryCondition()\n\n    bd.add(name=vsource,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[vsource]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": sweep_vstart, "range_stop": sweep_vstop, "range_step": sweep_vstep,\n                    "apply_ac_small_signal": "all", \n                    "envelop": "uniform",\n                    }\n    })\n    bd.add(name=gnd,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[gnd]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "single", "voltage": 0,\n                    "apply_ac_small_signal": "none",\n                    "envelop": "uniform",\n                    }\n    })\n\n    # endregion\n\n\n\n    # region --- 4. Run ---\n    if run_options.run:\n        result_ddm = simu[simu_name].run(\n            # resources={"compute_resources": "gpu", "gpu_devices": [{"id": 0}]}\n        )\n    # endregion\n\n\n    # region --- 5. Extract ---\n    if run_options.extract:\n        export_options = {"export_csv": True,\n                          "export_mat": True, "export_zbf": True}\n\n        result_ddm.extract(data="ddm:electrode_ac", electrode_name=vsource, savepath=f"{plot_path}C",\n                           target="line", attribute="C", plot_x=f"v_{vsource.lower()}", real=True, imag=False, frequency=1e8, show=False, export_csv=True)\n    # endregion\n\n    return project_name\n\nif __name__ == "__main__":\n    simulation(run_options=RunOptions(high_field=False, index_preview=False, run=True, extract=True))\n')),(0,r.kt)("p",null,"Description:"),(0,r.kt)("p",null,"For ",(0,r.kt)("inlineCode",{parentName:"p"},"DDM")," solver, the detailed properties can be found in the appendix. Here:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"solver_mode"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"SSAC"'),", which means a SSAC simulation"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency_spacing"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"single"'),", which means a single frequency point")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency"),"--Set the value of the single frequency"))))))),(0,r.kt)("br",null),(0,r.kt)("p",null,"For the electrode ",(0,r.kt)("inlineCode",{parentName:"p"},'"cathode"'),", a range of voltage from 0V to 3V is applied to it, with a step of 0.5V."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"apply_AC_small_signal"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"li"},"All"),", which means the small signal analysis is applied at each voltage step")),(0,r.kt)("br",null),(0,r.kt)("p",null,"For the result extraction:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"data"),"--It's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"C"'),", which is available after the SSAC simulation and is used to extract the capacitance")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the capacitance"),"\n",(0,r.kt)("img",{alt:"Capacitance",src:a(88367).Z,width:"640",height:"480"})),(0,r.kt)("center",null,"Fig 6. Capacitance"),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"34-optical-generation-rate"},"3.4 Optical generation rate"),(0,r.kt)("p",null,"This section performs a FDTD simulation to obtain the optical field profile in the structure of ",(0,r.kt)("inlineCode",{parentName:"p"},'"Ge"'),", and then calculate the photo-induced carrier generation rate. The average of the optical generation rate in the light propagating direction, which is the x-direction, is then taken to obtain the profile in the yz plane to be imported to the OEDevice simulation. The script is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD01_FDTD.py")," file."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"341-import-simulation-toolkit"},"3.4.1 Import simulation toolkit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[39]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import sys\n\n# encoding: utf-8\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nimport sys\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\n\nfrom VPD00_structure import *\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"342-set-general-parameters"},"3.4.2 Set general parameters"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[40]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'start = time.time()\ntime_str = time.strftime("%Y%m%d_%H%M%S/", time.localtime())\n\n# ----------------------   set project_path\n@timed\n@with_path\ndef simulation(*, run_options: "RunOptions", **kwargs, ):\n    # region --- 0. General Parameter ---\n\n    path = kwargs["path"]\n    simu_name = "VPD01_FDTD"\n    time_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\n    project_name = f"{simu_name}_local_{time_str}"\n    plot_path = f"{path}/plots/{project_name}/"\n    current_file_path = os.path.abspath(__file__)\n\n    # endregion\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"343-create-a-new-project"},"3.4.3 Create a new project"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[41]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"    # region --- 1. Project ---\n    pj: Project = create_project(project_name, run_options)\n    # endregion\n    \n    create_structures(pj, run_options)\n\n    mt = pj.Material()\n    st = pj.Structure()\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"344-add-the-solver"},"3.4.4 Add the solver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[42]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'   # region --- 2. Simulation ---\n    simu = pj.Simulation()\n    simu.add(name=simu_name, type="FDTD",\n             property={"background_material": mt["mat_sio2"],\n                       "geometry": {"x": x_mean, "x_span": x_span, "y": y_mean, "y_span": y_span, "z": z_mean, "z_span": z_span, },\n                       "general": {"simulation_time": 2000, },\n                       "mesh_settings": {"mesh_factor": 1.2, "mesh_type": "auto_non_uniform",\n                                         "mesh_accuracy": {"cells_per_wavelength": 14},\n                                         "minimum_mesh_step_settings": {"min_mesh_step": 1e-4},\n                                         "mesh_refinement": {"mesh_refinement": "curve_mesh", }},\n                       "boundary_conditions": {"x_min_bc": "PML", "x_max_bc": "PML", "y_min_bc": "PML", "y_max_bc": "PML", "z_min_bc": "PML", "z_max_bc": "PML",\n                                               "pml_settings": {"all_pml": {"profile":"standard","layer": 8, "kappa": 2, "sigma": 0.8, "polynomial": 3, "alpha": 0, "alpha_polynomial": 1, }}},\n                       \'advanced_options\': {\'auto_shutoff\': {\'auto_shutoff_min\': 1.00e-4, \'down_sample_time\': 200}},\n                       })\n    # endregion\n    # region --- 3. Simulation Settings ---\n    add_fdtd_settings(pj, run_options)\n\n    mn = pj.Monitor()\n\n    # endregion\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"FDTD")," solver for active device simulation can be used to extract the optical generation rate."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"345-run-and-extract-the-result"},"3.4.5 Run and extract the result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[43]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'   # region --- 4. Run ---\n    if run_options.run:\n        result_fdtd = simu[simu_name].run(\n            # resources={"compute_resources": "gpu", "gpu_devices": [{"id": 0}]}\n        )\n\n        """ Analysis """\n        analysis = pj.Analysis()\n        analysis.add(name="generation_rate", type="generation_rate",\n                     property={"power_monitor": "power_monitor", "average_dimension": "x", "light_power": 1, "workflow_id": result_fdtd.workflow_id})\n        gen_res = analysis["generation_rate"].run()\n    # endregion\n\n    # region --- 5. Extract ---\n        export_options = {"export_csv": True,\n                          "export_mat": True, "export_zbf": True}\n        gen_res.extract(data="fdtd:generation_rate", savepath=f"{plot_path}genrate", generation_rate_name="generation_rate",\n                        target="intensity", attribute="G", real=True, imag=False, **export_options, show=False)\n        gen_res.extract(data="fdtd:generation_rate", savepath=f"{plot_path}pabs_total", generation_rate_name="generation_rate",\n                        target="line", attribute="Pabs_total", plot_x="frequency", real=True, imag=False, show=False, export_csv=True)\n        gen_res.extract(data="fdtd:generation_rate", savepath=f"{plot_path}jsc", generation_rate_name="generation_rate",\n                        target="line", attribute="Jsc", plot_x="frequency", real=True, imag=False, show=False, export_csv=True)\n    # endregion\n\n    return project_name\n\nif __name__ == "__main__":\n    simulation(run_options=RunOptions(high_field=False, index_preview=False, run=True, extract=True))\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"pj.analysis()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Custom name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"monitor"),"--Name of the ",(0,r.kt)("inlineCode",{parentName:"li"},"power_monitor")," for calculating optical generation rate. The ",(0,r.kt)("inlineCode",{parentName:"li"},"power_monitor")," is required to be of 3D type"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"average_dimension"),"--Set the direction to take the average of the optical generate rate"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"light_power"),"--Set the power of the light source, measured in W. The optical generation rate will be scaled based on the power")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"gen_res.extract()")," parameters\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"data"),"--Type of the result"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," is set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"generation_rate"'),", besides an image file and a csv file, the result files also include a text file in ",(0,r.kt)("inlineCode",{parentName:"li"},".gfile")," format. The coordinate unit in the csv and the image file is ",(0,r.kt)("inlineCode",{parentName:"li"},"um"),", and the generation rate unit in the two files is ",(0,r.kt)("inlineCode",{parentName:"li"},"/cm^3/s"),". These units can't be modified when extracting the result. However, the units in the gfile are controlled by ",(0,r.kt)("inlineCode",{parentName:"li"},"coordinate_unit"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"field_length_unit"),". And only the gfile can be imported to the OEDevice solver"),(0,r.kt)("li",{parentName:"ul"},"When data is set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"pabs_total"'),", the total absorption power is extracted"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"export_csv"),"--Whether to export csv file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"show"),"--Whether to show the plot in a popup window"))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the optical generation rate"),"\n",(0,r.kt)("img",{alt:"Optical generation rate",src:a(64070).Z,width:"640",height:"480"})),(0,r.kt)("center",null,"Fig 7. Optical generation rate"),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"35-photo-current"},"3.5 Photo current"),(0,r.kt)("p",null,"This section imports the optical generation rate to the ",(0,r.kt)("inlineCode",{parentName:"p"},"DDM")," solver, and performs a steady state simulation to obtain the photo current. The script is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD02_Ip.py")," file."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"351-import-simulation-toolkit"},"3.5.1 Import simulation toolkit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[44]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import sys\n\n# encoding: utf-8\n\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nimport sys\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\nfrom VPD00_structure import *\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"352-set-general-parameters"},"3.5.2 Set general parameters"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[45]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'@timed\n@with_path\ndef simulation(*, run_options: "RunOptions", **kwargs, ):\n    # region --- 0. General Parameter ---\n\n    vsource = "Cathode"\n    gnd = "Anode"\n\n    sweep_vstart = 0\n    sweep_vstop = 4\n    sweep_vstep = 0.5\n\n    path = kwargs["path"]\n    simu_name = "VPD02_Ip"\n    time_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\n    project_name = f"{simu_name}_local_{time_str}"\n    plot_path = f"{path}/plots/{project_name}/"\n    current_file_path = os.path.abspath(__file__)\n\n    gen_rate_file = os.path.join(os.path.dirname(__file__), "VPD01_FDTD.gfile")\n\n    # endregion\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"genrate_file_path")," is the absolute path of the gfile to be imported to the ",(0,r.kt)("inlineCode",{parentName:"p"},"DDM")," solver. Here it's set to the absolute path of ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD01_FDTD.gfile")," in the same directory. And  this can be changed to the path of the gfile extracted by the ",(0,r.kt)("inlineCode",{parentName:"p"},"FDTD")," simulation."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"353-create-a-new-project"},"3.5.3 Create a new project"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[46]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"    # region --- 1. Project ---\n    pj: Project = create_project(project_name, run_options)\n    # endregion\n    create_structures(pj, run_options)\n\n    mt = pj.Material()\n    st = pj.Structure()\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"354-add-the-solver"},"3.5.4 Add the solver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[48]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'   # region --- 2. Simulation ---\n    simu = pj.Simulation()\n    simu.add(name=simu_name, type="DDM", property={\n        "background_material": mt["mat_sio2"], \n        "general": {"solver_mode": "steady_state", \n                    "norm_length": 20,\n                    "temperature_dependence": "isothermal",\n                    "temperature": 298.15,\n                    },\n        "geometry": {"dimension": "2d_x_normal", "x": 10, "x_span": 0, "y_min": 0, "y_max": 3.7, "z_min": -0.15, "z_max": 1.25},\n        "mesh_settings": {"mesh_size": 0.06},\n        "advanced": {"non_linear_solver": "newton",\n                     "linear_solver": "mumps",\n                     "fermi_statistics": "disabled", # or "enabled"\n                     "damping": "potential", # or "none"\n                     "potential_update": 1.0,\n                     "max_iterations": 15,\n                     "relative_tolerance": 1e-5,\n                     "tolerance_relax": 1e5,\n                     "divergence_factor": 1e25\n                     }\n    })\n\n    # endregion\n    \n    # region --- 3. Simulation Settings ---\n    add_ddm_settings(pj, run_options)\n\n    ds = pj.DataSpace()\n\n    ds.import_data(name="gen", type="generation", property={\n        "path": gen_rate_file\n    })\n\n    src = pj.Source()\n    src.add(name="gen", type="optical_generation", property={\n        "general": {"generation_data": ds["gen"], "source_fraction": 0.001},\n        "transient": {"envelop": "uniform"}\n    })\n')),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"add_ddm_settings"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"import_data.path"),"--Here it's not empty, meaning that the file at the path will be imported to the ",(0,r.kt)("inlineCode",{parentName:"p"},"DDM")," solver")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"source_fraction"),"--Set the scaling factor for the light power. The imported optical generation rate will be multiplied by this factor first, and then be used to solve the carrier transport"))))),(0,r.kt)("br",null),"#### 3.5.5 Add electrodes",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[47]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'\n    bd = pj.BoundaryCondition()\n\n    bd.add(name=vsource,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[vsource]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": sweep_vstart, "range_stop": sweep_vstop, "range_step": sweep_vstep,\n                    "apply_ac_small_signal": "none", \n                    "envelop": "uniform",\n                    }\n    })\n    bd.add(name=gnd,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[gnd]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "single", "voltage": 0,\n                    "apply_ac_small_signal": "none",\n                    "envelop": "uniform",\n                    }\n    })\n\n    # endregion\n')),(0,r.kt)("br",null),"#### 3.5.6 Run and extract the result",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[49]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'   # region --- 4. Run ---\n    if run_options.run:\n        result_ddm = simu[simu_name].run(\n            # resources={"compute_resources": "gpu", "gpu_devices": [{"id": 0}]}\n        )\n    # endregion\n\n\n    # region --- 5. Extract ---\n    if run_options.extract:\n        electrode_name = "cathode"\n        export_options = {"export_csv": True,\n                          "export_mat": True, "export_zbf": True}\n        slice_options = {f"v_{gnd.lower()}": 0.0}\n\n        result_ddm.extract(data="ddm:electrode", electrode_name=vsource, savepath=f"{plot_path}I_{vsource}",\n                           target="line", attribute="I", plot_x=f"v_{vsource.lower()}", real=True, imag=False, log=False, show=False, **slice_options, export_csv=True\n                           )  # attribute = "I", "In", "Ip", "Id", "Vs"\n    # endregion\n\n    return project_name\n\nif __name__ == "__main__":\n    simulation(run_options=RunOptions(high_field=False, index_preview=False, run=True, extract=True))\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the photo current"),"\n",(0,r.kt)("img",{alt:"Photo current",src:a(88672).Z,width:"640",height:"480"})),(0,r.kt)("center",null,"Fig 8. Photo current"),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"36-bandwidth"},"3.6 Bandwidth"),(0,r.kt)("p",null,"This section performs a transient simulation to extract the step response of the photo current. Then the bandwidth is obtained by postprocessing the I-t curve. The script is in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD03_bw.py")," file."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"361-import-simulation-toolkit"},"3.6.1 Import simulation toolkit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[50]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import sys\n\n# encoding: utf-8\n\nfrom maxoptics_sdk.helper import timed, with_path\nimport os\nimport time\nfrom typing import NamedTuple\nimport sys\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy import interpolate as scip, fft as scfft\n\ncurrent_dir = os.path.dirname(__file__)\nsys.path.extend([current_dir])\nfrom VPD00_structure import *\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"362-set-general-parameters"},"3.6.2 Set general parameters"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[51]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'@timed\n@with_path\ndef simulation(*, run_options: "RunOptions", **kwargs, ):\n    # region --- 0. General Parameter ---\n\n    path = kwargs["path"]\n    simu_name = "VPD03_bw"\n    time_str = time.strftime("%Y%m%d_%H%M%S", time.localtime())\n    project_name = f"{simu_name}_local_{time_str}"\n    plot_path = f"{path}/plots/{project_name}/"\n    current_file_path = os.path.abspath(__file__)\n\n    gen_rate_file = os.path.join(os.path.dirname(__file__), "VPD01_FDTD.gfile")\n\n    # endregion\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"363-create-a-new-project"},"3.6.3 Create a new project"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[52]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"}," # region --- 1. Project ---\n    pj: Project = create_project(project_name, run_options)\n    # endregion\n    create_structures(pj, run_options)\n\n    mt = pj.Material()\n    st = pj.Structure()\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"364-add-the-solver"},"3.6.4 Add the solver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[54]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'   # region --- 2. Simulation ---\n    simu = pj.Simulation()\n    simu.add(name=simu_name, type="DDM", property={\n        "background_material": mt["mat_sio2"], \n        "general": {"solver_mode": "transient", \n                    "norm_length": 20,\n                    "temperature_dependence": "isothermal",\n                    "temperature": 298.15,\n                    },\n        "geometry": {"dimension": "2d_x_normal", "x": 10, "x_span": 0, "y_min": 0, "y_max": 3.7, "z_min": -0.15, "z_max": 1.25},\n        "mesh_settings": {"mesh_size": 0.06},\n        "advanced": {"non_linear_solver": "newton",\n                     "linear_solver": "mumps",\n                     "fermi_statistics": "disabled", # or "enabled"\n                     "damping": "potential", # or "none"\n                     "potential_update": 1.0,\n                     "max_iterations": 15,\n                     "relative_tolerance": 1e-5,\n                     "tolerance_relax": 1e5,\n                     "divergence_factor": 1e25\n                     }\n    })\n\n    # endregion\n\n    # region --- 3. Simulation Settings ---\n    add_ddm_settings(pj, run_options)\n\n    ds = pj.DataSpace()\n\n    ds.import_data(name="gen", type="generation", property={\n        "path": gen_rate_file\n    })\n\n    src = pj.Source()\n    src.add(name="gen", type="optical_generation", property={\n        "general": {"generation_data": ds["gen"], "source_fraction": 0.001},\n        "transient": {"envelop": "pulse", "high_amplitude": 0.1, "low_amplitude": 0,\n                      "time_delay": 2e-12, "rising_edge": 1e-13, "falling_edge": 1e-13, "pulse_width": 6e-10, "period": 1e-6}\n    })\n\n')),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"solver_mode"),"--Here it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"transient"'),", which means a transient simulation"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"advanced"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"max_iterations"),"--Set the max iterations during the initialization of solving the Poisson equations."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fermi_statistics"),"--Whether to directly solve for the quasi-Fermi potential instead of carrier concentration as unkowns. ",(0,r.kt)("inlineCode",{parentName:"li"},'"enabled"')," means ",(0,r.kt)("inlineCode",{parentName:"li"},"True"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},'"disabled"')," means ",(0,r.kt)("inlineCode",{parentName:"li"},"False")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"damping"),"--Set the nonlinear update damping scheme. ",(0,r.kt)("inlineCode",{parentName:"li"},'"potential"')," means the damping is based on the potential variation"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"potential_update"),"--Set the threshold potential for potential damping. The large value will reduce the strength of damping effect"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"relative_tolerance"),"--Set the relative update tolerance"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tolerance_relax"),"--Set the tolerance relaxation factor for convergence on relative tolerance criteria"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"source_fraction"),"--When ",(0,r.kt)("inlineCode",{parentName:"li"},"envelop")," is set to",(0,r.kt)("inlineCode",{parentName:"li"},"uniform"),", this value is the scaling factor of the light power during the time range")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"364-add-electrodes"},"3.6.4 Add electrodes"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[53]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    bd = pj.BoundaryCondition()\n\n    bd.add(name="cathode",type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st["Cathode"]},\n        "general": {"electrode_mode": "transient",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": 0, "range_stop": 4, "range_step": 0.5,\n                    "apply_ac_small_signal": "none", \n                    "envelop": "uniform", "amplitude": 1, "time_delay": 0,\n                    "transient_time_control": [\n                        {"time_start": 0, "time_stop": 2e-12, "initial_step": 1e-12, "max_step": 5e-12},\n                        {"time_start": 2e-12, "time_stop": 2.001e-12, "initial_step": 3e-17, "max_step": 3e-17},\n                        {"time_start": 2.001e-12, "time_stop": 2.01e-12, "initial_step": 3e-17, "max_step": 6e-17},\n                        {"time_start": 2.01e-12, "time_stop": 2.03e-12, "initial_step": 6e-17, "max_step": 2e-15},\n                        {"time_start": 2.03e-12, "time_stop": 1e-11, "initial_step": 2e-15, "max_step": 5e-14},\n                        {"time_start": 1e-11, "time_stop": 5e-10, "initial_step": 5e-14, "max_step": 1e-11},\n                    ]\n                    }\n    })\n    bd.add(name="anode",type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st["Anode"]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "single", "voltage": 0,\n                    "apply_ac_small_signal": "none",\n                    "envelop": "uniform",\n                    }\n    })\n\n    # endregion\n')),(0,r.kt)("p",null,"Description:"),(0,r.kt)("p",null,"For the electrode ",(0,r.kt)("inlineCode",{parentName:"p"},'"cathode"'),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"electrode_mode"),"--Here it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"transient"'),", which means a transient boundary condition is applied to this electrode. Then the time dependence of the optical generation rate can be set at this electrode"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"range_stop"),"--Here it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},"tcad_voltage"),", meaning that the voltage is applied to the electrode and a steady state simulation is performed first. The transient simulation is based on the steady state result. The optical generation rate is not applied during the steady state simulation."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"range_step"),"--Set the max step of the voltage from the equilibrium state to steady state at the bias of ",(0,r.kt)("inlineCode",{parentName:"li"},"voltage"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"transient_time_control"),"--Set the time dependence of optical generation rate. It's of a list type, whose item is of a dictionary type. In each of its item:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"time_start"),"--Set the start time point of the range. The value of ",(0,r.kt)("inlineCode",{parentName:"li"},"0")," represents the steady state of the earlier simulation."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"time_stop"),"--Set the stop time point of the range"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"initial_step"),"--Set the initial time step of the range"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"max_step"),"--Set the max time step of the range"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"optical"),"--Set the optical generation rate during the time range",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enabled"),"--Whether to apply optical generation rate during the time range. The value of ",(0,r.kt)("inlineCode",{parentName:"li"},"1")," means ",(0,r.kt)("inlineCode",{parentName:"li"},"True"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"0")," means ",(0,r.kt)("inlineCode",{parentName:"li"},"False")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"envelop"),"--The envelop of the scaling factor of the light power during the time range. ")))))),(0,r.kt)("p",null,"Note:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The dependency of scaling factor of light power on time is a step function here.")),(0,r.kt)("br",null),"#### 3.6.6 Run the solver",(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[55]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    # region --- 4. Run ---\n    if run_options.run:\n        result_ddm = simu[simu_name].run(\n            # resources={"compute_resources": "gpu", "gpu_devices": [{"id": 0}]}\n        )\n    # endregion\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"367-extract-the-result"},"3.6.7 Extract the result"),(0,r.kt)("p",null,"The I-t curve is extracted. Because the dependency of the light power on time is a step function, the I-t curve here represents the step response of the photo current."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[56]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'   # region --- 5. Extract ---\n    if run_options.extract:\n        electrode_name = "cathode"\n        export_options = {"export_csv": True,\n                          "export_mat": True, "export_zbf": True}\n\n        result_ddm.extract(data="ddm:electrode", electrode_name=electrode_name, savepath=f"{plot_path}I",\n                           target="line", attribute="I", plot_x="time", real=True, imag=False, log=False, show=False, export_csv=True\n                           )  # attribute = "I", "In", "Ip", "Id", "Vs"\n    # endregion\n\n    return project_name\n\n\nif __name__ == "__main__":\n    simulation(run_options=RunOptions(high_field=True, index_preview=True, run=True, extract=True))\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the step response"),"\n",(0,r.kt)("img",{alt:"Step response",src:a(85425).Z,width:"640",height:"480"})),(0,r.kt)("center",null,"Fig 9. Step response"),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"368-postprocess"},"3.6.8 Postprocess"),(0,r.kt)("p",null,"By taking the derivative of the step response, the impulse response is obtained. Then the Fast Fourier Transform is applied to the impulse response, resulting in the frequency response, which allows to determine the device bandwidth."),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3681-obtain-the-impulse-response"},"3.6.8.1 Obtain the impulse response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[57]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# region --- 6. Post Processing ---\n        I = np.genfromtxt(f\"{plot_path}/I.csv\", skip_header=1, delimiter=',')[:,1]\n        t = np.genfromtxt(f\"{plot_path}/I.csv\", skip_header=1, delimiter=',')[:,0]\n        start_idx = 0\n        for i ,val in enumerate(t):\n            if val == 2e-12:\n                start_idx = i\n                break\n        \n        t = t[start_idx:]\n        I = I[start_idx:]\n\n        dt = np.diff(t)\n        dI = np.diff(I)\n        dIdt = (dI[1:] + (dt[1:]/dt[:-1])**2*dI[:-1])/(dt[1:]*(1+dt[1:]/dt[:-1]))\n        delta_t = 1e-13\n        th = t[1:len(t)-1]\n        nt = int(np.ceil((th[-1]-th[0])/delta_t))\n        t_interp = np.linspace(th[0], th[-1], nt)\n        interp1d_func = scip.interp1d(th, dIdt)\n        dIdt_interp = interp1d_func(t_interp)\n")),(0,r.kt)("p",null,"First, take the derivative of the step response to obtain the impulse response. And then uniform time intervals and perform interpolation on the impulse response to facilitate the subsequent application of the Fast Fourier Transform."),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3682-export-the-impulse-response-result"},"3.6.8.2 Export the impulse response result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[58]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    # Output impulse response\n        bandwidth_folder = f"{plot_path}/3dB_bandwidth"\n        if not os.path.exists(bandwidth_folder):\n            os.makedirs(bandwidth_folder)\n        impulse_fig = os.path.join(bandwidth_folder, "impulse_response.jpg")\n        fontsize = 20\n        linewidth = 1\n        plt.rcParams.update({"font.size": fontsize})\n        fig, ax = plt.subplots()\n        fig.set_size_inches(12, 8)\n        ax.plot(t_interp*1e12, dIdt_interp/np.max(np.abs(dIdt_interp)), c=\'b\', linewidth=linewidth, label="Impulse response")\n        ax.set_ylabel("Impulse response")\n        ax.set_xlabel("Time [ps]")\n        ax.grid()\n        plt.legend()\n        plt.ticklabel_format(style=\'sci\', scilimits=(-1,2))\n        plt.savefig(impulse_fig)\n        plt.close()\n\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the impulse response"),"\n",(0,r.kt)("img",{alt:"Impulse response",src:a(73758).Z,width:"1200",height:"800"})),(0,r.kt)("center",null,"Fig 10. Impulse response"),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3683-obtain-the-frequency-response"},"3.6.8.3 Obtain the frequency response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[59]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"    fresponse = scfft.rfft(dIdt_interp)\n        freq = scfft.rfftfreq(len(t_interp), t_interp[1]-t_interp[0])\n        fresponse = np.abs(fresponse)/np.max(np.abs(fresponse))\n\n        # Calculate 3dB bandwidth by interpolation\n        log_freq = np.log10(freq[1:])\n        log_fresp = 20*np.log10(np.abs(fresponse[1:]))\n        resp_3dB = -3\n\n        log_freq_3dB = scip.interp1d(log_fresp, log_freq)(resp_3dB)\n\n        bandwidth_GHz = 10**log_freq_3dB*1e-9\n")),(0,r.kt)("p",null,"Obtain the frequency response by Fast Fourier Transform. And then calculate the 3dB bandwidth by interpolation."),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"3684-export-the-frequency-response-result"},"3.6.8.4 Export the frequency response result"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[60]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"        bandwidth_file = os.path.join(bandwidth_folder, \"3dB_bandwidth.txt\")\n        bandwidth_fig = os.path.join(bandwidth_folder, \"3dB_bandwidth.jpg\")\n\n        with open(bandwidth_file, 'w') as fp:\n            fp.write(\"3dB bandwidth: \" + f\"{bandwidth_GHz:.6f} GHz\\n\")\n\n        fig, ax = plt.subplots()\n        fig.set_size_inches(12, 8)\n        ax.plot(freq[1:]*1e-9, 20*np.log10(np.abs(fresponse[1:])), 'b', linewidth=linewidth, label=\"Normalized response\")\n        ax.plot(freq[1:]*1e-9, resp_3dB*np.ones(len(freq[1:])), 'g', linewidth=linewidth)\n        ax.set_xlim(left = 1, right = 300)\n        ax.set_ylim(bottom = -25)\n        ax.set_xscale('log')\n        ax.set_ylabel('Normalized response [dB]')\n        ax.set_xlabel('Frequency [GHz]')\n        ax.grid(which='both', axis='both')\n        plt.savefig(bandwidth_fig)\n\n    # endregion\n\nif __name__ == \"__main__\":\n    simulation(run_options=RunOptions(high_field=True, index_preview=True, run=True, extract=True))\n\n")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Result show of the frequency response"),"\n",(0,r.kt)("img",{alt:"Frequency response",src:a(30749).Z,width:"1200",height:"800"})),(0,r.kt)("center",null,"Fig 11. Frequency response"),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"4-appendix"},"4. Appendix"),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"41-electronic-parameters-of-the-materials"},"4.1 Electronic parameters of the materials"),(0,r.kt)("p",null,"The parameter settings in the ",(0,r.kt)("inlineCode",{parentName:"p"},"VPD_material_Si.py")," file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[71]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'elec_Si_properties = {\n    "permittivity": {\n        "permittivity": 11.7,\n    },\n    "work_function":4.59,\n    "fundamental": {\n        "electron": "density_of_states",  \n        "hole": "density_of_states",  \n        "nc": {\n            # "constant": 3.21657e19,\n            "enable_model": True,\n            "nc300": 3.21657e19\n        },\n        "nv": {\n            # "constant": 1.82868e19,\n            "enable_model": True,\n            "nv300": 1.82868e19\n        },\n        "eg": {\n            # "constant": 1.12416,\n            "enable_model": True,\n            "alpha": 0.000473,\n            "beta": 636,\n            "eg0": 1.16\n        },\n        "narrowing": {\n            "model": "slotboom",  \n            "slotboom": {\n                "e0": 0.0045,\n                "n0": 1.0e17\n            }\n        },\n    },\n    "recombination":{\n        "trap_assisted": {\n            "enabled": True,\n            "taun": {\n                "enable_model": True,\n                # "constant": 1e-5,\n                "alpha": -1.5,\n                "dopant": {\n                    "model": "scharfetter",  \n                    "scharfetter": {\n                        "nref": 7.1e15,\n                        "taumax": 1.5e-9,\n                        "taumin":0\n                    }\n                },\n                "field": {\n                    "model": "none",  \n                    # "schenk": {\n                    #     "hbar_omega": 0.068,\n                    #     "mt": 0.258,\n                    #     "s": 3.5\n                    # }\n                }\n            },\n            "taup": {\n                "enable_model": True,\n                # "constant": 3e-6,\n                "alpha": -1.5,\n                "dopant": {\n                    "model": "scharfetter",  \n                    "scharfetter": {\n                        "nref": 7.1e15,\n                        "taumax": 1.5e-9,\n                        "taumin": 0\n                    }\n                },\n                "field": {\n                    "model": "none",  # or "none"\n                    # "schenk": {\n                    #     "hbar_omega": 0.068,\n                    #     "mt": 0.24,\n                    #     "s": 3.5\n                    # }\n                }\n            },\n            "ei_offset": 0.0\n        },\n        "radiative": {\n            "enabled": True,\n            "copt": 1.6e-14\n        },\n        "auger": {\n            "enabled": True,\n            "caun": {\n                "constant": 2.8e-31,\n                "enable_model": False,\n                # "a": 6.7e-32,\n                # "b": 2.45e-31,\n                # "c": -2.2e-32,\n                # "h": 3.46667,\n                # "n0": 1e18 \n            },\n            "caup": {\n                "constant": 9.9e-32,\n                "enable_model": False,\n                # "a": 7.2e-32,\n                # "b": 4.5e-33,\n                # "c": 2.63e-32,\n                # "h": 8.25688,\n                # "n0": 1e18\n            }\n        },\n        "band_to_band_tunneling": {\n            "enabled": False,\n            # "model": "hurkx",  # or "schenk"\n            # "hurkx": {\n            #     "agen": 3.5e21,\n            #     "arec": 3.5e21,\n            #     "bgen": 2.25e7,\n            #     "brec": 2.25e7,\n            #     "pgen": 2.0,\n            #     "prec": 2.0,\n            #     "alpha": 0\n            # },\n            # "schenk": {\n            #     "a": 8.977e20,\n            #     "b": 2.1466e7,\n            #     "hbar_omega": 0.0186\n            # }\n        }\n\n    },\n    "mobility":{\n        "mun": {\n            "lattice": {\n                # "constant": 1417,\n                "enable_model": True,\n                "eta": -2.5,\n                "mumax": 1471\n            },\n            "impurity": {\n                "model": "masetti", \n                "masetti": {\n                    "alpha": 0.68,\n                    "beta": 2,\n                    "cr": 9.68e16,\n                    "cs": 3.43e20,\n                    "mu1": 43.4,\n                    "mumin1": 52.2,\n                    "mumin2": 52.2,\n                    "pc": 0\n                }\n            },\n            "high_field": {\n                "model": "none",  \n                # "canali": {\n                #     "alpha": 0,\n                #     "beta0": 1.109,\n                #     "eta": 0.66\n                # },\n                # "driving_field": {\n                #     "model": "e_dot_j",  # or "grad_phi",\n                #     "grad_phi": {\n                #         "nref": 1e5\n                #     }\n                # },\n                # "vsat": {\n                #     "constant": 1.07e7,\n                #     "enable_model": False,\n                #     "gamma": 0.87,\n                #     "vsat0": 1.07e7\n                # }\n            }\n        },\n        "mup": {\n            "lattice": {\n                # "constant": 470.5,\n                "enable_model": True,\n                "eta": -2.2,\n                "mumax": 470.5\n            },\n            "impurity": {\n                "model": "masetti",  # or "none"\n                "masetti": {\n                    "alpha": 0.719,\n                    "beta": 2,\n                    "cr": 2.23e17,\n                    "cs": 6.1e20,\n                    "mu1": 29,\n                    "mumin1": 44.9,\n                    "mumin2": 44.9,\n                    "pc": 0\n                }\n            },\n            "high_field": {\n                "model": "none",  \n                # "canali": {\n                #     "alpha": 0,\n                #     "beta0": 1.213,\n                #     "eta": 0.17\n                # },\n                # "driving_field": {\n                #     "model": "e_dot_j",  # or "grad_phi",\n                #     "grad_phi": {\n                #         "nref": 1e5\n                #     }\n                # },\n                # "vsat": {\n                #     "constant": 8.37e6,\n                #     "enable_model": True,\n                #     "gamma": 0.52,\n                #     "vsat0": 8.37e6\n                # },\n            },\n        },\n    },\n}\n\n')),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"permittivity "),"--Set the permittivity and affinity")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"fundamental"),"--Set models and parameters of the band and the density of state")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"recombination"),"--Set models and parameters of recombination of electron and hole")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"mobility"),"--Set the model and parameters of mobility,"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"high_field"),"--Set the switch of high field mobility model and Fermi-Dirac statistics model")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"vsat"),"--Set the model and parameters of velocity saturation"))))),(0,r.kt)("p",null,"For the detailed introduction about electronic parameters, please refer to the document ",(0,r.kt)("inlineCode",{parentName:"p"},"examples/active_demo/Physics_Model_in_OEDevice.pdf"),"."),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"42-ddm-settings"},"4.2 DDM settings"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"DDM")," property list\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.norm_length"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.solver_mode"),(0,r.kt)("td",{parentName:"tr",align:"left"},"steady_state"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['steady_state', 'transient']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.temperature_dependence"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Isothermal"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['Isothermal']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.simulation_temperature"),(0,r.kt)("td",{parentName:"tr",align:"left"},"300"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"general.background_material"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.non_linear_solver"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Newton"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['Newton']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.linear_solver"),(0,r.kt)("td",{parentName:"tr",align:"left"},"MUMPS"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['MUMPS', 'LU', 'BCGS']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.fermi_statistics"),(0,r.kt)("td",{parentName:"tr",align:"left"},"disabled"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['disabled', 'enabled']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.damping"),(0,r.kt)("td",{parentName:"tr",align:"left"},"none"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['none', 'potential']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.potential_update"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.multi_threads"),(0,r.kt)("td",{parentName:"tr",align:"left"},"let_solver_choose"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['let_solver_choose', 'set_thread_count']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.thread_count"),(0,r.kt)("td",{parentName:"tr",align:"left"},"4"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.max_iterations"),(0,r.kt)("td",{parentName:"tr",align:"left"},"15"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.relative_tolerance"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e-5"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.tolerance_relax"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+5"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.divergence_factor"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+25"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"advanced.saving on divergence"),(0,r.kt)("td",{parentName:"tr",align:"left"},"disabled"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['disabled', 'enabled']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"genrate.genrate_path"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"genrate.source_fraction"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"genrate.coordinate_unit"),(0,r.kt)("td",{parentName:"tr",align:"left"},"m"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['m', 'cm', 'um', 'nm']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"genrate.field_length_unit"),(0,r.kt)("td",{parentName:"tr",align:"left"},"m"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['m', 'cm', 'um', 'nm']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.dimension"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2d_x_normal"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['2d_x_normal', '2d_y_normal', '2d_z_normal']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.x_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.y_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_span"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_min"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"geometry.z_max"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.perturbation_amplitude"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0.001"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.frequency_spacing"),(0,r.kt)("td",{parentName:"tr",align:"left"},"single"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['single', 'linear', 'log']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.frequency"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+6"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.start_frequency"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+06"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.stop_frequency"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+09"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.frequency_interval"),(0,r.kt)("td",{parentName:"tr",align:"left"},"9.9999e+10"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.num_frequency_points"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.log_start_frequency"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+06"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.log_stop_frequency"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1.0e+10"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"small_signal_ac.log_num_frequency_points"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"geometry"),"\uff1a"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dimension"),"--Set the dimension of the simulation region. Only 2D simulation is supportd currently. When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"2d_x_normal"'),", the simulation is on the yz plane. Similarly for the rest"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"general"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"norm_length"),"--Set the length in the third dimension, default to be 1"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"solver_mode"),"--Set the simulation mode. Steady state, transient and SSAC simulations are supported"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"temperature"),"--Set the simulation temperature"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"temperature_dependence"),"--Set the type of the temperature dependence. Only ",(0,r.kt)("inlineCode",{parentName:"li"},'"Isothermal"')," is supported currently "))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"genrate"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"genrate_path"),"--Set the absolute path of the optical generation rate file (gfile)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'""')," (by default), and empty string , no optical generation rate will be applied"),(0,r.kt)("li",{parentName:"ul"},"When it's not empty, the gfile at the path will be imported to apply the optical generation rate"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"coordinate_unit"),"--Set the coordinate unit in the gfile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"field_length_unit"),"--Set the length unit in the generation rate unit in the gfile")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"source_fraction"),"--Set the scaling factor for the light power. The imported optical generation rate will be multiplied by this factor first, and then be used to solve the carrier transport")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"small_signal_ac"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"perturbation_amplitude"),"--Set the voltage amplitude of the small signal")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency_spacing"),"--Set the spacing type of the frequency"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"single"'),", the frequency point is single"),(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"linear"'),", the frequency points are uniformly sampled"),(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"log"'),"\uff0cthe frequency points are uniformly sampled base on the logarithm of frequency"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency"),"--Set the value of the single frequency")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"start_frequency"),"--Set the start frequency of linear spacing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"stop_frequency"),"--Set the stop frequency of linear spacing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"frequency_interval"),"--Set the frequency interval of linear spacing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"num_frequency_points"),"--Set the number of frequency points of linear spacing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"log_start_frequency"),"--Set the start frequency of logarithmic spacing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"log_stop_frequency"),"--Set the stop frequency of logarithmic spacing")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"log_num_frequency_points"),"--Set the number of frequency points of logarithmic spacing")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"advanced"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"non_linear_solver"),"--Set the non-linear solver, only Newton method is supported currently"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"linear_solver"),"--Set the linear solver. Options are ",(0,r.kt)("inlineCode",{parentName:"li"},'"MUMPS"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"LU"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},'"BCGS"'),".  ",(0,r.kt)("inlineCode",{parentName:"li"},"MUMPS")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"LU")," are direct linear solvers which usually give the exact solution. However, ",(0,r.kt)("inlineCode",{parentName:"li"},"MUMPS")," supports parallel computation while ",(0,r.kt)("inlineCode",{parentName:"li"},"LU")," doesn't. \uff1b",(0,r.kt)("inlineCode",{parentName:"li"},'"BCGS"')," is a Krylov subspace (KSP) iterative solver, which also supports parallel computation and is more efficient but can only give approximate results."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"use_quasi_fermi"),"--Whether to directly solve for the quasi-Fermi potential instead of carrier concentration as unkowns. ",(0,r.kt)("inlineCode",{parentName:"li"},'"enabled"')," means ",(0,r.kt)("inlineCode",{parentName:"li"},"True"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},'"disabled"')," means ",(0,r.kt)("inlineCode",{parentName:"li"},"False")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"damping"),"--Set the nonlinear update damping scheme. ",(0,r.kt)("inlineCode",{parentName:"li"},'"potential"')," means the damping is based on the potential variation"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"potential_update"),"--Set the threshold potential for potential damping. The large value will reduce the strength of damping effect"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"multi_threads"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"let_solver_choose"'),", the solver will determine the number of threads to use. The default maximum number of threads is 4"),(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"set_thread_count"'),", the number of threads is set by the user to ",(0,r.kt)("inlineCode",{parentName:"li"},"thread_count")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"thread_count"),"--Custom number of threads"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"max_iterations"),"--Set global maximum number of iterations, available when ",(0,r.kt)("inlineCode",{parentName:"li"},"use_global_max_iterations")," is ",(0,r.kt)("inlineCode",{parentName:"li"},"True")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"use_global_max_iterations"),"--Whether to use global max iterations during the initialization of solving the Poisson equations and the subsequent computing for solving the drift-diffusion equations coupling with Poisson equations, default to be ",(0,r.kt)("inlineCode",{parentName:"li"},"True")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"poisson_max_iterations"),"--Set the max iterations during the initialization of solving the Poisson equations, available when ",(0,r.kt)("inlineCode",{parentName:"li"},"use_global_max_iterations")," is ",(0,r.kt)("inlineCode",{parentName:"li"},"False")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ddm_max_iterations"),"--Set the max iterations during the subsequent computing for solving the drift-diffusion equations coupling with Poisson equations, available when ",(0,r.kt)("inlineCode",{parentName:"li"},"use_global_max_iterations")," is ",(0,r.kt)("inlineCode",{parentName:"li"},"False")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"relative_tolerance"),"--Set the relative update tolerance"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tolerance_relax"),"--Set the tolerance relaxation factor for convergence on relative tolerance criteria"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"divergence_factor"),"--Nonlinear solver fault with divergence when each individual function norm exceeds the threshold as its absolute tolerance multiply by this factor")))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"43-electrode-settings"},"4.3 Electrode settings"),(0,r.kt)("p",null,"Electrodes are added and set up through the ",(0,r.kt)("inlineCode",{parentName:"p"},"add_electrode")," function. The format of the function is"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[72]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},' add_ddm_settings(pj, run_options)\n\n    bd = pj.BoundaryCondition()\n\n    bd.add(name,type="Electrode", property)\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"add_electrode()")," parameters:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"name"),"--Electrode name"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"property"),"--Other properties")),(0,r.kt)("br",null),(0,r.kt)("p",null,"There are two different type of electrical boundary conditions, which are ",(0,r.kt)("inlineCode",{parentName:"p"},'"steady_state"'),"and ",(0,r.kt)("inlineCode",{parentName:"p"},'"transient"'),", specified by the property ",(0,r.kt)("inlineCode",{parentName:"p"},"electrode_mode"),"."),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"431-steady-state-boundary-condition"},"4.3.1 Steady state boundary condition"),(0,r.kt)("p",null,"When the property ",(0,r.kt)("inlineCode",{parentName:"p"},"electrode_mode")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"steady_state"'),", the steady state boundary condition is applied."),(0,r.kt)("br",null),(0,r.kt)("p",null,"Property list of steady state boundary condition:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"force_ohmic"),(0,r.kt)("td",{parentName:"tr",align:"left"},"true"),(0,r.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"electrode_mode"),(0,r.kt)("td",{parentName:"tr",align:"left"},"steady_state"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['steady_state','transient']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"apply_AC_small_signal"),(0,r.kt)("td",{parentName:"tr",align:"left"},"none"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['none', 'All']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"sweep_type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"single"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['single', 'range', 'value']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"voltage"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'single'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"range_start"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'range'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"range_stop"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'range'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"range_interval"),(0,r.kt)("td",{parentName:"tr",align:"left"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'range'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"range_num_points"),(0,r.kt)("td",{parentName:"tr",align:"left"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'range'")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]sweep_value_table.index"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'value'.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]sweep_value_table.number"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Available when sweep_type is 'value'.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"surface_type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"solid"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['solid']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"solid"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"surface_type"),"--Type of the surface to be set as an electrode. Currently only ",(0,r.kt)("inlineCode",{parentName:"p"},'"solid"')," is supported, meaning that all the surfaces of a structure are selected")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"solid"),"--Name of the structure to be set as an electrode. Available when ",(0,r.kt)("inlineCode",{parentName:"p"},"surface_type")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"solid"'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"force_ohmic"),"--Whether the electrode is ohmic, default to be ",(0,r.kt)("inlineCode",{parentName:"p"},"True"),". Currently only ohmic contact is supported, so ",(0,r.kt)("inlineCode",{parentName:"p"},"force_ohmic")," can't be set to ",(0,r.kt)("inlineCode",{parentName:"p"},"False"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"bc_mode"),"--Set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"steady_state"')," for steady state boundary condition")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"apply_AC_small_signal"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"none"')," (as default), no AC small signal is applied at each sweeping voltage"),(0,r.kt)("li",{parentName:"ul"},'When it\'s set to "All", the AC small signal is applied after steady state simulation at each sweeping voltage'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"sweep_type"),"--Type of sweeping voltage. Options are ",(0,r.kt)("inlineCode",{parentName:"p"},'"single"'),", ",(0,r.kt)("inlineCode",{parentName:"p"},'"range"')," and ",(0,r.kt)("inlineCode",{parentName:"p"},'"value"')),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"single"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},"voltage")," is required"),(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"range"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},"range_start"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"range_stop"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"range_interval")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"range_num_points")," are required"),(0,r.kt)("li",{parentName:"ul"},"When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"value"'),", ",(0,r.kt)("inlineCode",{parentName:"li"},"sweep_value_table")," is required"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"voltage"),"--Set the value of the single voltage")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"range_start"),"--Set the start value of the voltage range")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"range_stop"),"--Set the stop value of the voltage range")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"range_interval"),"--Set the voltage interval of the voltage range")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"range_num_points"),"--Set the number of points of the voltage range")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"sweep_value_table"),"--Table of voltage values. It's a list, whose item is a dictionay. In each of its item:"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"index"),"--Set the index of the voltage value"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"number"),"--Set the value of the voltage")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Example for single voltage")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[73]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    add_ddm_settings(pj, run_options)\n\n    bd = pj.BoundaryCondition()\n\n    bd.add(name=gnd,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[gnd]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "single", "voltage": 0,\n                    "apply_ac_small_signal": "none",\n                    "envelop": "uniform",\n                    }\n    })\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Example for voltage range")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[74]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    add_ddm_settings(pj, run_options)\n\n    bd = pj.BoundaryCondition()\n\n    bd.add(name=vsource,type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st[vsource]},\n        "general": {"electrode_mode": "steady_state",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": sweep_vstart, "range_stop": sweep_vstop, "range_step": sweep_vstep,\n                    "apply_ac_small_signal": "none", \n                    "envelop": "uniform",\n                    }\n    })\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"432-transient-boundary-condition"},"4.3.2 Transient boundary condition"),(0,r.kt)("p",null,"When the property ",(0,r.kt)("inlineCode",{parentName:"p"},"electrode_mode")," is set to ",(0,r.kt)("inlineCode",{parentName:"p"},'"transient"'),", the transient boundary condition is applied."),(0,r.kt)("br",null),(0,r.kt)("p",null,"Property list of transient boundary condition:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"}),(0,r.kt)("th",{parentName:"tr",align:"left"},"default"),(0,r.kt)("th",{parentName:"tr",align:"left"},"type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"force_ohmic"),(0,r.kt)("td",{parentName:"tr",align:"left"},"true"),(0,r.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"electrode_mode"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['transient']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"voltage"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.time_start"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.time_stop"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.initial_step"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.max_step"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.optical.enabled"),(0,r.kt)("td",{parentName:"tr",align:"left"},"0"),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","[0, 1]")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.optical.envelop"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"integer"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","[0]")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"[]time_table.optical.source_fraction"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"float"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"surface_type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"solid"),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Selections are ","['solid']",".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"solid"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"string"),(0,r.kt)("td",{parentName:"tr",align:"left"})))),(0,r.kt)("p",null,"Description:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"surface_type"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"solid"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"force_ohmic"),"--The same as the one in steady state condition"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"bc_mode"),"--Set to ",(0,r.kt)("inlineCode",{parentName:"li"},'"transient"')," for transient boundary condition. Then the time dependence of the optical generation rate can be set at this electrode"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"voltage"),"--Set the voltage that  is applied to the electrode and a steady state simulation is performed first. The transient simulation is based on the steady state result. The optical generation rate is not applied during the steady state simulation."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"v_step_max"),"--Set the max step of the voltage from the equilibrium state to steady state at the bias of ",(0,r.kt)("inlineCode",{parentName:"li"},"voltage"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"time_table"),"--Set the time dependence of optical generation rate. It's a list, whose item is a dictionary. In each of its item:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"time_start"),"--Set the start time point of the range. The value of ",(0,r.kt)("inlineCode",{parentName:"li"},"0")," represents the steady state of the earlier simulation."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"time_stop"),"--Set the stop time point of the range"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"initial_step"),"--Set the initial time step of the range"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"max_step"),"--Set the max time step of the range"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"optical"),"--Set the optical generation rate during the time range",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"enabled"),"--Whether to apply optical generation rate during the time range. The value of ",(0,r.kt)("inlineCode",{parentName:"li"},"1")," means ",(0,r.kt)("inlineCode",{parentName:"li"},"True"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"0")," means ",(0,r.kt)("inlineCode",{parentName:"li"},"False")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"envelop"),"--The envelop of the scaling factor of the light power during the time range. When it's set to ",(0,r.kt)("inlineCode",{parentName:"li"},"0"),", the envelop is uniform"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"source_fraction"),"--When ",(0,r.kt)("inlineCode",{parentName:"li"},"envelop")," is set to",(0,r.kt)("inlineCode",{parentName:"li"},"0"),", this value is the scaling factor of the light power during the time range")))))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Example for transient boundary condition")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[76]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'    bd = pj.BoundaryCondition()\n\n    bd.add(name="cathode",type="Electrode", property={\n        "geometry": {"surface_type": "solid", "solid": st["Cathode"]},\n        "general": {"electrode_mode": "transient",  \n                    "contact_type": "ohmic_contact",\n                    "sweep_type": "range", "range_start": 0, "range_stop": 4, "range_step": 0.5,\n                    "apply_ac_small_signal": "none", \n                    "envelop": "uniform", "amplitude": 1, "time_delay": 0,\n                    "transient_time_control": [\n                        {"time_start": 0, "time_stop": 2e-12, "initial_step": 1e-12, "max_step": 5e-12},\n                        {"time_start": 2e-12, "time_stop": 2.001e-12, "initial_step": 3e-17, "max_step": 3e-17},\n                        {"time_start": 2.001e-12, "time_stop": 2.01e-12, "initial_step": 3e-17, "max_step": 6e-17},\n                        {"time_start": 2.01e-12, "time_stop": 2.03e-12, "initial_step": 6e-17, "max_step": 2e-15},\n                        {"time_start": 2.03e-12, "time_stop": 1e-11, "initial_step": 2e-15, "max_step": 5e-14},\n                        {"time_start": 1e-11, "time_stop": 5e-10, "initial_step": 5e-14, "max_step": 1e-11},\n                    ]\n                    }\n')),(0,r.kt)("br",null))))}k.isMDXComponent=!0},30749:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/BW_3dB_bandwidth-0c918e020024631878fbbaee3a071266.jpg"},85425:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/BW_I-64128602a5fee882ec3dfa3cfa36db91.png"},73758:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/BW_impulse_response-9983d903765f33c1af8e7fa567258a52.jpg"},88367:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/C-dd06780c88eb212c6c1bd46253277c0a.png"},64070:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/FDTD_genrate-025308993f27afa4a014023f224c7585.png"},88672:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/IP_Icathode-0fbfed84c14fc3b3f16465bf60de5c83.png"},87836:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Id-9f68b9c319b4c4e15308ab181fa4bce5.png"},18194:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Rs_Ianode-714a98694a2193eebfff6ec4e98fae37.png"},71955:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Rs_Resistance-ab2821197a71cb3dd1dda652d98d0ec7.jpg"}}]);